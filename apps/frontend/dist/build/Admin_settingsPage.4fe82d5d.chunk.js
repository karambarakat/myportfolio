"use strict";(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[5895],{93500:(ce,O,o)=>{o.r(O),o.d(O,{SettingsPage:()=>hn,default:()=>Wn});var e=o(67294),y=o(68547),r=o(49656),oe=o(17034),Q=o(97132),We=o(15482),_=o(61931),Te=o(38683),Ae=o(23724),Re=o(67838),He=o(49066),V=o(185),R=o(35961),T=o(11276),Be=o(74571),Y=o(72735),Oe=o(7681),K=o(29728),ze=o(36182),re=o(17772),x=o(85018),ae=o(45697),f=o.n(ae),tt=o(73987),Xe=o(17973),be=o(59689),je=o(12028),Ne=o(96315),Ue=o(30815),Ze=o(60612);const Qe={currentStep:void 0},it=(m=Qe,c)=>(0,Ze.default)(m,l=>{switch(c.type){case"GO_TO":{l.currentStep=c.to;break}default:return l}});var ot=o(42866),lt=o(24969);const ne={localImage:void 0},Ve=(m=ne,c)=>(0,Ze.default)(m,l=>{switch(c.type){case"SET_LOCAL_IMAGE":{l.localImage=c.value;break}default:return l}}),ee=({onChangeLogo:m,customLogo:c,goTo:l,Component:h,modalTitle:u,next:P,prev:L,currentStep:A})=>{const[{localImage:C},D]=(0,e.useReducer)(Ve,ne),{formatMessage:Ce}=(0,Q.useIntl)(),le=vt=>{D({type:"SET_LOCAL_IMAGE",value:vt})},_e=()=>{l(null)};return A?e.createElement(ot.P,{labelledBy:"modal",onClose:_e},e.createElement(lt.x,null,e.createElement(Y.Z,{fontWeight:"bold",as:"h2",id:"modal"},Ce(u))),e.createElement(h,{setLocalImage:le,goTo:l,next:P,prev:L,onClose:_e,asset:C||c,onChangeLogo:m})):null};ee.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},ee.propTypes={Component:f().elementType,currentStep:f().string,customLogo:f().shape({name:f().string,url:f().string,width:f().number,height:f().number,ext:f().string}),goTo:f().func.isRequired,modalTitle:f().shape({id:f().string,defaultMessage:f().string}),next:f().string,onChangeLogo:f().func.isRequired,prev:f().string};const $=ee,k=750,I=100,H=["image/jpeg","image/png","image/svg+xml"];var W=o(82777),X=o(60633),me=o(42761),De=o(70004),G=o(71893),pe=o(46273),Ye=o(52624),Ge=o(36856),F=o(45377),ie=o(54574),Z=o(96404),te=o(35957),v=(m,c,l)=>new Promise((h,u)=>{var P=C=>{try{A(l.next(C))}catch(D){u(D)}},L=C=>{try{A(l.throw(C))}catch(D){u(D)}},A=C=>C.done?h(C.value):Promise.resolve(C.value).then(P,L);A((l=l.apply(m,c)).next())});const ve={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},de={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},Je=m=>new Promise(c=>{const l=new FileReader;l.onload=()=>{const h=new Image;h.onload=function(){c({width:h.width,height:h.height})},h.src=l.result},l.readAsDataURL(m)}),at=(m,c)=>({ext:m.name.split(".").pop(),size:m.size/1e3,name:m.name,url:URL.createObjectURL(m),rawFile:m,width:c.width,height:c.height}),ye=m=>v(void 0,null,function*(){let c;if(!H.includes(m.type))throw c=new Error("File format"),c.displayMessage=ve,c;const h=yield Je(m);if(!(h.width<=k&&h.height<=k))throw c=new Error("File sizing"),c.displayMessage=de,c;const P=at(m,h);if(!(P.size<=I))throw c=new Error("File sizing"),c.displayMessage=de,c;return P});var J=(m,c,l)=>new Promise((h,u)=>{var P=C=>{try{A(l.next(C))}catch(D){u(D)}},L=C=>{try{A(l.throw(C))}catch(D){u(D)}},A=C=>C.done?h(C.value):Promise.resolve(C.value).then(P,L);A((l=l.apply(m,c)).next())});const xe=(0,G.default)(F._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,pt=({setLocalImage:m,goTo:c,next:l,onClose:h})=>{const{formatMessage:u}=(0,Q.useIntl)(),[P,L]=(0,e.useState)(!1),[A,C]=(0,e.useState)(void 0),D=(0,e.useRef)(null),Ce=()=>L(!0),le=()=>L(!1),_e=et=>{et.preventDefault(),D.current.click()},vt=()=>J(void 0,null,function*(){le();const et=D.current.files[0];if(et)try{const ct=yield ye(et);m(ct),c(l)}catch(ct){if(ct.displayMessage)C(u(ct.displayMessage,{size:I,dimension:k})),D.current.focus();else throw ct}}),rt=()=>P?"primary500":A?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(R.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(ie.g,{name:"logo-upload",error:A},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(Oe.K,{spacing:2},e.createElement(pe.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:P?"primary100":"neutral100",borderColor:rt(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:Ce,onDragLeave:le},e.createElement(Ye.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:te.Z,"aria-hidden":!0}),e.createElement(R.x,{paddingTop:3,paddingBottom:5},e.createElement(Y.Z,{variant:"delta",as:"span"},u({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(xe,{accept:H,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:vt,ref:D,id:"logo-upload"}),e.createElement(K.z,{type:"button",onClick:_e},u({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(R.x,{paddingTop:6},e.createElement(Y.Z,{variant:"pi",textColor:"neutral600"},u({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:I,dimension:k})))),e.createElement(Z.c,null)))))),e.createElement(Ge.m,{startActions:e.createElement(K.z,{onClick:h,variant:"tertiary"},u({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};pt.defaultProps={next:null},pt.propTypes={goTo:f().func.isRequired,next:f().string,onClose:f().func.isRequired,setLocalImage:f().func.isRequired};const Nt=pt;var Zt=o(16364),$t=o(78648),Wt=(m,c,l)=>new Promise((h,u)=>{var P=C=>{try{A(l.next(C))}catch(D){u(D)}},L=C=>{try{A(l.throw(C))}catch(D){u(D)}},A=C=>C.done?h(C.value):Promise.resolve(C.value).then(P,L);A((l=l.apply(m,c)).next())});const At=m=>Wt(void 0,null,function*(){try{const c=yield $t.Z.get(m,{responseType:"blob",timeout:8e3});return new File([c.data],c.config.url,{type:c.headers["content-type"]})}catch(c){throw c.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},c}});var Et=(m,c,l)=>new Promise((h,u)=>{var P=C=>{try{A(l.next(C))}catch(D){u(D)}},L=C=>{try{A(l.throw(C))}catch(D){u(D)}},A=C=>C.done?h(C.value):Promise.resolve(C.value).then(P,L);A((l=l.apply(m,c)).next())});const zt=({goTo:m,next:c,onClose:l,setLocalImage:h})=>{const{formatMessage:u}=(0,Q.useIntl)(),[P,L]=(0,e.useState)(""),[A,C]=(0,e.useState)(null),D=le=>{L(le.target.value)},Ce=()=>Et(void 0,null,function*(){try{const le=yield At(P),_e=yield ye(le);h(_e),m(c)}catch(le){if(le.displayMessage)C(u(le.displayMessage,{size:I,dimension:k}));else throw le}});return e.createElement("form",{onSubmit:le=>{le.preventDefault(),Ce()}},e.createElement(R.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Zt.o,{label:u({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:A,onChange:D,value:P,name:"logo-url"})),e.createElement(Ge.m,{startActions:e.createElement(K.z,{onClick:l,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(K.z,{type:"submit"},u({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};zt.defaultProps={next:null},zt.propTypes={goTo:f().func.isRequired,next:f().string,onClose:f().func.isRequired,setLocalImage:f().func.isRequired};const Rt=zt,Ut=({setLocalImage:m,goTo:c,next:l,onClose:h})=>{const{formatMessage:u}=(0,Q.useIntl)();return e.createElement(W.v,{label:u({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(R.x,{paddingLeft:8,paddingRight:8},e.createElement(X.m,null,e.createElement(X.O,null,u({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(X.O,null,u({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(De.i,null)),e.createElement(me.n,null,e.createElement(me.x,null,e.createElement(Nt,{onClose:h,setLocalImage:m,goTo:c,next:l})),e.createElement(me.x,null,e.createElement(Rt,{onClose:h,setLocalImage:m,goTo:c,next:l}))))};Ut.defaultProps={next:null},Ut.propTypes={goTo:f().func.isRequired,next:f().string,onClose:f().func.isRequired,setLocalImage:f().func.isRequired};const Vt=Ut;var yn=o(99220),kt=o(19093),Cn=o(87535),En=o(25001),Gt=o(75517),Kt=o(20799),Ot=o(41384);const Dt=({asset:m})=>{const{formatMessage:c}=(0,Q.useIntl)();return e.createElement(yn.Z,null,e.createElement(kt.O,null,e.createElement(Cn.H,{size:"S",src:m.url})),e.createElement(En.e,null,e.createElement(Gt.a,null,e.createElement(Kt.l,null,m.name),e.createElement(Kt._,null,`${m.ext.toUpperCase()} - ${m.width}\u2715${m.height}`)),e.createElement(Ot.E,null,c({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Dt.propTypes={asset:f().shape({name:f().string,url:f().string,width:f().number,height:f().number,ext:f().string}).isRequired};const Ht=Dt,st=({onClose:m,asset:c,prev:l,next:h,goTo:u,setLocalImage:P,onChangeLogo:L})=>{const{formatMessage:A}=(0,Q.useIntl)(),C=()=>{P(void 0),u(l)},D=()=>{L(c),u(h)};return e.createElement(e.Fragment,null,e.createElement(R.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(pe.k,{justifyContent:"space-between",paddingBottom:6},e.createElement(pe.k,{direction:"column",alignItems:"flex-start"},e.createElement(Y.Z,{variant:"pi",fontWeight:"bold"},A({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(Y.Z,{variant:"pi",textColor:"neutral500"},A({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(K.z,{onClick:C,variant:"secondary"},A({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(R.x,{maxWidth:(0,y.pxToRem)(180)},e.createElement(Ht,{asset:c}))),e.createElement(Ge.m,{startActions:e.createElement(K.z,{onClick:m,variant:"tertiary"},A({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(K.z,{onClick:D},A({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};st.defaultProps={next:null,prev:null},st.propTypes={goTo:f().func.isRequired,asset:f().shape({name:f().string,url:f().string,width:f().number,height:f().number,ext:f().string}).isRequired,next:f().string,onClose:f().func.isRequired,onChangeLogo:f().func.isRequired,prev:f().string,setLocalImage:f().func.isRequired};const Jn={upload:{Component:Vt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:st,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},nt=({customLogo:m,defaultLogo:c,onChangeLogo:l,onResetMenuLogo:h})=>{const[{currentStep:u},P]=(0,e.useReducer)(it,Qe),{Component:L,next:A,prev:C,modalTitle:D}=Jn[u]||{},{formatMessage:Ce}=(0,Q.useIntl)(),le=_e=>{P({type:"GO_TO",to:_e})};return e.createElement(e.Fragment,null,e.createElement(tt.F,{label:Ce({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"}),selectedSlide:0,hint:Ce({id:"Settings.application.customization.carousel-hint",defaultMessage:"Change the admin panel logo (Max dimension: {dimension}x{dimension}, Max file size: {size}KB)"},{size:I,dimension:k}),previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:(m==null?void 0:m.name)||"logo.png",actions:e.createElement(Xe.b,null,e.createElement(je.h,{onClick:()=>le(m?"pending":"upload"),label:Ce({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(Ne.default,null)}),m&&e.createElement(je.h,{onClick:h,label:Ce({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(Ue.Z,null)}))},e.createElement(be.q,{label:Ce({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(R.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:(m==null?void 0:m.url)||c,alt:Ce({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement($,{Component:L,currentStep:u,onChangeLogo:l,customLogo:m,goTo:le,next:A,prev:C,modalTitle:D}))};nt.defaultProps={customLogo:null},nt.propTypes={customLogo:f().shape({url:f().string,name:f().string}),defaultLogo:f().string.isRequired,onChangeLogo:f().func.isRequired,onResetMenuLogo:f().func.isRequired};const qn=nt,Mt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}}},eo=(m=Mt,c)=>(0,Ze.default)(m,l=>{switch(c.type){case"SET_CUSTOM_MENU_LOGO":{l.menuLogo.display=c.value,l.menuLogo.submit.rawFile=c.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{l.menuLogo.display=null,l.menuLogo.submit={rawFile:null,isReset:!0};break}default:return l}});var ft=o(82492),to=o.n(ft);const Qt=(m,c)=>to()(m,{menuLogo:{display:c.menuLogo}}),St=(0,e.forwardRef)(({projectSettingsStored:m},c)=>{const{formatMessage:l}=(0,Q.useIntl)(),{trackUsage:h}=(0,y.useTracking)(),{logos:{menu:u}}=(0,_.um)(),[{menuLogo:P},L]=(0,e.useReducer)(eo,Mt,()=>Qt(Mt,m)),A=D=>{L({type:"SET_CUSTOM_MENU_LOGO",value:D})},C=()=>{h("didClickResetLogo"),L({type:"RESET_CUSTOM_MENU_LOGO"})};return(0,e.useImperativeHandle)(c,()=>({getValues:()=>({menuLogo:P.submit})})),e.createElement(R.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(Y.Z,{variant:"delta",as:"h3"},l({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(T.r,{paddingTop:4},e.createElement(Be.P,{col:6,s:12},e.createElement(qn,{onChangeLogo:A,customLogo:P.display,defaultLogo:u.default,onResetMenuLogo:C}))))});St.defaultProps={projectSettingsStored:null},St.propTypes={projectSettingsStored:f().shape({menuLogo:f().shape({url:f().string,name:f().string})})};const Yt=St;var Jt=o(23998),qt=o(68718),_t=o.n(qt),en=Object.defineProperty,bn=Object.defineProperties,tn=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,no=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,Lt=(m,c,l)=>c in m?en(m,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[c]=l,Pn=(m,c)=>{for(var l in c||(c={}))no.call(c,l)&&Lt(m,l,c[l]);if(nn)for(var l of nn(c))Sn.call(c,l)&&Lt(m,l,c[l]);return m},on=(m,c)=>bn(m,tn(c));const ht=m=>_t()(m,(c,l,h)=>{l&&l.url?c[h]=on(Pn({},l),{url:(0,y.prefixFileUrlWithBackendUrl)(l.url)}):c[h]=l},{});var an=(m,c,l)=>new Promise((h,u)=>{var P=C=>{try{A(l.next(C))}catch(D){u(D)}},L=C=>{try{A(l.throw(C))}catch(D){u(D)}},A=C=>C.done?h(C.value):Promise.resolve(C.value).then(P,L);A((l=l.apply(m,c)).next())});const ao=()=>an(void 0,null,function*(){const{data:m}=yield Jt.be.get("/admin/project-settings");return ht(m)}),sn=m=>an(void 0,null,function*(){const{data:c}=yield Jt.be.post("/admin/project-settings",m);return ht(c)}),Tn=m=>{const c=new FormData;return Object.entries(m).forEach(([l,h])=>{h&&h.rawFile instanceof File&&c.append(l,h.rawFile),h&&h.isReset&&c.append(l,null)}),c};var An=(m,c,l)=>new Promise((h,u)=>{var P=C=>{try{A(l.next(C))}catch(D){u(D)}},L=C=>{try{A(l.throw(C))}catch(D){u(D)}},A=C=>C.done?h(C.value):Promise.resolve(C.value).then(P,L);A((l=l.apply(m,c)).next())});const rn=[{action:"admin::project-settings.update",subject:null}],Rn=()=>{const m=(0,e.useRef)(),c=(0,y.useNotification)(),{trackUsage:l}=(0,y.useTracking)(),{formatMessage:h}=(0,Q.useIntl)(),u=(0,Ae.useQueryClient)();(0,y.useFocusWhenNavigate)();const P=(0,y.useAppInfos)(),{shouldUpdateStrapi:L,latestStrapiReleaseTag:A,strapiVersion:C}=P,{updateProjectSettings:D}=(0,_.um)(),{data:Ce}=(0,Ae.useQuery)("project-settings",ao),le=P.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee",_e=(0,Ae.useMutation)(rt=>sn(rt),{onSuccess(rt){return An(this,arguments,function*({menuLogo:et}){yield u.invalidateQueries("project-settings",{refetchActive:!0}),D({menuLogo:et==null?void 0:et.url})})}}),vt=()=>{const rt=m.current.getValues(),et=Tn(rt);_e.mutate(et,{onSuccess(){const{menuLogo:ct}=rt;ct.rawFile&&l("didChangeLogo")},onError(){c({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}})};return e.createElement(oe.A,null,e.createElement(y.SettingsPageTitle,{name:"Application"}),e.createElement(V.o,null,e.createElement(Re.T,{title:h({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:h({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:e.createElement(K.z,{onClick:vt,startIcon:e.createElement(x.Z,null)},h({id:"global.save",defaultMessage:"Save"}))}),e.createElement(He.D,null,e.createElement(Oe.K,{spacing:6},e.createElement(R.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(Oe.K,{spacing:5},e.createElement(Y.Z,{variant:"delta",as:"h3"},h({id:"global.details",defaultMessage:"Details"})),e.createElement(T.r,{paddingTop:1},e.createElement(Be.P,{col:6,s:12},e.createElement(Y.Z,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(Y.Z,{as:"p"},"v",C),e.createElement(ze.r,{href:P.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:e.createElement(re.default,null)},h({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(Be.P,{col:6,s:12},e.createElement(Y.Z,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(Y.Z,{as:"p"},h({id:le,defaultMessage:`${P.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(T.r,{paddingTop:1},e.createElement(Be.P,{col:6,s:12},L&&e.createElement(ze.r,{href:`https://github.com/strapi/strapi/releases/tag/${A}`,isExternal:!0,endIcon:e.createElement(re.default,null)},h({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(Be.P,{col:6,s:12},e.createElement(ze.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(re.default,null)},h({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(R.x,{paddingTop:1},e.createElement(Y.Z,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(Y.Z,{as:"p"},P.nodeVersion)))),Ce&&e.createElement(y.CheckPermissions,{permissions:rn},e.createElement(Yt,{ref:m,projectSettingsStored:Ce}))))))};var ln=o(94654),On=o.n(ln);const lo=m=>On()(m,l=>l.links).map(l=>(0,Te.ot)(l.Component,l.to,l.exact||!1)),Dn=m=>m.filter(c=>!c.links.every(l=>l.isDisplayed===!1));var cn=o(42982),qe=o(15861),Mn=o(64687),ge=o.n(Mn),xt=function(){return window&&window.strapi&&window.strapi.isEE?o(26789).Z:o(73871).Z}(),Ln=function(){return window&&window.strapi&&window.strapi.isEE?o(64527).Z:o(85302).Z}(),xn=[{Component:function(){return{default:Ln}},to:"/settings/roles",exact:!0},{Component:function(){return{default:xt}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:xt}},to:"/settings/roles/new",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(2544).then(o.bind(o,92100));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/roles/:id",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(5199).then(o.bind(o,46903));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/users",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(4263).then(o.bind(o,22282));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/users/:id",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(5162).then(o.bind(o,3672));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks/create",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(5162).then(o.bind(o,9311));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks/:id",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(4121).then(o.bind(o,11199));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.e(8056).then(o.bind(o,8421));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([o.e(4225),o.e(7375),o.e(4299)]).then(o.bind(o,9683));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens/create",exact:!0},{Component:function(){return(0,qe.Z)(ge().mark(function c(){var l;return ge().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([o.e(4225),o.e(7375),o.e(92)]).then(o.bind(o,28465));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens/:id",exact:!0}];const In=xn;var It=function(){return window&&window.strapi&&window.strapi.isEE?o(5420).Z:o(35301).Z}();const Fn=[].concat((0,cn.Z)(It),(0,cn.Z)(In));var dn=o(53192),un=o(38702),wn=o(34446),Bn=o(29489),jn=o(52305),Nn=Object.defineProperty,Zn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,pn=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,gn=(m,c,l)=>c in m?Nn(m,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[c]=l,Ft=(m,c)=>{for(var l in c||(c={}))$n.call(c,l)&&gn(m,l,c[l]);if(pn)for(var l of pn(c))uo.call(c,l)&&gn(m,l,c[l]);return m},wt=(m,c)=>Zn(m,mn(c));const fn=({menu:m})=>{const{formatMessage:c}=(0,Q.useIntl)(),h=Dn(m).map(P=>wt(Ft({},P),{title:P.intlLabel,links:P.links.map(L=>wt(Ft({},L),{title:L.intlLabel,name:L.id}))})),u=c({id:"global.settings",defaultMessage:"Settings"});return e.createElement(dn.m,{ariaLabel:u},e.createElement(un.p,{label:u}),e.createElement(wn.Z,null,h.map(P=>e.createElement(Bn.D,{key:P.id,label:c(P.intlLabel)},P.links.map(L=>e.createElement(jn.E,{as:r.NavLink,withBullet:L.hasNotification,to:L.to,key:L.id},c(L.intlLabel)))))))};fn.propTypes={menu:f().array.isRequired};const Bt=fn;function hn(){const{settingId:m}=(0,r.useParams)(),{settings:c}=(0,y.useStrapiApp)(),{formatMessage:l}=(0,Q.useIntl)(),{isLoading:h,menu:u}=(0,_.Te)(),P=(0,e.useMemo)(()=>(0,Te.WW)(Fn.map(({to:C,Component:D,exact:Ce})=>(0,Te.ot)(D,C,Ce))),[]),L=lo(c);if(h)return e.createElement(y.LoadingIndicatorPage,null);if(!m)return e.createElement(r.Redirect,{to:"/settings/application-infos"});const A=l({id:"global.settings",defaultMessage:"Settings"});return e.createElement(oe.A,{sideNav:e.createElement(Bt,{menu:u})},e.createElement(We.Helmet,{title:A}),e.createElement(r.Switch,null,e.createElement(r.Route,{path:"/settings/application-infos",component:Rn,exact:!0}),P,L))}const Wn=(0,e.memo)(hn)},73871:(ce,O,o)=>{o.d(O,{Z:()=>oe});var e=o(67294),y=o(49656);const oe=()=>e.createElement(y.Redirect,{to:"/404"})},79578:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!0},35820:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!0},53558:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!0},56195:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!0},99047:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!0},28834:(ce,O,o)=>{o.d(O,{Z:()=>rs});var e=o(67294),y=o(45697),r=o.n(y),oe=o(68547),Q=o(82777),We=o(60633),_=o(42761),Te=o(18721),Ae=o.n(Te),Re=o(41609),He=o.n(Re),V=o(97132),R=o(35961),T=o(71893),Be=o(89734),Y=o.n(Be),Oe=o(70885),K=o(66942),ze=o(52337),re=o(41451),x=o(46273),ae=o(27361),f=o.n(ae),tt=o(57557),Xe=o.n(tt),be=o(61931),je=o(78114),Ne=o(29728);const Ue=T.default.div`
  position: relative;

  ${({hasConditions:a,disabled:t,theme:n})=>a&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${t?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,Ze=({onClick:a,className:t,hasConditions:n,variant:s})=>{const{formatMessage:i}=(0,V.useIntl)();return e.createElement(Ue,{hasConditions:n,className:t},e.createElement(Ne.z,{variant:s,startIcon:e.createElement(je.Z,null),onClick:a},i({id:"global.settings",defaultMessage:"Settings"})))};Ze.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Ze.propTypes={onClick:r().func.isRequired,className:r().string,hasConditions:r().bool,variant:r().string};const Qe=(0,T.default)(Ze)``;var ut=o(42866),it=o(24969),ot=o(59946),lt=o(36856),ne=o(2407),ue=o(72735),Ve=o(60612),ee=o(7739),$=o.n(ee),k=o(11700),I=o.n(k),H=o(38953),W=Object.defineProperty,X=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,G=(a,t,n)=>t in a?W(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,pe=(a,t)=>{for(var n in t||(t={}))me.call(t,n)&&G(a,n,t[n]);if(X)for(var n of X(t))De.call(t,n)&&G(a,n,t[n]);return a};const Ye=a=>Object.values(a).map(t=>Object.entries(t).filter(([,n])=>n).map(([n])=>n)).flat(),Ge=a=>a.reduce((t,[n,s])=>(t.push({label:I()(n),children:s.map(i=>({label:i.displayName,value:i.id}))}),t),[]),F=(a,t)=>a.map(([,n])=>n).flat().reduce((n,s)=>pe({[s.id]:t.includes(s.id)},n),{});var ie=function(){return window&&window.strapi&&window.strapi.isEE?o(53273).Z:o(79578).Z}(),Z=function(t){var n=t.arrayOfOptionsGroupedByCategory,s=t.isFormDisabled,i=t.isGrey,d=t.label,p=t.name,g=t.onChange,E=t.value,b=(0,V.useIntl)(),S=b.formatMessage,M=function(z){g(p,F(n,z))};return e.createElement(x.k,{as:"li",background:i?"neutral100":"neutral0",paddingBottom:3,paddingTop:3},e.createElement(x.k,{paddingLeft:6,style:{width:180}},e.createElement(ue.Z,{variant:"sigma",textColor:"neutral600"},S({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(ue.Z,{variant:"sigma",title:d,textColor:"primary600",ellipsis:!0},S({id:"Settings.roles.form.permissions.".concat(d.toLowerCase()),defaultMessage:d})),e.createElement(ue.Z,{variant:"sigma",textColor:"neutral600"},"\xA0",S({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(R.x,{style:{maxWidth:430,width:"100%"}},e.createElement(H.Q,{id:p,customizeContent:function(z){return"".concat(z.length," currently selected")},onChange:M,value:Ye(E),options:Ge(n),disabled:s||ie})))};Z.propTypes={arrayOfOptionsGroupedByCategory:r().array.isRequired,isFormDisabled:r().bool.isRequired,isGrey:r().bool.isRequired,label:r().string.isRequired,name:r().string.isRequired,value:r().object.isRequired,onChange:r().func.isRequired};const te=Z;var v=o(96486);const ve=(a,t)=>a.reduce((n,s)=>(n[s.id]=(0,v.get)(t,s.id,!1),n),{}),de=(a,t)=>a.reduce((n,s)=>{const[i,d]=s,p=ve(d,t);return n[i]=p,n},{}),at=(a,t,n)=>a.reduce((s,i)=>{const d=(0,v.get)(t,[...i.pathToConditionsObject,"conditions"],{}),p=de(n,d);return s[i.pathToConditionsObject.join("..")]=p,s},{});var ye=Object.defineProperty,J=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,Nt=(a,t,n)=>t in a?ye(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,Zt=(a,t)=>{for(var n in t||(t={}))xe.call(t,n)&&Nt(a,n,t[n]);if(J)for(var n of J(t))pt.call(t,n)&&Nt(a,n,t[n]);return a};const $t=({actions:a,headerBreadCrumbs:t,isFormDisabled:n,onClosed:s,onToggle:i})=>{const{formatMessage:d}=(0,V.useIntl)(),{availableConditions:p,modifiedData:g,onChangeConditions:E}=(0,be.$_)(),b=(0,e.useMemo)(()=>Object.entries($()(p,"category")),[p]),S=a.filter(({isDisplayed:w,hasSomeActionsSelected:N,hasAllActionsSelected:q})=>w&&(N||q)),M=(0,e.useMemo)(()=>at(S,g,b),[S,g,b]),[B,z]=(0,e.useState)(M),j=(w,N)=>{z((0,Ve.default)(q=>{q[w]||(q[w]={}),q[w].default||(q[w].default={}),q[w].default=N}))},U=()=>{const w=Object.entries(B).reduce((N,q)=>{const[fe,Ke]=q,Me=Object.values(Ke).reduce((Se,Ie)=>Zt(Zt({},Se),Ie),{});return N[fe]=Me,N},{});E(w),i()};return e.createElement(ut.P,{labelledBy:"condition-modal-breadcrumbs",onClose:s},e.createElement(it.x,null,e.createElement(ne.O,{id:"condition-modal-breadcrumbs",label:t.join(", ")},t.map(w=>e.createElement(ne.$,{key:w},I()(d({id:w,defaultMessage:w})))))),e.createElement(ot.f,null,S.length===0&&e.createElement(ue.Z,null,d({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,S.map(({actionId:w,label:N,pathToConditionsObject:q},fe)=>{const Ke=q.join("..");return e.createElement(te,{key:w,arrayOfOptionsGroupedByCategory:b,label:N,isFormDisabled:n,isGrey:fe%2===0,name:Ke,onChange:j,value:f()(B,Ke,{})})}))),e.createElement(lt.m,{startActions:e.createElement(Ne.z,{variant:"tertiary",onClick:i},d({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(Ne.z,{onClick:U},d({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};$t.propTypes={actions:r().arrayOf(r().shape({actionId:r().string.isRequired,checkboxName:r().string,hasSomeActionsSelected:r().bool.isRequired,hasAllActionsSelected:r().bool,isDisplayed:r().bool.isRequired,label:r().string})).isRequired,headerBreadCrumbs:r().arrayOf(r().string).isRequired,isFormDisabled:r().bool.isRequired,onClosed:r().func.isRequired,onToggle:r().func.isRequired};const Wt=$t,gt=`${120/16}rem`,At=`${200/16}rem`,Et=`${53/16}rem`,Rt=T.default.div`
  width: ${gt};
`,Vt=(0,T.default)(x.k)`
  padding-right: ${({theme:a})=>a.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:a})=>a&&"cursor: pointer;"}
`;var yn=Object.defineProperty,kt=Object.getOwnPropertySymbols,Cn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,Gt=(a,t,n)=>t in a?yn(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,Kt=(a,t)=>{for(var n in t||(t={}))Cn.call(t,n)&&Gt(a,n,t[n]);if(kt)for(var n of kt(t))En.call(t,n)&&Gt(a,n,t[n]);return a};const Ot=({children:a,isCollapsable:t,isActive:n,isFormDisabled:s,label:i,onChange:d,onClick:p,checkboxName:g,someChecked:E,value:b})=>{const{formatMessage:S}=(0,V.useIntl)();return e.createElement(x.k,{alignItems:"center",paddingLeft:6,style:{width:At,flexShrink:0}},e.createElement(R.x,{paddingRight:2},e.createElement(re.C,{name:g,"aria-label":S({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:s,onValueChange:M=>d({target:{name:g,value:M}}),indeterminate:E,value:b})),e.createElement(Vt,Kt({title:i,alignItems:"center",isCollapsable:t},t&&{onClick:p,"aria-expanded":n,onKeyDown:({key:M})=>(M==="Enter"||M===" ")&&p(),tabIndex:0,role:"button"}),e.createElement(ue.Z,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},I()(i)),a))};Ot.defaultProps={children:null,checkboxName:"",onChange(){},value:!1,someChecked:!1,isCollapsable:!1},Ot.propTypes={checkboxName:r().string,children:r().node,label:r().string.isRequired,isCollapsable:r().bool,isFormDisabled:r().bool.isRequired,onChange:r().func,onClick:r().func.isRequired,someChecked:r().bool,value:r().bool,isActive:r().bool.isRequired};const Dt=(0,e.memo)(Ot),Ht=a=>(0,v.isObject)(a)?(0,v.flattenDeep)(Object.values(a).map(t=>(0,v.isObject)(t)?Ht(t):t)):[],st=Ht,Xt=a=>a?Object.keys(a).reduce((t,n)=>(n!=="conditions"&&(t[n]=a[n]),t),{}):null,nt=a=>{const t=Xt(a),n=st(t);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const s=n.every(d=>d),i=n.some(d=>d)&&!s;return{hasAllActionsSelected:s,hasSomeActionsSelected:i}},Mt=(a,t,n)=>a.map(({actionId:s,isDisplayed:i,applyToProperties:d,label:p})=>{if(!i)return{actionId:s,hasSomeActionsSelected:!1,isDisplayed:i};const g=[...n.split(".."),s],E=(0,v.isEmpty)(d)?[...g,"properties","enabled"]:g,b=E.join(".."),S=(0,v.get)(t,[...g,"conditions"],null),M=st(S).some(U=>U);if((0,v.isEmpty)(d)){const U=(0,v.get)(t,E,!1);return{actionId:s,checkboxName:b,hasAllActionsSelected:U,hasConditions:M,hasSomeActionsSelected:U,isDisplayed:i,isParentCheckbox:!1,label:p,pathToConditionsObject:g}}const B=(0,v.get)(t,E,null),{hasAllActionsSelected:z,hasSomeActionsSelected:j}=nt(B);return{actionId:s,checkboxName:b,hasAllActionsSelected:z,hasConditions:M,hasSomeActionsSelected:j,isDisplayed:i,isParentCheckbox:!0,label:p,pathToConditionsObject:g}});var _n=o(12645);const ft=(0,T.default)(_n.default)`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:a})=>a?"180":"0"}deg);
  margin-left: ${({theme:a})=>a.spaces[2]};
`,bt=a=>`
  ${ue.Z} {
    color: ${a.colors.primary600};
    font-weight: ${a.fontWeights.bold}
  }
  ${ft} {
    display: block;
    path {
      fill: ${a.colors.primary600}
    };
  }
`;var Qt=function(){return window&&window.strapi&&window.strapi.isEE?o(20591).Z:o(56195).Z}(),St=function a(t,n){return`
  `.concat(Yt,` {
    background-color: `).concat(t.colors.primary100,`;
    color: `).concat(t.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(_t,` {
    display: flex;
  }
  `).concat(Qe,` {
    display: block;
  }
  &:hover {
   `).concat(bt(t),`
  }

  &:focus-within {
    `).concat(function(s){var i=s.theme,d=s.isActive;return a(i,d)},`
  }
  
`)},Yt=T.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],Et,function(a){var t=a.isGrey,n=a.theme;return t?n.colors.neutral100:n.colors.neutral0}),Jt=T.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],Qe,function(a){var t=a.isActive,n=a.theme;return t&&St(n,t)},function(a){var t=a.theme,n=a.isActive;return St(t,n)}),qt=(0,T.default)(x.k).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],gt),_t=(0,T.default)(R.x).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(a){var t=a.theme;return t.colors.primary600}),en=T.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(a){var t=a.theme;return t.colors.primary600}),bn=(0,T.default)(R.x).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),tn=function(t){var n=t.availableActions,s=t.isActive,i=t.isGrey,d=t.isFormDisabled,p=t.label,g=t.onClickToggle,E=t.pathToData,b=(0,e.useState)(!1),S=(0,Oe.Z)(b,2),M=S[0],B=S[1],z=(0,V.useIntl)(),j=z.formatMessage,U=(0,be.$_)(),w=U.modifiedData,N=U.onChangeParentCheckbox,q=U.onChangeSimpleCheckbox,fe=function(){B(function(Ee){return!Ee})},Ke=function(){B(!1)},Me=f()(w,E.split(".."),{}),Se=(0,e.useMemo)(function(){return Object.keys(Me).reduce(function(se,Ee){return se[Ee]=Xe()(Me[Ee],"conditions"),se},{})},[Me]),Ie=nt(Se),Le=Ie.hasAllActionsSelected,yt=Ie.hasSomeActionsSelected,he=(0,e.useMemo)(function(){return Mt(n,w,E)},[n,w,E]),Fe=he.some(function(se){var Ee=se.hasConditions;return Ee});return e.createElement(Jt,{isActive:s},e.createElement(Yt,{isGrey:i},e.createElement(Dt,{isCollapsable:!0,isFormDisabled:d,label:p,checkboxName:E,onChange:N,onClick:g,someChecked:yt,value:Le,isActive:s},e.createElement(_t,{paddingLeft:2},s?e.createElement(ze.Z,null):e.createElement(K.Z,null))),e.createElement(x.k,{style:{flex:1}},he.map(function(se){var Ee=se.actionId,Pe=se.hasConditions,we=se.hasAllActionsSelected,$e=se.hasSomeActionsSelected,mt=se.isDisplayed,ke=se.isParentCheckbox,dt=se.checkboxName,Pt=se.label;return mt?ke?e.createElement(qt,{key:Ee,justifyContent:"center",alignItems:"center"},Pe&&e.createElement(en,null),e.createElement(re.C,{disabled:d||Qt,name:dt,"aria-label":j({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(Pt," ").concat(p)}),onValueChange:function(Ct){N({target:{name:dt,value:Ct}})},indeterminate:$e,value:we})):e.createElement(qt,{key:Ee,justifyContent:"center",alignItems:"center"},Pe&&e.createElement(en,null),e.createElement(re.C,{disabled:d||Qt,indeterminate:Pe,name:dt,onValueChange:function(Ct){q({target:{name:dt,value:Ct}})},value:we})):e.createElement(Rt,{key:Ee})})),M&&e.createElement(Wt,{headerBreadCrumbs:[p,"Settings.permissions.conditions.conditions"],actions:he,isFormDisabled:d,onClosed:Ke,onToggle:fe})),e.createElement(bn,null,e.createElement(Qe,{onClick:fe,hasConditions:Fe})))};tn.propTypes={availableActions:r().array.isRequired,isActive:r().bool.isRequired,isGrey:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggle:r().func.isRequired,pathToData:r().string.isRequired};const nn=tn,Sn=(a,t)=>a.map(n=>{const s=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(t)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:s}}),Lt=(0,T.default)(x.k)`
  width: ${gt};
  flex-shrink: 0;
`,Pn=(0,T.default)(x.k)`
  width: ${At};
  height: ${Et};
  flex-shrink: 0;
`,on=({headers:a,label:t})=>{const{formatMessage:n}=(0,V.useIntl)(),s=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:t});return e.createElement(x.k,null,e.createElement(Pn,{alignItems:"center",paddingLeft:6},e.createElement(ue.Z,{variant:"sigma",textColor:"neutral500"},s)),a.map(i=>i.isActionRelatedToCurrentProperty?e.createElement(Lt,{justifyContent:"center",key:i.label},e.createElement(ue.Z,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):e.createElement(Lt,{key:i.label})))};on.propTypes={headers:r().arrayOf(r().shape({label:r().string.isRequired,isActionRelatedToCurrentProperty:r().bool.isRequired})).isRequired,label:r().string.isRequired};const oo=on;var ht=o(42982);const an=T.default.span`
  color: ${({theme:a})=>a.colors.danger700};
  padding-left: ${({theme:a})=>a.spaces[1]}px;
`,sn=()=>e.createElement(an,null,"*");var so=Object.defineProperty,Tn=Object.defineProperties,An=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,ln=(a,t,n)=>t in a?so(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,On=(a,t)=>{for(var n in t||(t={}))ro.call(t,n)&&ln(a,n,t[n]);if(rn)for(var n of rn(t))Rn.call(t,n)&&ln(a,n,t[n]);return a},io=(a,t)=>Tn(a,An(t));const co=(a,t)=>a.map(n=>{const s=Array.isArray(n.subjects)&&n.subjects.indexOf(t)!==-1;return io(On({},n),{isDisplayed:s})});var Dn=o(87462),cn=Object.defineProperty,qe=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,xt=(a,t,n)=>t in a?cn(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,Ln=(a,t)=>{for(var n in t||(t={}))Mn.call(t,n)&&xt(a,n,t[n]);if(qe)for(var n of qe(t))ge.call(t,n)&&xt(a,n,t[n]);return a};const xn=(0,T.default)(R.x)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:a})=>a.colors.primary200};
    display: block;
  }
`,In=T.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:a,color:t})=>a.colors[t]};
  }
`,It=a=>e.createElement(xn,null,e.createElement(In,Ln({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));It.defaultProps={fill:"primary200"},It.propTypes={fill:r().string};const Fn=(0,e.memo)(It);var dn=function(){return window&&window.strapi&&window.strapi.isEE?o(76766).Z:o(53558).Z}(),un=(0,T.default)(x.k).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],gt),wn=(0,T.default)(x.k).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],Et),Bn=(0,T.default)(R.x).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),jn=(0,T.default)(R.x).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(a){var t=a.isVisible,n=a.theme;return t?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),Nn=(0,T.default)(x.k).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(a){var t=a.theme;return t.spaces[4]},function(a){var t=a.level;return 145-t*36},function(a){var t=a.isCollapsable,n=a.theme;return t&&`
      `.concat(ft,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(bt(n),`
      }
  `)},function(a){var t=a.isActive,n=a.theme;return t&&bt(n)}),Zn=T.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(a){var t=a.theme;return t.spaces[2]},function(a){var t=a.theme;return t.spaces[2]},4/16,function(a){var t=a.theme;return t.colors.primary200}),mn=function a(t){var n=t.childrenForm,s=t.isFormDisabled,i=t.recursiveLevel,d=t.pathToDataFromActionRow,p=t.propertyActions,g=t.parentName,E=t.propertyName,b=(0,V.useIntl)(),S=b.formatMessage,M=(0,be.$_)(),B=M.modifiedData,z=M.onChangeParentCheckbox,j=M.onChangeSimpleCheckbox,U=(0,e.useState)(null),w=(0,Oe.Z)(U,2),N=w[0],q=w[1],fe=function(Se){q(function(Ie){return Ie===Se?null:Se})},Ke=(0,e.useMemo)(function(){return N?n.find(function(Me){var Se=Me.value;return Se===N}):null},[N,n]);return e.createElement(Bn,null,e.createElement(Zn,null),n.map(function(Me,Se){var Ie=Me.label,Le=Me.value,yt=Me.required,he=Me.children,Fe=Se+1<n.length,se=Array.isArray(he),Ee=N===Le;return e.createElement(jn,{key:Le,isVisible:Fe},e.createElement(wn,null,e.createElement(Fn,{color:"primary200"}),e.createElement(x.k,{style:{flex:1}},e.createElement(Nn,{level:i,isActive:Ee,isCollapsable:se},e.createElement(Vt,(0,Dn.Z)({alignItems:"center",isCollapsable:se},se&&{onClick:function(){return fe(Le)},"aria-expanded":Ee,onKeyDown:function(we){var $e=we.key;return($e==="Enter"||$e===" ")&&fe(Le)},tabIndex:0,role:"button"},{title:Ie}),e.createElement(ue.Z,{ellipsis:!0},I()(Ie)),yt&&e.createElement(sn,null),e.createElement(ft,{$isActive:Ee}))),e.createElement(x.k,{style:{flex:1}},p.map(function(Pe){var we=Pe.actionId,$e=Pe.label,mt=Pe.isActionRelatedToCurrentProperty;if(!mt)return e.createElement(Rt,{key:we});var ke=[].concat((0,ht.Z)(d.split("..")),[we,"properties",E],(0,ht.Z)(g.split("..")),[Le]),dt=f()(B,ke,!1);if(!he)return e.createElement(un,{key:$e,justifyContent:"center",alignItems:"center"},e.createElement(re.C,{disabled:s||dn,name:ke.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Ie," ").concat($e)}),onValueChange:function(jt){j({target:{name:ke.join(".."),value:jt}})},value:dt}));var Pt=nt(dt),Tt=Pt.hasAllActionsSelected,Ct=Pt.hasSomeActionsSelected;return e.createElement(un,{key:$e,justifyContent:"center",alignItems:"center"},e.createElement(re.C,{key:$e,disabled:s||dn,name:ke.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Ie," ").concat($e)}),onValueChange:function(jt){z({target:{name:ke.join(".."),value:jt}})},value:Tt,indeterminate:Ct}))})))),Ke&&Ee&&e.createElement(R.x,{paddingBottom:2},e.createElement(a,{isFormDisabled:s,parentName:"".concat(g,"..").concat(Le),pathToDataFromActionRow:d,propertyActions:p,propertyName:E,recursiveLevel:i+1,childrenForm:Ke.children})))}))};mn.propTypes={childrenForm:r().array.isRequired,isFormDisabled:r().bool.isRequired,parentName:r().string.isRequired,pathToDataFromActionRow:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,recursiveLevel:r().number.isRequired};const pn=(0,e.memo)(mn),$n=a=>a.reduce((n,s)=>(s.isActionRelatedToCurrentProperty&&n.push(s.actionId),n),[]),gn=(a,t,n,s,i)=>{const p=$n(a).reduce((g,E)=>{const b=[...n.split(".."),E,"properties",s,i],S=(0,v.get)(t,b,!1);return g[E]=S,g},{});return nt(p)};var Ft=function(){return window&&window.strapi&&window.strapi.isEE?o(74512).Z:o(35820).Z}(),wt=(0,T.default)(x.k).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],gt),fn=(0,T.default)(x.k).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],Et,function(a){var t=a.isCollapsable,n=a.theme;return t&&`
      `.concat(ft,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(bt(n),`
      }
  `)},function(a){var t=a.isActive,n=a.theme;return t&&bt(n)}),Bt=function(t){var n=t.childrenForm,s=t.label,i=t.isFormDisabled,d=t.name,p=t.required,g=t.pathToData,E=t.propertyActions,b=t.propertyName,S=t.isOdd,M=(0,V.useIntl)(),B=M.formatMessage,z=(0,e.useState)(null),j=(0,Oe.Z)(z,2),U=j[0],w=j[1],N=(0,be.$_)(),q=N.modifiedData,fe=N.onChangeCollectionTypeLeftActionRowCheckbox,Ke=N.onChangeParentCheckbox,Me=N.onChangeSimpleCheckbox,Se=U===d,Ie=(0,e.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),Le=Ie.length>0,yt=(0,e.useCallback)(function(){Le&&w(function(Pe){return Pe===d?null:d})},[Le,d]),he=function(we){var $e=we.target.value;fe(g,b,d,$e)},Fe=(0,e.useMemo)(function(){return gn(E,q,g,b,d)},[E,q,g,b,d]),se=Fe.hasAllActionsSelected,Ee=Fe.hasSomeActionsSelected;return e.createElement(e.Fragment,null,e.createElement(fn,{alignItems:"center",isCollapsable:Le,isActive:Se,background:S?"neutral100":"neutral0"},e.createElement(x.k,null,e.createElement(Dt,{onChange:he,onClick:yt,isCollapsable:Le,isFormDisabled:i,label:s,someChecked:Ee,value:se,isActive:Se},p&&e.createElement(sn,null),e.createElement(ft,{$isActive:Se})),e.createElement(x.k,null,E.map(function(Pe){var we=Pe.label,$e=Pe.isActionRelatedToCurrentProperty,mt=Pe.actionId;if(!$e)return e.createElement(Rt,{key:we});var ke=[].concat((0,ht.Z)(g.split("..")),[mt,"properties",b,d]);if(!Le){var dt=f()(q,ke,!1);return e.createElement(wt,{key:mt,justifyContent:"center",alignItems:"center"},e.createElement(re.C,{disabled:i||Ft,name:ke.join(".."),"aria-label":B({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(we)}),onValueChange:function(Yn){Me({target:{name:ke.join(".."),value:Yn}})},value:dt}))}var Pt=f()(q,ke,{}),Tt=nt(Pt),Ct=Tt.hasAllActionsSelected,Qn=Tt.hasSomeActionsSelected;return e.createElement(wt,{key:we,justifyContent:"center",alignItems:"center"},e.createElement(re.C,{disabled:i||Ft,name:ke.join(".."),onValueChange:function(Yn){Ke({target:{name:ke.join(".."),value:Yn}})},"aria-label":B({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(we)}),value:Ct,indeterminate:Qn}))})))),Se&&e.createElement(pn,{childrenForm:Ie,isFormDisabled:i,parentName:d,pathToDataFromActionRow:g,propertyName:b,propertyActions:E,recursiveLevel:0}))};Bt.defaultProps={childrenForm:[],required:!1},Bt.propTypes={childrenForm:r().array,label:r().string.isRequired,isFormDisabled:r().bool.isRequired,name:r().string.isRequired,pathToData:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,required:r().bool,isOdd:r().bool.isRequired};const hn=(0,e.memo)(Bt),Wn=T.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,m=({availableActions:a,childrenForm:t,isFormDisabled:n,label:s,pathToData:i,propertyName:d})=>{const p=(0,e.useMemo)(()=>Sn(a,d),[a,d]);return e.createElement(Wn,null,e.createElement(oo,{label:s,headers:p}),e.createElement(R.x,null,t.map(({children:g,label:E,value:b,required:S},M)=>e.createElement(hn,{childrenForm:g,key:b,label:E,isFormDisabled:n,name:b,required:S,propertyActions:p,pathToData:i,propertyName:d,isOdd:M%2===0}))))};m.propTypes={childrenForm:r().array.isRequired,availableActions:r().array.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,pathToData:r().string.isRequired,propertyName:r().string.isRequired};const c=m,l=T.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:a,isActive:t})=>t&&`border: 1px solid ${a.colors.primary600};`}
`,h=({allActions:a,contentTypeName:t,label:n,index:s,isActive:i,isFormDisabled:d,onClickToggleCollapse:p,pathToData:g,properties:E})=>{const b=(0,e.useCallback)(()=>{p(t)},[t,p]),S=(0,e.useMemo)(()=>co(a,t),[a,t]);return e.createElement(l,{isActive:i},e.createElement(nn,{availableActions:S,isActive:i,isGrey:s%2===0,isFormDisabled:d,label:n,onClickToggle:b,pathToData:g}),i&&E.map(({label:M,value:B,children:z})=>e.createElement(c,{availableActions:S,childrenForm:z,isFormDisabled:d,label:M,pathToData:g,propertyName:B,key:B})))};h.propTypes={allActions:r().array.isRequired,contentTypeName:r().string.isRequired,index:r().number.isRequired,isActive:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggleCollapse:r().func.isRequired,pathToData:r().string.isRequired,properties:r().array.isRequired};const u=h,P=({actions:a,isFormDisabled:t,pathToData:n,subjects:s})=>{const[i,d]=(0,e.useState)(null),p=g=>{d(i===g?null:g)};return s.map(({uid:g,label:E,properties:b},S)=>e.createElement(u,{allActions:a,key:g,contentTypeName:g,label:E,isActive:i===g,isFormDisabled:t,index:S,onClickToggleCollapse:p,pathToData:`${n}..${g}`,properties:b}))};P.defaultProps={actions:[],subjects:[]},P.propTypes={actions:r().array.isRequired,isFormDisabled:r().bool.isRequired,pathToData:r().string.isRequired,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))};const L=(0,e.memo)(P);var A=o(7681);const D=a=>a.filter(({subjects:t})=>t&&t.length);var Ce=Object.defineProperty,le=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,rt=(a,t,n)=>t in a?Ce(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,et=(a,t)=>{for(var n in t||(t={}))_e.call(t,n)&&rt(a,n,t[n]);if(le)for(var n of le(t))vt.call(t,n)&&rt(a,n,t[n]);return a};const ct=a=>a.map(({actionId:t})=>t),Ho=(a,t)=>a.reduce((n,s)=>(Object.keys(t).forEach(i=>{const d=(0,v.get)(t,[i,s],{}),p={[i]:Xt(d)};n[s]?n[s]=et(et({},n[s]),p):n[s]=p}),n),{}),Xo=(a,t)=>{const n=ct(a),s=Ho(n,t);return Object.keys(s).reduce((d,p)=>(d[p]=nt(s[p]),d),{})};var Qo=function(){return window&&window.strapi&&window.strapi.isEE?o(85822).Z:o(99047).Z}(),Yo=(0,T.default)(A.K).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],gt),zn=function(t){var n=t.actions,s=t.isFormDisabled,i=t.kind,d=(0,V.useIntl)(),p=d.formatMessage,g=(0,be.$_)(),E=g.modifiedData,b=g.onChangeCollectionTypeGlobalActionCheckbox,S=(0,e.useMemo)(function(){return D(n)},[n]),M=(0,e.useMemo)(function(){return Xo(S,E[i])},[E,S,i]);return e.createElement(R.x,{paddingBottom:4,paddingTop:6,style:{paddingLeft:At}},e.createElement(A.K,{horizontal:!0,spacing:0},S.map(function(B){var z=B.label,j=B.actionId;return e.createElement(Yo,{key:j,spacing:3},e.createElement(ue.Z,{variant:"sigma",textColor:"neutral500"},p({id:"Settings.roles.form.permissions.".concat(z.toLowerCase()),defaultMessage:z})),e.createElement(re.C,{disabled:s||Qo,onValueChange:function(w){b(i,j,w)},name:j,"aria-label":p({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:p({id:"Settings.roles.form.permissions.".concat(z.toLowerCase()),defaultMessage:z})}),value:f()(M,[j,"hasAllActionsSelected"],!1),indeterminate:f()(M,[j,"hasSomeActionsSelected"],!1)}))})))};zn.defaultProps={actions:[]},zn.propTypes={actions:r().arrayOf(r().shape({label:r().string.isRequired,actionId:r().string.isRequired,subjects:r().array.isRequired})),isFormDisabled:r().bool.isRequired,kind:r().string.isRequired};const Jo=(0,e.memo)(zn),qo=(0,T.default)(R.x)`
  overflow-x: auto;
`,mo=({isFormDisabled:a,kind:t,layout:{actions:n,subjects:s}})=>{const i=Y()([...s],"label");return e.createElement(qo,{background:"neutral0"},e.createElement(Jo,{actions:n,kind:t,isFormDisabled:a}),e.createElement(L,{actions:n,isFormDisabled:a,pathToData:t,subjects:i}))};mo.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().shape({actions:r().array,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))}).isRequired};const po=(0,e.memo)(mo);var _o=o(47713);const go=({children:a,value:t})=>e.createElement(_o.$l.Provider,{value:t},a);go.propTypes={children:r().node.isRequired,value:r().exact({availableConditions:r().array.isRequired,modifiedData:r().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:r().func.isRequired,onChangeConditions:r().func.isRequired,onChangeSimpleCheckbox:r().func.isRequired,onChangeParentCheckbox:r().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:r().func.isRequired}).isRequired};const ea=go;var ta=o(48734),na=o(74756),oa=o(63081),aa=o(11276),sa=o(74571),fo=o(36213),ra=Object.defineProperty,ia=Object.defineProperties,la=Object.getOwnPropertyDescriptors,ho=Object.getOwnPropertySymbols,ca=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,vo=(a,t,n)=>t in a?ra(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,ua=(a,t)=>{for(var n in t||(t={}))ca.call(t,n)&&vo(a,n,t[n]);if(ho)for(var n of ho(t))da.call(t,n)&&vo(a,n,t[n]);return a},ma=(a,t)=>ia(a,la(t));const pa=(a,t,n)=>a.map(s=>{const i=[...n,s.action,"properties","enabled"],d=(0,v.get)(t,i,!1),p=(0,v.get)(t,[...n,s.action,"conditions"],{}),g=st(p).some(E=>E);return ma(ua({},s),{isDisplayed:d,checkboxName:i.join(".."),hasSomeActionsSelected:d,value:d,hasConditions:g,label:s.displayName,actionId:s.action,pathToConditionsObject:[...n,s.action]})}),ga=a=>{const t=Object.entries(a).reduce((s,i)=>{const[d,{conditions:p}]=i;return s[d]=p,s},{});return st(t).some(s=>s)};var Un=function(){return window&&window.strapi&&window.strapi.isEE?o(8629).Z:o(34341).Z}(),fa=T.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(a){var t=a.theme;return t.colors.neutral150}),ha=T.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(a){var t=a.hasConditions,n=a.disabled,s=a.theme;return t&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?s.colors.neutral100:s.colors.primary600,`;
    }
  `)}),yo=function(t){var n=t.categoryName,s=t.isFormDisabled,i=t.subCategoryName,d=t.actions,p=t.pathToData,g=(0,e.useState)(!1),E=(0,Oe.Z)(g,2),b=E[0],S=E[1],M=(0,be.$_)(),B=M.modifiedData,z=M.onChangeParentCheckbox,j=M.onChangeSimpleCheckbox,U=(0,V.useIntl)(),w=U.formatMessage,N=f()(B,p,{}),q=(0,e.useMemo)(function(){return Object.keys(N).reduce(function(he,Fe){return he[Fe]=Xt(N[Fe]),he},{})},[N]),fe=nt(q),Ke=fe.hasAllActionsSelected,Me=fe.hasSomeActionsSelected,Se=function(){S(function(Fe){return!Fe})},Ie=function(){S(!1)},Le=pa(d,B,p),yt=ga(f()(B,(0,ht.Z)(p),{}));return e.createElement(e.Fragment,null,e.createElement(R.x,null,e.createElement(x.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(R.x,{paddingRight:4},e.createElement(ue.Z,{variant:"sigma",textColor:"neutral600"},i)),e.createElement(fa,null),e.createElement(R.x,{paddingLeft:4},e.createElement(fo.X,{name:p.join(".."),disabled:s||Un,onValueChange:function(Fe){z({target:{name:p.join(".."),value:Fe}})},indeterminate:Me,value:Ke},w({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(x.k,{paddingTop:6,paddingBottom:6},e.createElement(aa.r,{gap:2,style:{flex:1}},Le.map(function(he){var Fe=he.checkboxName,se=he.value,Ee=he.action,Pe=he.displayName,we=he.hasConditions;return e.createElement(sa.P,{col:3,key:Ee},e.createElement(ha,{disabled:s||Un,hasConditions:we},e.createElement(fo.X,{name:Fe,disabled:s||Un,onValueChange:function(mt){j({target:{name:Fe,value:mt}})},value:se},Pe)))})),e.createElement(Qe,{hasConditions:yt,onClick:Se}))),b&&e.createElement(Wt,{headerBreadCrumbs:[n,i],actions:Le,isFormDisabled:s,onClosed:Ie,onToggle:Se}))};yo.propTypes={actions:r().array.isRequired,categoryName:r().string.isRequired,isFormDisabled:r().bool.isRequired,subCategoryName:r().string.isRequired,pathToData:r().array.isRequired};const va=yo,Vn=({childrenForm:a,kind:t,name:n,isOpen:s,isFormDisabled:i,isWhite:d,onOpenCategory:p,pathToData:g})=>{const{formatMessage:E}=(0,V.useIntl)(),b=()=>{p(n)},S=(0,e.useMemo)(()=>n.split("::").pop(),[n]);return e.createElement(ta.U,{expanded:s,onToggle:b,id:`accordion-${n}`,variant:d?"primary":"secondary"},e.createElement(na.B,{title:I()(S),description:`${E({id:"Settings.permissions.category"},{category:S})} ${t==="plugins"?"plugin":t}`}),e.createElement(oa.v,null,e.createElement(R.x,{padding:6},a.map(({actions:M,subCategoryName:B,subCategoryId:z})=>e.createElement(va,{key:B,actions:M,categoryName:S,isFormDisabled:i,subCategoryName:B,pathToData:[...g,z]})))))};Vn.defaultProps={},Vn.propTypes={childrenForm:r().array.isRequired,isOpen:r().bool.isRequired,isFormDisabled:r().bool.isRequired,isWhite:r().bool.isRequired,kind:r().string.isRequired,name:r().string.isRequired,onOpenCategory:r().func.isRequired,pathToData:r().array.isRequired};const ya=Vn,Co=({isFormDisabled:a,kind:t,layout:n})=>{const[s,i]=(0,e.useState)(null),d=p=>{i(p===s?null:p)};return e.createElement(R.x,{padding:6,background:"neutral0"},n.map(({category:p,categoryId:g,childrenForm:E},b)=>e.createElement(ya,{key:p,childrenForm:E,kind:t,isFormDisabled:a,isOpen:s===p,isWhite:b%2===1,name:p,onOpenCategory:d,pathToData:[t,g]})))};Co.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().arrayOf(r().shape({category:r().string.isRequired,categoryId:r().string.isRequired,childrenForm:r().arrayOf(r().shape({actions:r().array.isRequired})).isRequired}).isRequired).isRequired};const Eo=Co,bo=(a,t,n)=>a.find(s=>s.action===t&&s.subject===n);var Ca=Object.defineProperty,Ea=Object.defineProperties,ba=Object.getOwnPropertyDescriptors,So=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Po=(a,t,n)=>t in a?Ca(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,To=(a,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&Po(a,n,t[n]);if(So)for(var n of So(t))Pa.call(t,n)&&Po(a,n,t[n]);return a},Ao=(a,t)=>Ea(a,ba(t));const Ro=(a,t=[])=>a.reduce((n,s)=>(n[s.id]=t.indexOf(s.id)!==-1,n),{}),Oo=({children:a},t,n="")=>a.reduce((s,i)=>{if(i.children)return Ao(To({},s),{[i.value]:Oo(i,t,`${n}${i.value}.`)});const d=t.indexOf(`${n}${i.value}`)!==-1;return s[i.value]=d,s},{}),Ta=(a,t,n)=>a.reduce((s,i)=>{const d=t.properties.find(({value:p})=>p===i);if(d){const p=(0,v.get)(n,["properties",d.value],[]),g=Oo(d,p);s.properties[i]=g}return s},{properties:{}}),Aa=(a,t)=>t.reduce((n,s)=>{const i=a.find(({uid:d})=>d===s)||null;return i&&(n[s]=i),n},{}),Do=({subjects:a},t,n,s=[])=>t.reduce((i,d)=>{const p=d.subjects,g=Aa(a,p);if((0,v.isEmpty)(g))return i;const E=Object.keys(g).reduce((b,S)=>{const{actionId:M,applyToProperties:B}=d,U=g[S].properties.map(({value:fe})=>fe).every(fe=>(B||[]).indexOf(fe)===-1),w=bo(s,M,S),N=Ro(n,(0,v.get)(w,"conditions",[]));if((0,v.isEmpty)(B)||U)return(0,v.set)(b,[S,M],{properties:{enabled:w!==void 0},conditions:N}),b;const q=Ta(B,g[S],w);return(0,v.set)(b,[S,M],Ao(To({},q),{conditions:N})),b},{});return(0,v.merge)(i,E)},{}),Ra=(a,t,n)=>a.reduce((s,i)=>{const d=bo(n,i.action,null);return s[i.action]={properties:{enabled:d!==void 0},conditions:Ro(t,(0,v.get)(d,"conditions",[]))},s},{}),Oa=(a,t,n)=>a.reduce((s,i)=>(s[i.subCategoryId]=Ra(i.actions,t,n),s),{}),Mo=(a,t,n=[])=>a.reduce((s,{categoryId:i,childrenForm:d})=>{const p=Oa(d,t,n);return s[i]=p,s},{}),Lo=a=>a.split(" ").join("-"),xo=(a,t)=>(0,v.chain)(a).groupBy(t).map((n,s)=>({category:s,categoryId:Lo(s),childrenForm:(0,v.chain)(n).groupBy("subCategory").map((i,d)=>({subCategoryName:d,subCategoryId:Lo(d),actions:i})).value()})).value(),Da=(a,t)=>{const{conditions:n,sections:{collectionTypes:s,singleTypes:i,plugins:d,settings:p}}=a,g={collectionTypes:s,singleTypes:i,plugins:xo(d,"plugin"),settings:xo(p,"category")},E={collectionTypes:Do(s,s.actions||[],n,t),singleTypes:Do(i,i.actions||[],n,t),plugins:Mo(g.plugins,n,t),settings:Mo(g.settings,n,t)};return{initialData:E,modifiedData:E,layouts:g}};var Ma=Object.defineProperty,La=Object.defineProperties,xa=Object.getOwnPropertyDescriptors,Io=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Fo=(a,t,n)=>t in a?Ma(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,kn=(a,t)=>{for(var n in t||(t={}))Ia.call(t,n)&&Fo(a,n,t[n]);if(Io)for(var n of Io(t))Fa.call(t,n)&&Fo(a,n,t[n]);return a},Gn=(a,t)=>La(a,xa(t));const wo=a=>Object.keys(a).reduce((t,n)=>{const s=a[n];if((0,v.isObject)(s)&&!(0,v.has)(s,"conditions"))return Gn(kn({},t),{[n]:wo(s)});if((0,v.isObject)(s)&&(0,v.has)(s,"conditions")&&!st((0,v.omit)(s,"conditions")).some(d=>d)){const d=Object.keys(s.conditions).reduce((p,g)=>(p[g]=!1,p),{});return Gn(kn({},t),{[n]:Gn(kn({},s),{conditions:d})})}return t[n]=s,t},{}),Kn=wo;var wa=Object.defineProperty,Ba=Object.defineProperties,ja=Object.getOwnPropertyDescriptors,Bo=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable,jo=(a,t,n)=>t in a?wa(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,$a=(a,t)=>{for(var n in t||(t={}))Na.call(t,n)&&jo(a,n,t[n]);if(Bo)for(var n of Bo(t))Za.call(t,n)&&jo(a,n,t[n]);return a},Wa=(a,t)=>Ba(a,ja(t));const No=(a,t)=>Object.keys(a).reduce((n,s)=>{const i=a[s];return s==="conditions"?(n[s]=i,n):(0,v.isObject)(i)?Wa($a({},n),{[s]:No(i,t)}):(n[s]=t,n)},{}),vn=No;var za=Object.defineProperty,Ua=Object.defineProperties,Va=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,ka=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,$o=(a,t,n)=>t in a?za(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,Ka=(a,t)=>{for(var n in t||(t={}))ka.call(t,n)&&$o(a,n,t[n]);if(Zo)for(var n of Zo(t))Ga.call(t,n)&&$o(a,n,t[n]);return a},Ha=(a,t)=>Ua(a,Va(t));const Xa={initialData:{},modifiedData:{},layouts:{}},Qa=(a,t)=>(0,Ve.default)(a,n=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:s,actionId:i,value:d}=t,p=["modifiedData",s];Object.keys((0,v.get)(a,p)).forEach(g=>{const E=(0,v.get)(a,[...p,g,i],void 0);if(E){let b=vn(E,d);if(!d&&b.conditions){const S=vn(b.conditions,!1);b=Ha(Ka({},b),{conditions:S})}(0,v.set)(n,[...p,g,i],b)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:s,propertyName:i,rowName:d,value:p}=t;let g=(0,v.cloneDeep)(a.modifiedData);const E=s.split(".."),b=(0,v.get)(g,E,{});Object.keys(b).forEach(S=>{if((0,v.has)(b[S],`properties.${i}`)){const M=(0,v.get)(b,[S,"properties",i,d]),B=[...E,S,"properties",i,d];if(!(0,v.isObject)(M))(0,v.set)(g,B,p);else{const z=vn(M,p);(0,v.set)(g,B,z)}}}),p||(g=Kn(g)),(0,v.set)(n,"modifiedData",g);break}case"ON_CHANGE_CONDITIONS":{Object.entries(t.conditions).forEach(s=>{const[i,d]=s;(0,v.set)(n,["modifiedData",...i.split(".."),"conditions"],d)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let s=(0,v.cloneDeep)(a.modifiedData);(0,v.set)(s,[...t.keys.split("..")],t.value),t.value||(s=Kn(s)),(0,v.set)(n,"modifiedData",s);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:s,value:i}=t,d=[...s.split("..")];let p=(0,v.cloneDeep)(a.modifiedData);const g=(0,v.get)(p,d,{}),E=vn(g,i);(0,v.set)(p,d,E),i||(p=Kn(p)),(0,v.set)(n,["modifiedData"],p);break}case"RESET_FORM":{n.modifiedData=a.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=a.modifiedData;break}default:return n}}),Hn=a=>Object.entries(a).filter(([,t])=>t).map(([t])=>t),Ya=a=>{const[t,{conditions:n}]=a;return{action:t,subject:null,conditions:Hn(n),properties:{}}},Ja=a=>Object.values(a).reduce((t,n)=>{const s=Object.entries(n).reduce((i,d)=>{const[,{properties:{enabled:p}}]=d;if(!p)return i;const g=Ya(d);return i.push(g),i},[]);return[...t,...s]},[]),Wo=a=>Object.values(a).reduce((t,n)=>{const s=Ja(n);return[...t,...s]},[]),zo=(a,t="")=>Object.entries(a).reduce((n,s)=>{const[i,d]=s;return(0,v.isObject)(d)?[...n,...zo(d,`${t}${i}.`)]:(d&&!(0,v.isObject)(d)&&n.push(`${t}${i}`),n)},[]),qa=(a,t,{conditions:n,properties:s})=>Object.entries(s).reduce((i,d)=>{const[p,g]=d;return i.properties[p]=zo(g),i},{action:a,subject:t,conditions:Hn(n),properties:{}}),_a=(a,t,{conditions:n})=>({action:a,subject:t,properties:{},conditions:Hn(n)}),es=(a,t)=>Object.entries(t).reduce((s,i)=>{const[d,p]=i;if(!st(p).some(b=>b))return s;if(!(0,v.has)(p,"properties.enabled")){const b=qa(d,a,p);return[...s,b]}if(!p.properties.enabled)return s;const E=_a(d,a,p);return s.push(E),s},[]),Uo=a=>Object.entries(a).reduce((n,s)=>{const[i,d]=s,p=es(i,d);return[...n,...p]},[]),ts=a=>{const t=Wo(a.plugins),n=Wo(a.settings),s=Uo(a.collectionTypes),i=Uo(a.singleTypes);return[...t,...n,...s,...i]},ns=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var os=Object.defineProperty,Vo=Object.getOwnPropertySymbols,as=Object.prototype.hasOwnProperty,ss=Object.prototype.propertyIsEnumerable,ko=(a,t,n)=>t in a?os(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,Go=(a,t)=>{for(var n in t||(t={}))as.call(t,n)&&ko(a,n,t[n]);if(Vo)for(var n of Vo(t))ss.call(t,n)&&ko(a,n,t[n]);return a};const Xn=(0,e.forwardRef)(({layout:a,isFormDisabled:t,permissions:n},s)=>{const[{initialData:i,layouts:d,modifiedData:p},g]=(0,e.useReducer)(Qa,Xa,()=>Da(a,n)),{formatMessage:E}=(0,V.useIntl)();(0,e.useImperativeHandle)(s,()=>({getPermissions(){const j=(0,oe.difference)(i.collectionTypes,p.collectionTypes),U=(0,oe.difference)(i.singleTypes,p.singleTypes),w=Go(Go({},j),U);let N;return He()(w)?N=!1:N=Object.values(w).some(q=>Object.values(q).some(fe=>Ae()(fe,"conditions"))),{permissionsToSend:ts(p),didUpdateConditions:N}},resetForm(){g({type:"RESET_FORM"})},setFormAfterSubmit(){g({type:"SET_FORM_AFTER_SUBMIT"})}}));const b=(j,U,w,N)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:j,propertyName:U,rowName:w,value:N})},S=(j,U,w)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:j,actionId:U,value:w})},M=j=>{g({type:"ON_CHANGE_CONDITIONS",conditions:j})},B=(0,e.useCallback)(({target:{name:j,value:U}})=>{g({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:j,value:U})},[]),z=(0,e.useCallback)(({target:{name:j,value:U}})=>{g({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:j,value:U})},[]);return e.createElement(ea,{value:{availableConditions:a.conditions,modifiedData:p,onChangeConditions:M,onChangeSimpleCheckbox:B,onChangeParentCheckbox:z,onChangeCollectionTypeLeftActionRowCheckbox:b,onChangeCollectionTypeGlobalActionCheckbox:S}},e.createElement(Q.v,{id:"tabs",label:E({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement(We.m,null,ns.map(j=>e.createElement(We.O,{key:j.id},E({id:j.labelId,defaultMessage:j.defaultMessage})))),e.createElement(_.n,{style:{position:"relative"}},e.createElement(_.x,null,e.createElement(po,{layout:d.collectionTypes,kind:"collectionTypes",isFormDisabled:t})),e.createElement(_.x,null,e.createElement(po,{layout:d.singleTypes,kind:"singleTypes",isFormDisabled:t})),e.createElement(_.x,null,e.createElement(Eo,{layout:d.plugins,kind:"plugins",isFormDisabled:t})),e.createElement(_.x,null,e.createElement(Eo,{layout:d.settings,kind:"settings",isFormDisabled:t})))))});Xn.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},Xn.propTypes={layout:r().object,isFormDisabled:r().bool.isRequired,permissions:r().array};const rs=(0,e.memo)(Xn)},34341:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!0},67500:(ce,O,o)=>{o.d(O,{Z:()=>e});const e=()=>"todo empty role"},52351:(ce,O,o)=>{o.d(O,{Z:()=>re});var e=o(67294),y=o(45697),r=o.n(y),oe=o(35961),Q=o(46273),We=o(47144),_=o(18374),Te=o(72735),Ae=o(12028),Re=o(68547),He=o.n(Re),V=o(97132),R=Object.defineProperty,T=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,Oe=(x,ae,f)=>ae in x?R(x,ae,{enumerable:!0,configurable:!0,writable:!0,value:f}):x[ae]=f,K=(x,ae)=>{for(var f in ae||(ae={}))Be.call(ae,f)&&Oe(x,f,ae[f]);if(T)for(var f of T(ae))Y.call(ae,f)&&Oe(x,f,ae[f]);return x};const ze=({id:x,name:ae,description:f,usersCount:tt,icons:Xe,rowIndex:be})=>{const{formatMessage:je}=(0,V.useIntl)(),Ne=je({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:tt});return e.createElement(We.Tr,K({"aria-rowindex":be,key:x},(0,Re.onRowClick)({fn:Xe[1].onClick})),e.createElement(_.Td,{maxWidth:(0,Re.pxToRem)(130)},e.createElement(Te.Z,{ellipsis:!0,textColor:"neutral800"},ae)),e.createElement(_.Td,{maxWidth:(0,Re.pxToRem)(250)},e.createElement(Te.Z,{ellipsis:!0,textColor:"neutral800"},f)),e.createElement(_.Td,null,e.createElement(Te.Z,{textColor:"neutral800"},Ne)),e.createElement(_.Td,null,e.createElement(Q.k,K({justifyContent:"flex-end"},Re.stopPropagation),Xe.map((Ue,Ze)=>Ue?e.createElement(oe.x,{key:Ue.label,paddingLeft:Ze===0?0:1},e.createElement(Ae.h,{onClick:Ue.onClick,label:Ue.label,noBorder:!0,icon:Ue.icon})):null))))};ze.propTypes={id:r().number.isRequired,name:r().string.isRequired,description:r().string.isRequired,usersCount:r().number.isRequired,icons:r().array.isRequired,rowIndex:r().number.isRequired};const re=ze},85302:(ce,O,o)=>{o.d(O,{Z:()=>Ge});var e=o(67294),y=o(68547),r=o(87751),oe=o(63852),Q=o(96315),We=o(20022),_=o(4585),Te=o(65186),Ae=o(29728),Re=o(67838),He=o(49066),V=o(11057),R=o(49386),T=o(63985),Be=o(47144),Y=o(18374),Oe=o(550),K=o(72735),ze=o(185),re=o(63237),x=o(97132),ae=o(49656),f=o(52351),tt=o(67500),Xe=o(45697),be=o.n(Xe),je=o(71893),Ne=o(44034),Ue=o(25896),Ze=o(12028),Qe=o(80994),ut=o(35961),it=o(46273),ot=o(7681),lt=o(17772),ne=o(70968);const ue=o.p+"6d21938306785f176538.png",Ve=o.p+"617f9c948fa79e6d73bd.png",ee=je.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:F})=>(0,y.setHexOpacity)(F.colors.neutral800,.2)};
  padding: 0 ${({theme:F})=>F.spaces[8]};
`,$=(0,je.default)(it.k)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,k=(0,je.default)(ot.K)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,I=(0,je.default)(ut.x)`
  position: absolute;
  right: ${({theme:F})=>F.spaces[4]};
  top: ${({theme:F})=>F.spaces[4]};
`,H=({onClose:F,isOpen:ie})=>{(0,y.useLockScroll)(ie);const{formatMessage:Z}=(0,x.useIntl)();return ie?e.createElement(Ne.h,null,e.createElement(ee,{onClick:F},e.createElement(Ue.i,{onEscape:F},e.createElement($,{onClick:te=>te.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:ue,alt:"air-balloon"}),e.createElement(I,null,e.createElement(Ze.h,{onClick:F,"aria-label":"Close",icon:e.createElement(ne.default,null)})),e.createElement(k,{spacing:6},e.createElement(K.Z,{fontWeight:"bold",textColor:"primary600"},Z({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement(ot.K,{spacing:2},e.createElement(K.Z,{variant:"alpha",as:"h2",id:"upgrade-plan"},Z({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(K.Z,null,Z({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(Qe.Q,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(lt.default,null)},Z({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:Ve,alt:"upgrade-arrow"}))))):null};H.propTypes={onClose:be().func.isRequired,isOpen:be().bool.isRequired};const W=H;var X=o(61931);const me=()=>{const{roles:F,isLoading:ie}=(0,X.bF)(),Z=(0,y.useQuery)(),te=decodeURIComponent(Z.get("_q")||""),v=(0,oe.ZP)(F,te,{keys:["name","description"]});return{isLoading:ie,sortedRoles:v}},De=()=>{const{formatMessage:F}=(0,x.useIntl)(),[ie,Z]=(0,e.useState)(!1),{trackUsage:te}=(0,y.useTracking)(),{push:v}=(0,ae.useHistory)(),ve=(0,e.useCallback)(ye=>{v(`/settings/roles/${ye}`)},[v]),de=(0,e.useCallback)(()=>{Z(ye=>!ye)},[]),Je=(0,e.useCallback)(()=>{te("didShowRBACUpgradeModal"),Z(!0)},[te]),at=(0,e.useCallback)(ye=>[{onClick:de,label:F({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(Te.Z,null)},{onClick:()=>ve(ye.id),label:F({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(_.Z,null)},{onClick:de,label:F({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(We.default,null)}],[F,de,ve]);return{isModalOpen:ie,handleToggleModalForCreatingRole:Je,handleToggle:de,getIcons:at}},pe=()=>{const{formatMessage:F}=(0,x.useIntl)();(0,y.useFocusWhenNavigate)();const{sortedRoles:ie,isLoading:Z}=me(),{isModalOpen:te,handleToggle:v,handleToggleModalForCreatingRole:ve,getIcons:de}=De(),Je=ie.length+1,at=5;return e.createElement(ze.o,null,e.createElement(y.SettingsPageTitle,{name:"Roles"}),e.createElement(Re.T,{primaryAction:e.createElement(Ae.z,{onClick:ve,startIcon:e.createElement(Q.default,null),size:"S"},F({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:F({id:"global.roles",defaultMessage:"roles"}),subtitle:F({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(He.D,null,e.createElement(V.i,{colCount:at,rowCount:Je,footer:e.createElement(R.c,{onClick:ve,icon:e.createElement(Q.default,null)},F({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(T.h,null,e.createElement(Be.Tr,null,e.createElement(Y.Th,null,e.createElement(K.Z,{variant:"sigma",textColor:"neutral600"},F({id:"global.name",defaultMessage:"Name"}))),e.createElement(Y.Th,null,e.createElement(K.Z,{variant:"sigma",textColor:"neutral600"},F({id:"global.description",defaultMessage:"Description"}))),e.createElement(Y.Th,null,e.createElement(K.Z,{variant:"sigma",textColor:"neutral600"},F({id:"global.users",defaultMessage:"Users"}))),e.createElement(Y.Th,null,e.createElement(re.T,null,F({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(Oe.p,null,ie==null?void 0:ie.map((ye,J)=>e.createElement(f.Z,{key:ye.id,id:ye.id,name:ye.name,description:ye.description,usersCount:ye.usersCount,icons:de(ye),rowIndex:J+2})))),!Je&&!Z&&e.createElement(tt.Z,null)),e.createElement(W,{isOpen:te,onClose:v}))},Ge=()=>e.createElement(y.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(pe,null))},35301:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=[]},26789:(ce,O,o)=>{o.d(O,{Z:()=>lt});var e=o(67294),y=o(47292),r=o(68547),oe=o(35961),Q=o(29728),We=o(67838),_=o(49066),Te=o(11276),Ae=o(74571),Re=o(185),He=o(46273),V=o(7681),R=o(72735),T=o(16364),Be=o(64256),Y=o(67109),Oe=o(80831),K=o(27361),ze=o.n(K),re=o(41609),x=o.n(re),ae=o(97132),f=o(49656),tt=o(71893),Xe=o(28834),be=o(61931),je=o(87751),Ne=o(53209);const Ze=Ne.Ry().shape({name:Ne.Z_().required(r.translatedErrors.required),description:Ne.Z_().required(r.translatedErrors.required)});var Qe=o(25108),ut=(ne,ue,Ve)=>new Promise((ee,$)=>{var k=W=>{try{H(Ve.next(W))}catch(X){$(X)}},I=W=>{try{H(Ve.throw(W))}catch(X){$(X)}},H=W=>W.done?ee(W.value):Promise.resolve(W.value).then(k,I);H((Ve=Ve.apply(ne,ue)).next())});const it=tt.default.div`
  border: 1px solid ${({theme:ne})=>ne.colors.primary200};
  background: ${({theme:ne})=>ne.colors.primary100};
  padding: ${({theme:ne})=>`${ne.spaces[2]} ${ne.spaces[4]}`};
  color: ${({theme:ne})=>ne.colors.primary600};
  border-radius: ${({theme:ne})=>ne.borderRadius};
  font-size: ${12/16}rem;
  font-weight: bold;
`,ot=()=>{const ne=(0,r.useNotification)(),{lockApp:ue,unlockApp:Ve}=(0,r.useOverlayBlocker)(),{formatMessage:ee}=(0,ae.useIntl)(),[$,k]=(0,e.useState)(!1),{replace:I}=(0,f.useHistory)(),H=(0,e.useRef)(),{trackUsage:W}=(0,r.useTracking)(),X=(0,f.useRouteMatch)("/settings/roles/duplicate/:id"),me=ze()(X,"params.id",null),{isLoading:De,data:G}=(0,be.U_)(),{permissions:pe,isLoading:Ye}=(0,be.Dq)(me),Ge=ie=>{ue(),k(!0),W(me?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,r.request)("/admin/roles",{method:"POST",body:ie})).then(Z=>ut(void 0,null,function*(){const{permissionsToSend:te}=H.current.getPermissions();return W(me?"didDuplicateRole":"didCreateNewRole"),Z.data.id&&!x()(te)&&(yield(0,r.request)(`/admin/roles/${Z.data.id}/permissions`,{method:"PUT",body:{permissions:te}})),Z})).then(Z=>{k(!1),ne({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),I(`/settings/roles/${Z.data.id}`)}).catch(Z=>{Qe.error(Z),k(!1),ne({type:"warning",message:{id:"notification.error"}})}).finally(()=>{Ve()})},F=`${ee({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,y.format)(new Date,"PPP")}`;return e.createElement(Re.o,null,e.createElement(r.SettingsPageTitle,{name:"Roles"}),e.createElement(Oe.Formik,{initialValues:{name:"",description:F},onSubmit:Ge,validationSchema:Ze,validateOnChange:!1},({handleSubmit:ie,values:Z,errors:te,handleReset:v,handleChange:ve})=>e.createElement(r.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(We.T,{primaryAction:e.createElement(V.K,{horizontal:!0,spacing:2},e.createElement(Q.z,{variant:"secondary",onClick:()=>{v(),H.current.resetForm()},size:"L"},ee({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement(Q.z,{onClick:ie,loading:$,size:"L"},ee({id:"global.save",defaultMessage:"Save"}))),title:ee({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:ee({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(r.Link,{startIcon:e.createElement(Y.Z,null),to:"/settings/roles"},ee({id:"global.back",defaultMessage:"Back"}))}),e.createElement(_.D,null,e.createElement(V.K,{spacing:6},e.createElement(oe.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(V.K,{spacing:4},e.createElement(He.k,{justifyContent:"space-between"},e.createElement(oe.x,null,e.createElement(oe.x,null,e.createElement(R.Z,{fontWeight:"bold"},ee({id:"global.details",defaultMessage:"Details"}))),e.createElement(oe.x,null,e.createElement(R.Z,{variant:"pi",textColor:"neutral600"},ee({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement(it,null,ee({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(Te.r,{gap:4},e.createElement(Ae.P,{col:6},e.createElement(T.o,{name:"name",error:te.name&&ee({id:te.name}),label:ee({id:"global.name",defaultMessage:"Name"}),onChange:ve,value:Z.name})),e.createElement(Ae.P,{col:6},e.createElement(Be.g,{label:ee({id:"global.description",defaultMessage:"Description"}),name:"description",error:te.description&&ee({id:te.description}),onChange:ve},Z.description))))),!De&&!Ye?e.createElement(oe.x,{shadow:"filterShadow",hasRadius:!0},e.createElement(Xe.Z,{isFormDisabled:!1,ref:H,permissions:pe,layout:G})):e.createElement(oe.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(r.LoadingIndicatorPage,null))))))))};function lt(){return e.createElement(r.CheckPagePermissions,{permissions:je.Z.settings.roles.create},e.createElement(ot,null))}},53273:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!1},74512:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!1},76766:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!1},20591:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!1},85822:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!1},8629:(ce,O,o)=>{o.d(O,{Z:()=>y});const y=!1},64527:(ce,O,o)=>{o.d(O,{Z:()=>ee});var e=o(67294),y=o(68547),r=o(87751),oe=o(96315),Q=o(20022),We=o(65186),_=o(4585),Te=o(29728),Ae=o(67838),Re=o(36989),He=o(49066),V=o(63237),R=o(185),T=o(11057),Be=o(49386),Y=o(63985),Oe=o(47144),K=o(18374),ze=o(550),re=o(72735),x=o(96486),ae=o(63852),f=o(97132),tt=o(49656),Xe=o(23998),be=o(61931),je=o(67500),Ne=o(52351),Ue=o(60612);const Ze={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},ut=($,k)=>(0,Ue.default)($,I=>{switch(k.type){case"ON_REMOVE_ROLES":{I.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{I.shouldRefetchData=!0,I.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{I.shouldRefetchData=!1,I.roleToDelete=null,I.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{I.roleToDelete=k.id;break}default:return I}});var it=($,k,I)=>new Promise((H,W)=>{var X=G=>{try{De(I.next(G))}catch(pe){W(pe)}},me=G=>{try{De(I.throw(G))}catch(pe){W(pe)}},De=G=>G.done?H(G.value):Promise.resolve(G.value).then(X,me);De((I=I.apply($,k)).next())});const ot=()=>{(0,y.useFocusWhenNavigate)();const{isLoading:$,allowedActions:{canCreate:k,canDelete:I,canRead:H,canUpdate:W}}=(0,y.useRBAC)(r.Z.settings.roles),{getData:X,roles:me,isLoading:De}=(0,be.bF)(!1),[{query:G}]=(0,y.useQueryParams)(),pe=(G==null?void 0:G._q)||"",Ye=(0,ae.ZP)(me,pe,{keys:["name","description"]});return(0,e.useEffect)(()=>{!$&&H&&X()},[$,H,X]),{isLoadingForPermissions:$,canCreate:k,canDelete:I,canRead:H,canUpdate:W,isLoading:De,getData:X,sortedRoles:Ye,roles:me}},lt=({getData:$,canCreate:k,canDelete:I,canUpdate:H})=>{const{formatMessage:W}=(0,f.useIntl)(),X=(0,y.useNotification)(),[me,De]=(0,e.useState)(!1),{push:G}=(0,tt.useHistory)(),[{selectedRoles:pe,showModalConfirmButtonLoading:Ye,roleToDelete:Ge},F]=(0,e.useReducer)(ut,Ze),ie=()=>it(void 0,null,function*(){try{F({type:"ON_REMOVE_ROLES"}),yield Xe.be.post("/admin/roles/batch-delete",{ids:[Ge]}),yield $(),F({type:"RESET_DATA_TO_DELETE"})}catch(J){const xe=(0,x.get)(J,["response","payload","data","ids"],null);if(xe&&Array.isArray(xe)){const pt=xe.join(`
`);X({type:"warning",message:pt})}else X({type:"warning",message:{id:"notification.error"}})}ve()}),Z=(0,e.useCallback)(J=>{G(`/settings/roles/duplicate/${J}`)},[G]),te=()=>G("/settings/roles/new"),v=(0,e.useCallback)(J=>{F({type:"SET_ROLE_TO_DELETE",id:J}),ve()},[]),ve=()=>De(J=>!J),de=(0,e.useCallback)(J=>{G(`/settings/roles/${J}`)},[G]),Je=(0,e.useCallback)((J,xe)=>{J.preventDefault(),J.stopPropagation(),xe.usersCount?X({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):v(xe.id)},[X,v]),at=(0,e.useCallback)((J,xe)=>{J.preventDefault(),J.stopPropagation(),Z(xe.id)},[Z]),ye=(0,e.useCallback)(J=>[...k?[{onClick:xe=>at(xe,J),label:W({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(We.Z,null)}]:[],...H?[{onClick:()=>de(J.id),label:W({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(_.Z,null)}]:[],...I?[{onClick:xe=>Je(xe,J),label:W({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(Q.default,null)}]:[]],[W,Je,at,de,k,H,I]);return{handleNewRoleClick:te,getIcons:ye,selectedRoles:pe,isWarningDeleteAllOpened:me,showModalConfirmButtonLoading:Ye,handleToggleModal:ve,handleDeleteData:ie}},ue=()=>{const{formatMessage:$}=(0,f.useIntl)(),{isLoadingForPermissions:k,canCreate:I,canRead:H,canDelete:W,canUpdate:X,isLoading:me,getData:De,sortedRoles:G}=ot(),{handleNewRoleClick:pe,getIcons:Ye,isWarningDeleteAllOpened:Ge,showModalConfirmButtonLoading:F,handleToggleModal:ie,handleDeleteData:Z}=lt({getData:De,canCreate:I,canDelete:W,canUpdate:X}),te=G.length+1,v=6;if(k)return e.createElement(R.o,null,e.createElement(y.LoadingIndicatorPage,null));const ve=$({id:"global.roles",defaultMessage:"roles"});return e.createElement(R.o,null,e.createElement(y.SettingsPageTitle,{name:"Roles"}),e.createElement(Ae.T,{primaryAction:I?e.createElement(Te.z,{onClick:pe,startIcon:e.createElement(oe.default,null),size:"S"},$({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:ve,subtitle:$({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),H&&e.createElement(Re.Z,{startActions:e.createElement(y.SearchURLQuery,{label:$({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:ve})})}),H&&e.createElement(He.D,null,e.createElement(T.i,{colCount:v,rowCount:te,footer:I?e.createElement(Be.c,{onClick:pe,icon:e.createElement(oe.default,null)},$({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(Y.h,null,e.createElement(Oe.Tr,{"aria-rowindex":1},e.createElement(K.Th,null,e.createElement(re.Z,{variant:"sigma",textColor:"neutral600"},$({id:"global.name",defaultMessage:"Name"}))),e.createElement(K.Th,null,e.createElement(re.Z,{variant:"sigma",textColor:"neutral600"},$({id:"global.description",defaultMessage:"Description"}))),e.createElement(K.Th,null,e.createElement(re.Z,{variant:"sigma",textColor:"neutral600"},$({id:"global.users",defaultMessage:"Users"}))),e.createElement(K.Th,null,e.createElement(V.T,null,$({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(ze.p,null,G==null?void 0:G.map((de,Je)=>e.createElement(Ne.Z,{key:de.id,id:de.id,name:de.name,description:de.description,usersCount:de.usersCount,icons:Ye(de),rowIndex:Je+2})))),!te&&!me&&e.createElement(je.Z,null)),e.createElement(y.ConfirmDialog,{isOpen:Ge,onConfirm:Z,isConfirmButtonLoading:F,onToggleDialog:ie}))},ee=()=>e.createElement(y.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(ue,null))},5420:(ce,O,o)=>{o.d(O,{Z:()=>oe});var e=(Q,We,_)=>new Promise((Te,Ae)=>{var Re=R=>{try{V(_.next(R))}catch(T){Ae(T)}},He=R=>{try{V(_.throw(R))}catch(T){Ae(T)}},V=R=>R.done?Te(R.value):Promise.resolve(R.value).then(Re,He);V((_=_.apply(Q,We)).next())});const oe=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component(){return e(this,null,function*(){return yield o.e(302).then(o.bind(o,29808))})},to:"/settings/single-sign-on",exact:!0}]:[]]}}]);
