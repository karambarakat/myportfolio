"use strict";(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[9514],{87532:(ft,E,t)=>{t.r(E),t.d(E,{default:()=>lt});var s=t(67294),D=t(97132),z=t(18446),B=t.n(z),W=t(45697),d=t.n(W),$=t(17034),j=t(67838),G=t(49066),u=t(68547),C=t(85018),F=t(29728),H=t(67109),V=t(185),x=t(11276),S=t(74571),U=t(35961),O=t(91216),P=t(82562),l=t(15537),M=t(49826);const Z=({sort:n="",pageSize:a=10,onChange:e})=>{const{formatMessage:o}=(0,D.useIntl)();return s.createElement(U.x,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(x.r,{gap:4},s.createElement(S.P,{s:12,col:6},s.createElement(O.P,{label:o({id:(0,l.Z)("config.entries.title"),defaultMessage:"Entries per page"}),hint:o({id:(0,l.Z)("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),onChange:i=>e({target:{name:"pageSize",value:i}}),name:"pageSize",value:a,"test-pageSize":a,"data-testid":"pageSize-select"},M.ay.map(i=>s.createElement(P.W,{"data-testid":`pageSize-option-${i}`,key:i,value:i},i)))),s.createElement(S.P,{s:12,col:6},s.createElement(O.P,{label:o({id:(0,l.Z)("config.sort.title"),defaultMessage:"Default sort order"}),hint:o({id:(0,l.Z)("config.note"),defaultMessage:"Note: You can override this value in the media library."}),onChange:i=>e({target:{name:"sort",value:i}}),name:"sort",value:n,"test-sort":n,"data-testid":"sort-select"},M.Fo.map(i=>s.createElement(P.W,{"data-testid":`sort-option-${i.value}`,key:i.key,value:i.value},o({id:(0,l.Z)(i.key),defaultMessage:`${i.value}`})))))))};Z.propTypes={sort:d().string.isRequired,pageSize:d().number.isRequired,onChange:d().func.isRequired};var Y=t(60612),J=t(36968),K=t.n(J),Q=t(27361),X=t.n(Q),p=t(55994);const L=`${p.Z}/ON_CHANGE`,T=`${p.Z}/SET_LOADED`;var w=Object.defineProperty,k=Object.defineProperties,q=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,N=(n,a,e)=>a in n?w(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,et=(n,a)=>{for(var e in a||(a={}))_.call(a,e)&&N(n,e,a[e]);if(A)for(var e of A(a))tt.call(a,e)&&N(n,e,a[e]);return n},at=(n,a)=>k(n,q(a));const y={initialData:{},modifiedData:{}},I=n=>at(et({},y),{initialData:n,modifiedData:n}),nt=(n=y,a)=>(0,Y.default)(n,e=>{switch(a.type){case L:{K()(e,["modifiedData",...a.keys.split(".")],a.value);break}case T:{const o=I(X()(e,["modifiedData"],{}));e.initialData=o.initialData,e.modifiedData=o.modifiedData;break}default:return e}}),st=({name:n,value:a})=>({type:L,keys:n,value:a}),it=()=>({type:T});var ot=t(60862),rt=(n,a,e)=>new Promise((o,i)=>{var f=r=>{try{g(e.next(r))}catch(c){i(c)}},h=r=>{try{g(e.throw(r))}catch(c){i(c)}},g=r=>r.done?o(r.value):Promise.resolve(r.value).then(f,h);g((e=e.apply(n,a)).next())});const R=({config:n})=>{const{trackUsage:a}=(0,u.useTracking)(),{formatMessage:e}=(0,D.useIntl)(),o=(0,u.useNotification)(),{mutateConfig:i}=(0,ot.Z)(),{isLoading:f}=i,[h,g]=(0,s.useState)(!1),r=()=>g(m=>!m),[c,b]=(0,s.useReducer)(nt,y,()=>I(n)),{initialData:dt,modifiedData:v}=c,ut=m=>{m.preventDefault(),r()},gt=()=>rt(void 0,null,function*(){a("willEditMediaLibraryConfig"),yield i.mutateAsync(v),r(),b(it()),o({type:"success",message:{id:"notification.form.success.fields",defaultMessage:"Changes saved"}})}),ct=({target:{name:m,value:mt}})=>{b(st({name:m,value:mt}))};return(0,u.useFocusWhenNavigate)(),s.createElement($.A,null,s.createElement(V.o,{"aria-busy":f},s.createElement("form",{onSubmit:ut},s.createElement(j.T,{navigationAction:s.createElement(u.Link,{startIcon:s.createElement(H.Z,null),to:`/plugins/${p.Z}`,id:"go-back"},e({id:(0,l.Z)("config.back"),defaultMessage:"Back"})),primaryAction:s.createElement(F.z,{size:"S",startIcon:s.createElement(C.Z,null),disabled:B()(v,dt),type:"submit"},e({id:"global.save",defaultMessage:"Save"})),subtitle:e({id:(0,l.Z)("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:e({id:(0,l.Z)("config.title"),defaultMessage:"Configure the view - Media Library"})}),s.createElement(G.D,null,s.createElement(Z,{"data-testid":"settings",pageSize:v.pageSize||"",sort:v.sort||"",onChange:ct})),s.createElement(u.ConfirmDialog,{bodyText:{id:(0,l.Z)("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:s.createElement(C.Z,null),isConfirmButtonLoading:f,isOpen:h,onToggleDialog:r,onConfirm:gt,variantRightButton:"success-light"}))))};R.propTypes={config:d().shape({pageSize:d().number,sort:d().string}).isRequired};const lt=R}}]);
