(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[994],{33629:(Uc,ut)=>{var p=function(){var r={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(y,oe,ie,be,V,ae,$e){var le=ae.length-1;switch(V){case 1:this.$=y.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(y);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=ae[le-1];case 13:this.$={};break;case 14:this.$=ae[le-1];break;case 15:this.$=[ae[le-2],ae[le]];break;case 16:this.$={},this.$[ae[le][0]]=ae[le][1];break;case 17:this.$=ae[le-2],ae[le-2][ae[le][0]]=ae[le][1];break;case 18:this.$=[];break;case 19:this.$=ae[le-1];break;case 20:this.$=[ae[le]];break;case 21:this.$=ae[le-2],ae[le-2].push(ae[le]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(y,oe){throw new Error(y)},parse:function(y){var oe=this,ie=[0],be=[null],V=[],ae=this.table,$e="",le=0,Zt=0,P=0,ke=2,Se=1;this.lexer.setInput(y),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var s=this.lexer.yylloc;V.push(s),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function To(q){ie.length=ie.length-2*q,be.length=be.length-q,V.length=V.length-q}function Rt(){var q;return q=oe.lexer.lex()||1,typeof q!="number"&&(q=oe.symbols_[q]||q),q}for(var Oe,Ue,we,Me,xn,wt,rt={},Ye,Ne,Le,j;;){we=ie[ie.length-1],this.defaultActions[we]?Me=this.defaultActions[we]:(Oe==null&&(Oe=Rt()),Me=ae[we]&&ae[we][Oe]);e:if(typeof Me=="undefined"||!Me.length||!Me[0]){if(!P){j=[];for(Ye in ae[we])this.terminals_[Ye]&&Ye>2&&j.push("'"+this.terminals_[Ye]+"'");var L="";this.lexer.showPosition?L="Parse error on line "+(le+1)+`:
`+this.lexer.showPosition()+`
Expecting `+j.join(", ")+", got '"+this.terminals_[Oe]+"'":L="Parse error on line "+(le+1)+": Unexpected "+(Oe==1?"end of input":"'"+(this.terminals_[Oe]||Oe)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[Oe]||Oe,line:this.lexer.yylineno,loc:s,expected:j})}if(P==3){if(Oe==Se)throw new Error(L||"Parsing halted.");Zt=this.lexer.yyleng,$e=this.lexer.yytext,le=this.lexer.yylineno,s=this.lexer.yylloc,Oe=Rt()}for(;!(ke.toString()in ae[we]);){if(we==0)throw new Error(L||"Parsing halted.");To(1),we=ie[ie.length-1]}Ue=Oe,Oe=ke,we=ie[ie.length-1],Me=ae[we]&&ae[we][ke],P=3}if(Me[0]instanceof Array&&Me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+Oe);switch(Me[0]){case 1:ie.push(Oe),be.push(this.lexer.yytext),V.push(this.lexer.yylloc),ie.push(Me[1]),Oe=null,Ue?(Oe=Ue,Ue=null):(Zt=this.lexer.yyleng,$e=this.lexer.yytext,le=this.lexer.yylineno,s=this.lexer.yylloc,P>0&&P--);break;case 2:if(Ne=this.productions_[Me[1]][1],rt.$=be[be.length-Ne],rt._$={first_line:V[V.length-(Ne||1)].first_line,last_line:V[V.length-1].last_line,first_column:V[V.length-(Ne||1)].first_column,last_column:V[V.length-1].last_column},wt=this.performAction.call(rt,$e,Zt,le,this.yy,Me[1],be,V),typeof wt!="undefined")return wt;Ne&&(ie=ie.slice(0,-1*Ne*2),be=be.slice(0,-1*Ne),V=V.slice(0,-1*Ne)),ie.push(this.productions_[Me[1]][0]),be.push(rt.$),V.push(rt._$),Le=ae[ie[ie.length-2]][ie[ie.length-1]],ie.push(Le);break;case 3:return!0}}return!0}},dt=function(){var J={EOF:1,parseError:function(oe,ie){if(this.yy.parseError)this.yy.parseError(oe,ie);else throw new Error(oe)},setInput:function(y){return this._input=y,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var y=this._input[0];this.yytext+=y,this.yyleng++,this.match+=y,this.matched+=y;var oe=y.match(/\n/);return oe&&this.yylineno++,this._input=this._input.slice(1),y},unput:function(y){return this._input=y+this._input,this},more:function(){return this._more=!0,this},less:function(y){this._input=this.match.slice(y)+this._input},pastInput:function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var y=this.pastInput(),oe=new Array(y.length+1).join("-");return y+this.upcomingInput()+`
`+oe+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var y,oe,ie,be,V,ae;this._more||(this.yytext="",this.match="");for(var $e=this._currentRules(),le=0;le<$e.length&&(ie=this._input.match(this.rules[$e[le]]),!(ie&&(!oe||ie[0].length>oe[0].length)&&(oe=ie,be=le,!this.options.flex)));le++);if(oe)return ae=oe[0].match(/\n.*/g),ae&&(this.yylineno+=ae.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ae?ae[ae.length-1].length-1:this.yylloc.last_column+oe[0].length},this.yytext+=oe[0],this.match+=oe[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(oe[0].length),this.matched+=oe[0],y=this.performAction.call(this,this.yy,this,$e[be],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var oe=this.next();return typeof oe!="undefined"?oe:this.lex()},begin:function(oe){this.conditionStack.push(oe)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(oe){this.begin(oe)}};return J.options={},J.performAction=function(oe,ie,be,V){var ae=V;switch(be){case 0:break;case 1:return 6;case 2:return ie.yytext=ie.yytext.substr(1,ie.yyleng-2),4;break;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},J.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],J.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},J}();return r.lexer=dt,r}();ut.parser=p,ut.parse=function(){return p.parse.apply(p,arguments)},ut.main=function(dt){if(!dt[1])throw new Error("Usage: "+dt[0]+" FILE")}},552:(Uc,ut,p)=>{"use strict";p.r(ut),p.d(ut,{App:()=>Zc,default:()=>KC});var r=p(67294),dt=p(15482),J=p(49656),y=p(68547),oe=p(67838),ie=p(17034),be=p(185),V=p(97132),ae=p(89734),$e=p.n(ae),le=p(87751);const P=e=>`content-manager.${e}`;var ke=p(99168),Se=p(45697),s=p.n(Se);const Rt=(0,r.createContext)();var Oe=Object.defineProperty,Ue=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,xn=(e,t,n)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wt=(e,t)=>{for(var n in t||(t={}))we.call(t,n)&&xn(e,n,t[n]);if(Ue)for(var n of Ue(t))Me.call(t,n)&&xn(e,n,t[n]);return e},rt=(e,t)=>{var n={};for(var o in e)we.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Ue)for(var o of Ue(e))t.indexOf(o)<0&&Me.call(e,o)&&(n[o]=e[o]);return n};function Ye(e){var t=e,{attributes:n,buttonData:o,children:a,goTo:l,layout:i,metadatas:c,moveItem:u,moveRow:d,onAddData:m,relationsLayout:g,removeField:f,selectedItemName:h,setEditFieldToSelect:b}=t,E=rt(t,["attributes","buttonData","children","goTo","layout","metadatas","moveItem","moveRow","onAddData","relationsLayout","removeField","selectedItemName","setEditFieldToSelect"]);return r.createElement(Rt.Provider,{value:wt({attributes:n,buttonData:o,goTo:l,layout:i,metadatas:c,moveItem:u,moveRow:d,onAddData:m,relationsLayout:g,removeField:f,selectedItemName:h,setEditFieldToSelect:b},E)},a)}Ye.defaultProps={attributes:{},buttonData:[],goTo(){},layout:[],metadatas:{},moveItem(){},moveRow(){},onAddData(){},relationsLayout:[],removeField(){},selectedItemName:null,setEditFieldToSelect(){}},Ye.propTypes={attributes:s().object,buttonData:s().array,children:s().node.isRequired,goTo:s().func,layout:s().array,metadatas:s().object,moveItem:s().func,moveRow:s().func,onAddData:s().func,relationsLayout:s().array,removeField:s().func,selectedItemName:s().string,setEditFieldToSelect:s().func};const Ne=Ye,Le={COMPONENT:"component",EDIT_FIELD:"editField",EDIT_RELATION:"editRelation",FIELD:"field",RELATION:"relation"};var j=p(71893),L=p(35961),q=p(46273),z=p(72735),Re=p(12028),ze=p(20022),pt=p(12814),Io=p(12645);const Hc=(0,j.default)(L.x)`
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Gc=(0,j.default)(L.x)`
  height: ${32/16}rem;
  width: ${32/16}rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,Kc=j.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`,Do=({displayedValue:e})=>r.createElement(Hc,{paddingLeft:3,paddingRight:3,paddingTop:3,paddingBottom:3,hasRadius:!0,background:"neutral0",width:(0,y.pxToRem)(300)},r.createElement(q.k,{justifyContent:"space-between"},r.createElement(Kc,{type:"button"},r.createElement(q.k,null,r.createElement(Gc,{background:"neutral200"},r.createElement(Io.default,null)),r.createElement(L.x,{paddingLeft:6,maxWidth:(0,y.pxToRem)(150)},r.createElement(z.Z,{textColor:"neutral700",ellipsis:!0},e)))),r.createElement(L.x,{paddingLeft:3},r.createElement(q.k,null,r.createElement(Re.h,{icon:r.createElement(ze.default,null)}),r.createElement(L.x,{paddingLeft:2},r.createElement(Re.h,{icon:r.createElement(pt.Z,null)}))))));Do.propTypes={displayedValue:s().string.isRequired};const Qc=Do;var ce=p(7681),mt=p(4585),kn=p(70968);const Lo=e=>e.length>20?`${e.substring(0,20)}...`:e,Fn=(0,j.default)(q.k)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,So=(0,j.default)(Fn)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Yc=(0,j.default)(q.k)`
  display: inline-flex;
  max-height: ${32/16}rem;
  opacity: ${({transparent:e})=>e?0:1};
  background-color: ${({theme:e,isSibling:t})=>t?e.colors.neutral100:e.colors.primary100};
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }

  ${z.Z} {
    color: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
  }

  ${So} {
    border-right: 1px solid
      ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};
  }
`,An=({labelField:e,transparent:t,isSibling:n})=>{const o=Lo(e);return r.createElement(Yc,{hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n},r.createElement(ce.K,{horizontal:!0,spacing:3},r.createElement(So,{alignItems:"center"},r.createElement(pt.Z,null)),r.createElement(z.Z,{fontWeight:"bold"},o)),r.createElement(q.k,{paddingLeft:3},r.createElement(Fn,{alignItems:"center"},r.createElement(mt.Z,null)),r.createElement(Fn,{alignItems:"center"},r.createElement(kn.default,null))))};An.defaultProps={isSibling:!1,transparent:!1},An.propTypes={isSibling:s().bool,labelField:s().string.isRequired,transparent:s().bool};const jn=An,Jc={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function Xc(e,t,n){if(!e||!t)return{display:"none"};const{x:o,y:a}=n,l=`translate(${o}px, ${a}px)`;return{transform:l,WebkitTransform:l}}const eu=()=>{const{itemType:e,isDragging:t,item:n,initialOffset:o,currentOffset:a,mouseOffset:l}=(0,ke.useDragLayer)(i=>({item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging(),mouseOffset:i.getClientOffset()}));return t?r.createElement(Ne,null,r.createElement("div",{style:Jc},r.createElement("div",{style:Xc(o,a,l),className:"col-md-2"},[Le.EDIT_RELATION,Le.EDIT_FIELD,Le.FIELD].includes(e)&&r.createElement(jn,{labelField:n.labelField}),e===Le.COMPONENT&&r.createElement(Qc,{displayedValue:n.displayedValue})))):null},xo=(0,r.createContext)();var tu=p(35800),Y=p(96486);const ko=(0,r.createContext)(),dP=(0,r.createContext)(),pP=null;var pe=p(37424);const Fo=e=>e["content-manager_editViewLayoutManager"].currentLayout;var nu=Object.defineProperty,ru=Object.defineProperties,ou=Object.getOwnPropertyDescriptors,Ao=Object.getOwnPropertySymbols,su=Object.prototype.hasOwnProperty,au=Object.prototype.propertyIsEnumerable,jo=(e,t,n)=>t in e?nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iu=(e,t)=>{for(var n in t||(t={}))su.call(t,n)&&jo(e,n,t[n]);if(Ao)for(var n of Ao(t))au.call(t,n)&&jo(e,n,t[n]);return e},lu=(e,t)=>ru(e,ou(t));const Je=()=>{const e=(0,pe.useSelector)(Fo),t=(0,r.useCallback)(n=>(0,Y.get)(e,["components",n],{}),[e]);return lu(iu({},e),{getComponentLayout:t})};var Fe=p(78648),me=p(23998),cu=p(50361),Ve=p.n(cu);const Wt=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const o=Ve()(e),a=o.splice(t,1);return o.splice(n,0,a[0]),o}return e},$o=e=>{const t=e.type;return t==="relation"?!(0,Y.toLower)(e.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(t)&&!!t},No=(e,t)=>Object.keys(e).reduce((n,o)=>{const a=(0,Y.get)(e,[o],{}),{default:l,component:i,type:c,required:u,min:d,repeatable:m}=a;if(c==="json"&&(n[o]=null),c==="json"&&u===!0&&(n[o]={}),l!==void 0&&(n[o]=l),c==="component"){const g=(0,Y.get)(t,[i,"attributes"],{}),f=No(g,t);if(u===!0&&(n[o]=m===!0?[]:f),d&&m===!0&&u){n[o]=[];for(let h=0;h<d;h+=1)n[o].push(f)}}return c==="dynamiczone"&&u===!0&&(n[o]=[]),n},{}),_t=No;var uu=Object.defineProperty,du=Object.defineProperties,pu=Object.getOwnPropertyDescriptors,Ut=Object.getOwnPropertySymbols,Vo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable,Bo=(e,t,n)=>t in e?uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$n=(e,t)=>{for(var n in t||(t={}))Vo.call(t,n)&&Bo(e,n,t[n]);if(Ut)for(var n of Ut(t))qo.call(t,n)&&Bo(e,n,t[n]);return e},Nn=(e,t)=>du(e,pu(t)),mu=(e,t)=>{var n={};for(var o in e)Vo.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Ut)for(var o of Ut(e))t.indexOf(o)<0&&qo.call(e,o)&&(n[o]=e[o]);return n};const Ht=e=>{var t=e,{layouts:n,metadatas:o}=t,a=mu(t,["layouts","metadatas"]);const l=n.list.map(u=>u.name?u.name:u),i=Object.keys(o).reduce((u,d)=>{const m=(0,Y.get)(o,[d],{});let g=m.edit;return g.mainField&&(g=Nn($n({},g),{mainField:m.edit.mainField.name})),Nn($n({},u),{[d]:{edit:g,list:(0,Y.omit)(m.list,["mainField"])}})},{}),c=n.edit.map(u=>u.map(({name:d,size:m})=>({name:d,size:m})));return Nn($n({},a),{layouts:{edit:c,list:l},metadatas:i})};var fu=Object.defineProperty,gu=Object.defineProperties,yu=Object.getOwnPropertyDescriptors,zo=Object.getOwnPropertySymbols,hu=Object.prototype.hasOwnProperty,bu=Object.prototype.propertyIsEnumerable,Zo=(e,t,n)=>t in e?fu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vu=(e,t)=>{for(var n in t||(t={}))hu.call(t,n)&&Zo(e,n,t[n]);if(zo)for(var n of zo(t))bu.call(t,n)&&Zo(e,n,t[n]);return e},Eu=(e,t)=>gu(e,yu(t));const Cu=(e,t)=>e.map(n=>Eu(vu({},n),{subject:t})),Wo=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,o)=>(n[o]=Cu(t[o],e),n),{})},_o=e=>e.split(".").filter(t=>(0,Y.isNaN)(parseInt(t,10))),Uo=e=>e.length===0?-1:Math.max.apply(Math,e.map(t=>t.__temp_key__)),fe=e=>`/content-manager/${e}`;var Pu=Object.defineProperty,Ho=Object.getOwnPropertySymbols,Ou=Object.prototype.hasOwnProperty,Ru=Object.prototype.propertyIsEnumerable,Go=(e,t,n)=>t in e?Pu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gt=(e,t)=>{for(var n in t||(t={}))Ou.call(t,n)&&Go(e,n,t[n]);if(Ho)for(var n of Ho(t))Ru.call(t,n)&&Go(e,n,t[n]);return e};const Ko=(e,t,n)=>{const o=c=>t.find(u=>u.uid===c),a=Object.assign({},e),l=e[n].uid,i=o(l);return(0,Y.set)(a,[n],Gt(Gt({},e[n]),i)),Object.keys(e.components).forEach(c=>{const u=o(c);(0,Y.set)(a,["components",c],Gt(Gt({},e.components[c]),u))}),a};var wu=Object.defineProperty,Mu=Object.defineProperties,Tu=Object.getOwnPropertyDescriptors,Qo=Object.getOwnPropertySymbols,Iu=Object.prototype.hasOwnProperty,Du=Object.prototype.propertyIsEnumerable,Yo=(e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jo=(e,t)=>{for(var n in t||(t={}))Iu.call(t,n)&&Yo(e,n,t[n]);if(Qo)for(var n of Qo(t))Du.call(t,n)&&Yo(e,n,t[n]);return e},Xo=(e,t)=>Mu(e,Tu(t));const Mt=(e,t)=>e&&Object.keys(e).reduce((n,o)=>{const a=n[o];return a===null?n:Array.isArray(a)?Array.isArray(n)?(n[o]=Mt(a,t),n):Xo(Jo({},n),{[o]:a.map(l=>Mt(l,t))}):typeof a=="object"?Array.isArray(n)?(n[o]=Mt(a,t),n):Xo(Jo({},n),{[o]:Mt(a,t)}):(o===t&&delete n[o],n)},e),Lu=Mt,es=(e,t,n)=>{const o=(a,l)=>Object.keys(a).reduce((i,c)=>{const u=(0,y.getType)(l,c),d=(0,Y.get)(a,c),m=(0,y.getOtherInfos)(l,[c,"component"]),g=(0,y.getOtherInfos)(l,[c,"repeatable"]);return u==="dynamiczone"?(i[c]=d.map(f=>o(f,n[f.__component])),i):u==="component"?(g?i[c]=d&&d.map(f=>o(f,n[m])):i[c]=d&&o(d,n[m]),i):(u!=="password"&&(i[c]=d),i)},{});return o(e,t)};var Su=Object.defineProperty,xu=Object.defineProperties,ku=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,Fu=Object.prototype.hasOwnProperty,Au=Object.prototype.propertyIsEnumerable,ns=(e,t,n)=>t in e?Su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tt=(e,t)=>{for(var n in t||(t={}))Fu.call(t,n)&&ns(e,n,t[n]);if(ts)for(var n of ts(t))Au.call(t,n)&&ns(e,n,t[n]);return e},It=(e,t)=>xu(e,ku(t));const rs=(e,t)=>t.find(n=>n.uid===e),ju=(e,t)=>{const n=$u(e,t),o=os(n.contentType,t),a=Nu(n.contentType,n.components);return(0,Y.set)(n,["contentType","layouts","edit"],o),(0,Y.set)(n,["contentType","layouts","list"],a),Object.keys(n.components).forEach(l=>{const i=os(n.components[l],t);(0,Y.set)(n,["components",l,"layouts","edit"],i)}),n},$u=(e,t)=>{const n=Ko((0,Y.cloneDeep)(e),t,"contentType"),{components:o,contentType:a}=n,l=i=>Object.keys(i.metadatas).reduce((c,u)=>{const d=(0,Y.get)(i,["attributes",u],{});let m=i.metadatas[u];if(d.type==="relation"){const g=rs(d.targetModel,t),f=m.edit.mainField,h={name:f,schema:(0,Y.get)(g,["attributes",f])};m={list:It(Tt({},m.list),{mainField:h}),edit:It(Tt({},m.edit),{mainField:h})}}return c[u]=m,c},{});return(0,Y.set)(n,["contentType","metadatas"],l(a)),Object.keys(o).forEach(i=>{const c=o[i],u=l(c);(0,Y.set)(n,["components",i,"metadatas"],u)}),n},os=(e,t)=>e.layouts.edit.reduce((n,o)=>{const a=o.map(l=>{const i=(0,Y.get)(e,["attributes",l.name],{}),c=It(Tt({},l),{fieldSchema:i,metadatas:(0,Y.get)(e,["metadatas",l.name,"edit"],{})});if(i.type==="relation"){const d=rs(i.targetModel,t).pluginOptions||{};(0,Y.set)(c,"targetModelPluginOptions",d),(0,Y.set)(c,"queryInfos",{shouldDisplayRelationLink:Vu(e,l.name,t)})}return c});return n.push(a),n},[]),Nu=(e,t)=>e.layouts.list.reduce((o,a)=>{const l=(0,Y.get)(e,["attributes",a],{}),i=(0,Y.get)(e,["metadatas",a,"list"],{}),c=l.type;if(c==="relation")return o.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:i}),o;if(c==="component"){const u=t[l.component],d=u.settings.mainField,m=u.attributes[d];return o.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:It(Tt({},i),{mainField:It(Tt({},m),{name:d})})}),o}return o.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:i}),o},[]),Vu=(e,t,n)=>{const o=(0,Y.get)(e,["attributes",t,"targetModel"],"");return qu(n).includes(o)},qu=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),ss=ju;var Kt=p(60612),Bu=Object.defineProperty,zu=Object.defineProperties,Zu=Object.getOwnPropertyDescriptors,as=Object.getOwnPropertySymbols,Wu=Object.prototype.hasOwnProperty,_u=Object.prototype.propertyIsEnumerable,is=(e,t,n)=>t in e?Bu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qt=(e,t)=>{for(var n in t||(t={}))Wu.call(t,n)&&is(e,n,t[n]);if(as)for(var n of as(t))_u.call(t,n)&&is(e,n,t[n]);return e},ls=(e,t)=>zu(e,Zu(t));const Uu={error:null,isLoading:!0,layout:{},layouts:{}},Hu=(e,t)=>(0,Kt.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const o=t.data.contentType.uid;n.layout=t.data,n.layouts[o]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const o=e.layout;n.layout=ls(Qt({},o),{contentType:Qt({uid:o.contentType.uid},t.newLayout.contentType)}),n.layouts[o.contentType.uid]=ls(Qt({},o),{contentType:Qt({uid:o.contentType.uid},t.newLayout.contentType)});break}default:return n}});var Dt=p(20573),Gu=p(14506);const Lt=()=>e=>e["content-manager_app"]||Gu.E,wP=()=>createSelector(Lt(),e=>e),MP=()=>createSelector(Lt(),e=>e.models),Ku=()=>(0,Dt.P1)(Lt(),e=>({collectionTypeLinks:e.collectionTypeLinks,singleTypeLinks:e.singleTypeLinks})),Vn=()=>(0,Dt.P1)(Lt(),({components:e,models:t})=>({schemas:[...e,...t]})),TP=null;var Qu=p(25108),Yu=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const cs=e=>{const[{error:t,isLoading:n,layout:o,layouts:a},l]=(0,r.useReducer)(Hu,Uu),i=(0,r.useMemo)(Vn,[]),{schemas:c}=(0,pe.useSelector)(g=>i(g),pe.shallowEqual),u=(0,r.useRef)(!0),d=(0,r.useCallback)((g,f)=>Yu(void 0,null,function*(){if(a[g]){l({type:"SET_LAYOUT_FROM_STATE",uid:g});return}l({type:"GET_DATA"});try{const h=fe(`content-types/${g}/configuration`),{data:{data:b}}=yield me.be.get(h,{cancelToken:f.token});l({type:"GET_DATA_SUCCEEDED",data:ss(b,c)})}catch(h){if(Fe.Z.isCancel(h))return;u.current&&Qu.error(h),u.current&&l({type:"GET_DATA_ERROR",error:h})}}),[a,c]);(0,r.useEffect)(()=>()=>{u.current=!1},[]),(0,r.useEffect)(()=>{const f=Fe.Z.CancelToken.source();return d(e,f),()=>{f.cancel("Operation canceled by the user.")}},[e,d]);const m=(0,r.useCallback)(g=>{l({type:"UPDATE_LAYOUT",newLayout:ss(g,c)})},[c]);return{error:t,isLoading:n,layout:o,updateLayout:m}},Ju=e=>e["content-manager_app"].collectionTypeLinks;var He=p(80129),Xu=p(27361),I=p.n(Xu),ed=p(13218),us=p.n(ed),td=Object.defineProperty,nd=Object.defineProperties,rd=Object.getOwnPropertyDescriptors,ds=Object.getOwnPropertySymbols,od=Object.prototype.hasOwnProperty,sd=Object.prototype.propertyIsEnumerable,ps=(e,t,n)=>t in e?td(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ad=(e,t)=>{for(var n in t||(t={}))od.call(t,n)&&ps(e,n,t[n]);if(ds)for(var n of ds(t))sd.call(t,n)&&ps(e,n,t[n]);return e},id=(e,t)=>nd(e,rd(t));const ms=(e,t)=>Object.keys(e).reduce((n,o)=>{const a=e[o],l=I()(t,[o],a);return us()(a)?id(ad({},n),{[o]:ms(a,l)}):(n[o]=l,n)},{}),ld=(e,t,n)=>{const o=e.find(({to:m})=>m.includes(t));if(!o)return"/";const{to:a,search:l}=o,i=(0,He.parse)(l),c=(0,He.parse)(n.substring(1)),u=ms(i,c);return`${a}?${(0,He.stringify)(u,{encode:!1})}`},fs=e=>{const[{rawQuery:t}]=(0,y.useQueryParams)(),n=(0,pe.useSelector)(Ju);return ld(n,e,t)},ot=()=>(0,r.useContext)(Rt),gs=()=>{const{search:e}=(0,J.useLocation)(),t=e?(0,He.parse)(e.substring(1)):{};return t.plugins?(0,He.stringify)({plugins:t.plugins},{encode:!1}):""};var ys=p(80015);const cd=(e,t,n)=>({type:ys.m,permissions:e,__meta__:{plugins:t,containerName:n}}),ud=()=>({type:ys.Q}),dd=e=>e["content-manager_rbacManager"].permissions,pd=e=>e.rbacProvider.collectionTypesRelatedPermissions,hs=(e,t,n="listView")=>{const o=(0,pe.useSelector)(pd),a=(0,pe.useSelector)(dd),l=(0,pe.useDispatch)(),i=o[t];return(0,r.useEffect)(()=>i?(l(cd(i,e?e.plugins:null,n)),()=>{l(ud())}):()=>{},[i,l,e,n]),a},AP=()=>useContext(WysiwygContext),jP=null,bs=e=>{const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current};var Yt=p(80660),vs=p(15113);const md=()=>({type:vs.c}),fd=(e,t)=>({type:vs.O,layout:e,query:t});var gd=p(69590),Xe=p.n(gd),ft=p(49066),qe=p(11276),Ce=p(74571),yd=p(98432),hd=p(47713);const bd=()=>(0,r.useContext)(hd.ux),Es=e=>{const{getAdminInjectedComponents:t}=bd(),[n,o,a]=e.split(".");return t(n,o,a)};var vd=Object.defineProperty,Jt=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,Ps=Object.prototype.propertyIsEnumerable,Os=(e,t,n)=>t in e?vd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ed=(e,t)=>{for(var n in t||(t={}))Cs.call(t,n)&&Os(e,n,t[n]);if(Jt)for(var n of Jt(t))Ps.call(t,n)&&Os(e,n,t[n]);return e},Cd=(e,t)=>{var n={};for(var o in e)Cs.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Jt)for(var o of Jt(e))t.indexOf(o)<0&&Ps.call(e,o)&&(n[o]=e[o]);return n};const Rs=e=>{var t=e,{area:n}=t,o=Cd(t,["area"]);return Es(n).map(l=>r.createElement(l.Component,Ed({key:l.name},o)))};Rs.propTypes={area:s().string.isRequired};const Xt=Rs;var Pd=Object.defineProperty,ws=Object.getOwnPropertySymbols,Od=Object.prototype.hasOwnProperty,Rd=Object.prototype.propertyIsEnumerable,Ms=(e,t,n)=>t in e?Pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ts=(e,t)=>{for(var n in t||(t={}))Od.call(t,n)&&Ms(e,n,t[n]);if(ws)for(var n of ws(t))Rd.call(t,n)&&Ms(e,n,t[n]);return e};function wd(e,t){return n=>{const o=t(n.name);return r.createElement(e,Ts(Ts({},n),o))}}const Md=wd;function Td(e){const{addComponentToDynamicZone:t,createActionAllowedFields:n,isCreatingEntry:o,formErrors:a,modifiedData:l,moveComponentUp:i,moveComponentDown:c,removeComponentFromDynamicZone:u,readActionAllowedFields:d,updateActionAllowedFields:m}=(0,y.useCMEditViewDataManager)(),g=(0,r.useMemo)(()=>(0,Y.get)(l,[e],[]).map(b=>b.__component),[l,e]),f=(0,r.useMemo)(()=>(o?n:m).includes(e),[e,o,n,m]),h=(0,r.useMemo)(()=>(o?[]:d).includes(e),[e,o,d]);return{addComponentToDynamicZone:t,formErrors:a,isCreatingEntry:o,isFieldAllowed:f,isFieldReadable:h,moveComponentUp:i,moveComponentDown:c,removeComponentFromDynamicZone:u,dynamicDisplayedComponents:g}}const Id=Td;var qn=p(48734),Bn=p(74756),zn=p(63081),Dd=p(9022),Ld=p(83478),st=p(28702);const en=5,tn=8,Sd=(0,j.default)(st.Flex)`
  border-radius: ${({showBackground:e})=>e?"50%":0};
  color: ${({theme:e})=>e.colors.neutral600};
  height: ${({theme:e,size:t})=>e.spaces[t==="S"?en:tn]};
  width: ${({theme:e,size:t})=>e.spaces[t==="S"?en:tn]};

  svg {
    height: ${({theme:e,size:t})=>e.spaces[t==="S"?en-2:tn-3]};
    width: ${({theme:e,size:t})=>e.spaces[t==="S"?en-2:tn-3]};
  }
`;function St({showBackground:e=!0,size:t="M"}){return r.createElement(Sd,{alignItems:"center",background:e?"neutral200":null,justifyContent:"center",size:t,showBackground:e},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},r.createElement("path",{d:"M216.3 2c4.8-2.6 10.5-2.6 15.3 0L422.3 106c5.1 2.8 8.3 8.2 8.3 14s-3.2 11.2-8.3 14L231.7 238c-4.8 2.6-10.5 2.6-15.3 0L25.7 134c-5.1-2.8-8.3-8.2-8.3-14s3.2-11.2 8.3-14L216.3 2zM23.7 170l176 96c5.1 2.8 8.3 8.2 8.3 14V496c0 5.6-3 10.9-7.8 13.8s-10.9 3-15.8 .3L8.3 414C3.2 411.2 0 405.9 0 400V184c0-5.6 3-10.9 7.8-13.8s10.9-3 15.8-.3zm400.7 0c5-2.7 11-2.6 15.8 .3s7.8 8.1 7.8 13.8V400c0 5.9-3.2 11.2-8.3 14l-176 96c-5 2.7-11 2.6-15.8-.3s-7.8-8.1-7.8-13.8V280c0-5.9 3.2-11.2 8.3-14l176-96z",fill:"currentColor"})))}St.defaultProps={showBackground:!0,size:"M"},St.propTypes={showBackground:s().bool,size:s().string};var xd=p(84238),kd=p.n(xd),Is=p(99782),Fd=Object.defineProperty,Ds=Object.getOwnPropertySymbols,Ad=Object.prototype.hasOwnProperty,jd=Object.prototype.propertyIsEnumerable,Ls=(e,t,n)=>t in e?Fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$d=(e,t)=>{for(var n in t||(t={}))Ad.call(t,n)&&Ls(e,n,t[n]);if(Ds)for(var n of Ds(t))jd.call(t,n)&&Ls(e,n,t[n]);return e};const Nd=j.default.span`
  > svg {
    width: ${(0,y.pxToRem)(24)};
    height: ${(0,y.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Zn=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:o}=(0,V.useIntl)();return r.createElement(r.Fragment,null,r.createElement(L.x,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button"},r.createElement(ce.K,{spacing:2},r.createElement(q.k,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"}},r.createElement(Nd,null,r.createElement(Is.Z,null))),r.createElement(q.k,{justifyContent:"center"},r.createElement(z.Z,{textColor:"primary600",variant:"pi",fontWeight:"bold"},o({id:P("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."}))))),(e==null?void 0:e.id)&&r.createElement(z.Z,{textColor:"danger600",variant:"pi"},o({id:e.id,defaultMessage:e.id},$d({},e.values))))};Zn.defaultProps={error:void 0,isReadOnly:!1},Zn.propTypes={error:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),isReadOnly:s().bool,onClick:s().func.isRequired};const Ss=Zn;var Vd=p(57557),qd=p.n(Vd),Bd=p(69572),Wn=p.n(Bd),zd=p(4631),nn=p.n(zd),VP=p(88386),Zd=p(9980),Wd=p.n(Zd),_n=p(25257),_d=p(79411),Ud=p.n(_d),Hd=p(40591),xs=p.n(Hd),Gd=p(30645),Kd=p.n(Gd),Qd=p(46635),Yd=p.n(Qd),Jd=p(52384),Xd=p.n(Jd),ep=p(44266),tp=p.n(ep),np=p(94574),rp=p.n(np),op=p(40700),sp=p.n(op),ap=p(97003),ip=p.n(ap),lp=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});(()=>lp(void 0,null,function*(){yield p.e(7347).then(p.bind(p,24840))}))();const gt=new(Wd())({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight(e,t){if(t&&t!=="auto"&&(0,_n.getLanguage)(t))return'<pre class="hljs language-'+gt.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,_n.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,_n.highlightAuto)(e);return'<pre class="hljs language-'+gt.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+gt.utils.escapeHtml(e)+"</code></pre>"}}).use(Ud()).use(xs(),"warning").use(xs(),"tip").use(Kd()).use(Yd()).use(Xd()).use(tp()).use(rp()).use(sp()).use(ip());gt.renderer.rules.footnote_ref=(e,t,n,o,a)=>'<sup class="footnote-ref"><span>'+a.rules.footnote_caption(e,t,n,o,a)+"</span></sup>",gt.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const cp=gt;var up=p(91036),ks=p.n(up),dp=Object.defineProperty,pp=Object.defineProperties,mp=Object.getOwnPropertyDescriptors,Fs=Object.getOwnPropertySymbols,fp=Object.prototype.hasOwnProperty,gp=Object.prototype.propertyIsEnumerable,As=(e,t,n)=>t in e?dp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yp=(e,t)=>{for(var n in t||(t={}))fp.call(t,n)&&As(e,n,t[n]);if(Fs)for(var n of Fs(t))gp.call(t,n)&&As(e,n,t[n]);return e},hp=(e,t)=>pp(e,mp(t));const bp=hp(yp({},ks().defaults),{allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}}),vp=e=>ks()(e,bp),Ep=j.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  z-index: 2;
  cursor: not-allowed;
  color: ${({theme:e})=>e.colors.neutral800};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: 10px;
    margin-block-end: 10px;
  }

  p {
    margin-bottom: 10px;
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: 41px;
    margin-bottom: 34px;
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 5px solid #eee;
    font-style: italic;
    padding: 10px 20px;
  }

  img {
    max-width: 100%;
  }

  table {
    thead {
      background: ${({theme:e})=>e.colors.neutral150};

      th {
        padding: ${({theme:e})=>e.spaces[4]};
      }
    }
    tr {
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    th,
    td {
      padding: ${({theme:e})=>e.spaces[4]};
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 0;
      border-top: 0;
    }
  }

  pre,
  code {
    font-size: 13px;
    border-radius: 3px;
    background-color: #002b36;
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  .warning {
    background-color: #faa684;
    padding: 30px;
    border-radius: 3px;
  }
  .tip {
    padding: 30px;
    border-radius: 3px;
  }

  .footnote-ref,
  .footnote-backref {
    color: #007bff;
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,Un=({data:e})=>{const t=(0,r.useMemo)(()=>vp(cp.render(e.replaceAll("\\n",`
`)||"")),[e]);return r.createElement(Ep,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))};Un.defaultProps={data:""},Un.propTypes={data:s().string};const js=(0,r.memo)(Un),Cp=j.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"290px"};
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`;var Hn=p(21817);const xe=(0,j.default)(Re.h)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,Pp=(0,j.default)(xe)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,$s=(0,j.default)(Re.o)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,Ns=(0,j.default)(Re.h)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,Op=(0,j.default)(Re.o)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,Rp=j.default.div`
  position: relative;
  height: calc(100% - 48px);
`,wp=(0,j.default)(Hn.Y)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`;var rn=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,Mp=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,Tp=/[*+-]\s/;function Ip(e){if(e.getOption("disableInput"))return nn().Pass;for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){var a=t[o].head,l=e.getStateAfter(a.line),i=l.list!==!1,c=l.quote!==0,u=e.getLine(a.line),d=rn.exec(u),m=/^\s*$/.test(u.slice(0,a.ch));if(!t[o].empty()||!i&&!c||!d||m){e.execCommand("newlineAndIndent");return}if(Mp.test(u)){var g=c&&/>\s*$/.test(u),f=!/>\s*$/.test(u);(g||f)&&e.replaceRange("",{line:a.line,ch:0},{line:a.line,ch:a.ch+1}),n[o]=`
`}else{var h=d[1],b=d[5],E=!(Tp.test(d[2])||d[2].indexOf(">")>=0),S=E?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[o]=`
`+h+S+b,E&&Dp(e,a)}}e.replaceSelections(n)}function Dp(e,t){var n=t.line,o=0,a=0,l=rn.exec(e.getLine(n)),i=l[1];do{o+=1;var c=n+o,u=e.getLine(c),d=rn.exec(u);if(d){var m=d[1],g=parseInt(l[3],10)+o-a,f=parseInt(d[3],10),h=f;if(i===m&&!isNaN(f))g===f&&(h=f+1),g>f&&(h=g+1),e.replaceRange(u.replace(rn,m+h+d[4]+d[5]),{line:c,ch:0},{line:c,ch:u.length});else{if(i.length>m.length||i.length<m.length&&o===1)return;a+=1}}}while(d)}const Lp=Ip,Gn=({disabled:e,editorRef:t,error:n,isPreviewMode:o,isExpandMode:a,name:l,onChange:i,placeholder:c,textareaRef:u,value:d})=>{const m=(0,r.useRef)(i);return(0,r.useEffect)(()=>{t.current=nn().fromTextArea(u.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:c,spellcheck:!0,inputStyle:"contenteditable"}),nn().commands.newlineAndIndentContinueMarkdownList=Lp,t.current.on("change",g=>{m.current({target:{name:l,value:g.getValue(),type:"wysiwyg"}})})},[t,u,l,c]),(0,r.useEffect)(()=>{d&&!t.current.hasFocus()&&t.current.setValue(d)},[t,d]),(0,r.useEffect)(()=>{o||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,o,t]),(0,r.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),r.createElement(Rp,null,r.createElement(Cp,{isExpandMode:a,disabled:e||o},r.createElement("textarea",{ref:u})),o&&r.createElement(js,{data:d}))};Gn.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},Gn.propTypes={disabled:s().bool,editorRef:s().shape({current:s().any}).isRequired,error:s().string,isPreviewMode:s().bool,isExpandMode:s().bool,name:s().string.isRequired,onChange:s().func.isRequired,placeholder:s().string,textareaRef:s().shape({current:s().any}).isRequired,value:s().string};const Sp=Gn;var Vs=p(25896),ge=p(29728),Ze=p(91216),Pe=p(82562),xp=p(88533),qs=p(67628),Bs=p(54244),zs=p(71414),kp=p(42164),Fp=p(66567),Ap=p(86780),jp=p(82752),$p=p(36606),Np=p(63851),Vp=p(95629),Zs=p(49901);const Kn=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:o,onActionClick:a,onToggleMediaLib:l,onTogglePreviewMode:i})=>{const[c,u]=(0,r.useState)(!1),{formatMessage:d}=(0,V.useIntl)(),m=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),g=(0,r.useRef)(),f=()=>{u(h=>!h)};return e||o?r.createElement(L.x,{padding:2,background:"neutral100"},r.createElement(q.k,{justifyContent:"space-between"},r.createElement(q.k,null,r.createElement(Ze.P,{disabled:!0,id:"selectTitle",placeholder:m,size:"S","aria-label":m},r.createElement(Pe.W,{value:"h1"},"h1"),r.createElement(Pe.W,{value:"h2"},"h2"),r.createElement(Pe.W,{value:"h3"},"h3"),r.createElement(Pe.W,{value:"h4"},"h4"),r.createElement(Pe.W,{value:"h5"},"h5"),r.createElement(Pe.W,{value:"h6"},"h6")),r.createElement($s,null,r.createElement(xe,{disabled:!0,id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(qs.Z,null)}),r.createElement(xe,{disabled:!0,id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(Bs.Z,null)}),r.createElement(xe,{disabled:!0,id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(zs.Z,null)})),r.createElement(Ns,{disabled:!0,id:"more",label:"More",icon:r.createElement(Zs.Z,null)})),!n&&r.createElement(ge.z,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})))):r.createElement(L.x,{padding:2,background:"neutral100"},r.createElement(q.k,{justifyContent:"space-between"},r.createElement(q.k,null,r.createElement(Ze.P,{id:"selectTitle",placeholder:m,size:"S",onChange:h=>a(h,t)},r.createElement(Pe.W,{value:"h1"},"h1"),r.createElement(Pe.W,{value:"h2"},"h2"),r.createElement(Pe.W,{value:"h3"},"h3"),r.createElement(Pe.W,{value:"h4"},"h4"),r.createElement(Pe.W,{value:"h5"},"h5"),r.createElement(Pe.W,{value:"h6"},"h6")),r.createElement($s,null,r.createElement(xe,{onClick:()=>a("Bold",t),id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(qs.Z,null)}),r.createElement(xe,{onClick:()=>a("Italic",t),id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(Bs.Z,null)}),r.createElement(xe,{onClick:()=>a("Underline",t),id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(zs.Z,null)})),r.createElement(Ns,{ref:g,onClick:f,id:"more",label:"More",icon:r.createElement(Zs.Z,null)}),c&&r.createElement(xp.J,{centered:!0,source:g,spacing:4,id:"popover"},r.createElement(Vs.i,{onEscape:f,restoreFocus:!1},r.createElement(q.k,null,r.createElement(Op,null,r.createElement(xe,{onClick:()=>a("Strikethrough",t,f),id:"Strikethrough",label:"Strikethrough",name:"Strikethrough",icon:r.createElement(kp.Z,null)}),r.createElement(xe,{onClick:()=>a("BulletList",t,f),id:"BulletList",label:"BulletList",name:"BulletList",icon:r.createElement(Fp.Z,null)}),r.createElement(xe,{onClick:()=>a("NumberList",t,f),id:"NumberList",label:"NumberList",name:"NumberList",icon:r.createElement(Ap.Z,null)})),r.createElement(Re.o,null,r.createElement(xe,{onClick:()=>a("Code",t,f),id:"Code",label:"Code",name:"Code",icon:r.createElement(jp.Z,null)}),r.createElement(xe,{onClick:()=>{f(),l()},id:"Image",label:"Image",name:"Image",icon:r.createElement($p.Z,null)}),r.createElement(Pp,{onClick:()=>a("Link",t,f),id:"Link",label:"Link",name:"Link",icon:r.createElement(Np.Z,null)}),r.createElement(xe,{onClick:()=>a("Quote",t,f),id:"Quote",label:"Quote",name:"Quote",icon:r.createElement(Vp.Z,null)})))))),i&&r.createElement(ge.z,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"}))))};Kn.defaultProps={isPreviewMode:!1,onActionClick(){},onToggleMediaLib(){},onTogglePreviewMode:void 0},Kn.propTypes={disabled:s().bool.isRequired,editorRef:s().shape({current:s().any}).isRequired,isExpandMode:s().bool.isRequired,isPreviewMode:s().bool,onActionClick:s().func,onToggleMediaLib:s().func,onTogglePreviewMode:s().func};const qp=Kn;var Bp=p(19954);const Qn=({onToggleExpand:e})=>{const{formatMessage:t}=(0,V.useIntl)();return r.createElement(L.x,{padding:2,background:"neutral100",hasRadius:!0},r.createElement(q.k,{justifyContent:"flex-end",alignItems:"flex-end"},r.createElement(wp,{id:"expand",onClick:e},r.createElement(z.Z,null,t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})),r.createElement(Bp.Z,null))))};Qn.defaultProps={onToggleExpand(){}},Qn.propTypes={onToggleExpand:s().func};const zp=Qn;var Zp=Object.defineProperty,Ws=Object.getOwnPropertySymbols,Wp=Object.prototype.hasOwnProperty,_p=Object.prototype.propertyIsEnumerable,_s=(e,t,n)=>t in e?Zp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Up=(e,t)=>{for(var n in t||(t={}))Wp.call(t,n)&&_s(e,n,t[n]);if(Ws)for(var n of Ws(t))_p.call(t,n)&&_s(e,n,t[n]);return e};const Yn=({id:e,error:t,name:n,description:o})=>{const{formatMessage:a}=(0,V.useIntl)(),l=o?a({id:o.id,defaultMessage:o.defaultMessage},Up({},o.values)):"";return!l||t?null:r.createElement(z.Z,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600"},l)};Yn.defaultProps={id:void 0,description:void 0,error:void 0},Yn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),error:s().string,id:s().string,name:s().string.isRequired};const Hp=Yn,Us=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},Hs=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},Gs=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},Ks=(e,t)=>{const n=e.current.getSelection();let o;if(n){const a=Us(t,n);e.current.replaceSelection(a),e.current.focus()}else{o=Hs(t),e.current.replaceSelection(o.editedText),e.current.focus();const{line:a,ch:l}=e.current.getCursor(),i=l-o.selection.end,c=l-o.selection.end-o.selection.start;e.current.setSelection({line:a,ch:c},{line:a,ch:i})}},Gp=(e,t)=>{const n=e.current.getDoc(),o=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const a=n.listSelections();let l=null;e.current.operation(function(){a.forEach(function(i){const c=[i.head.line,i.anchor.line].sort();l==null&&(l=n.getLine(c[0]).startsWith(o));for(let u=c[0];u<=c[1];u++)if(l)n.getLine(u).startsWith(o)&&n.replaceRange("",{line:u,ch:0},{line:u,ch:o.length});else{const d=t==="BulletList"?"- ":`${u+1}. `;n.replaceRange(d,{line:u,ch:0})}})})}else{let{line:a}=n.getCursor();const l=Gs(t),i=e.current.getLine(a),c=l+i;e.current.setSelection({line:a,ch:0},{line:a,ch:i.length}),e.current.replaceSelection(c)}e.current.focus()},Kp=(e,t)=>{let{line:n}=e.current.getCursor();const o=Gs(t),a=e.current.getLine(n),l=a.replace(/#{1,6}\s/g,"").trim(),i=o+l;e.current.setSelection({line:n,ch:0},{line:n,ch:a.length}),e.current.replaceSelection(i),setTimeout(()=>{const c=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:c})},0)},Qp=(e,t)=>{let{line:n,ch:o}=e.current.getCursor();t.forEach((a,l)=>{let i=e.current.getLine(n).length;e.current.setCursor({line:n,ch:i}),(l>0||l===0&&o!==0)&&(i=e.current.getLine(n).length,e.current.setCursor({line:n,ch:i}),n++,e.current.replaceSelection(`
`)),a.mime.includes("image")?e.current.replaceSelection(`![${a.alt}](${a.url})`):e.current.replaceSelection(`[${a.alt}](${a.url})`)}),setTimeout(()=>e.current.focus(),0)},Yp=(e,t,n,o,a)=>{const l=Us(t,a),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:o}),e.current.replaceSelection(`
`),e.current.replaceSelection(l),t==="Code"){let{line:c}=e.current.getCursor();e.current.setCursor({line:c-1,ch:a.length})}e.current.replaceRange(i,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Jp=(e,t,n,o)=>{const a=Hs(t),l=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:o}),e.current.replaceSelection(`
`),e.current.replaceSelection(a.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:i}=e.current.getCursor(),c=i-a.selection.end,u=i-a.selection.end-a.selection.start;e.current.setSelection({line:n,ch:u},{line:n,ch:c})}e.current.replaceRange(l,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Xp=(e,t)=>{const n=e.current.getSelection();let{line:o}=e.current.getCursor(),a=e.current.getLine(o).length;n?Yp(e,t,o,a,n):Jp(e,t,o,a)};var em=p(44034),tm=p(5240);const nm=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,rm=(0,j.default)(q.k)`
  background: ${({theme:e})=>nm(e.colors.neutral800,.2)};
`,om=(0,j.default)(L.x)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,sm=(0,j.default)(Hn.Y)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Jn=({children:e,isExpandMode:t,error:n,previewContent:o,onCollapse:a})=>{const{formatMessage:l}=(0,V.useIntl)();return(0,r.useEffect)(()=>{const i=document.body;return t&&i.classList.add("lock-body-scroll"),()=>{t&&i.classList.remove("lock-body-scroll")}},[t]),t?r.createElement(em.h,{role:"dialog","aria-modal":!1},r.createElement(Vs.i,{onEscape:a},r.createElement(rm,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:a},r.createElement(L.x,{id:"wysiwyg-expand",background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"70%",height:"70%",onClick:i=>i.stopPropagation()},r.createElement(q.k,{height:"100%",alignItems:"flex-start"},r.createElement(om,{flex:"1",height:"100%"},e),r.createElement(L.x,{flex:"1",height:"100%"},r.createElement(q.k,{height:(0,y.pxToRem)(48),background:"neutral100",justifyContent:"flex-end"},r.createElement(sm,{id:"collapse",onClick:a},r.createElement(z.Z,null,l({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})),r.createElement(tm.Z,null))),r.createElement(L.x,{position:"relative",height:"100%"},r.createElement(js,{data:o})))))))):r.createElement(L.x,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0},e)};Jn.defaultProps={error:void 0,previewContent:""},Jn.propTypes={children:s().node.isRequired,error:s().string,isExpandMode:s().bool.isRequired,previewContent:s().string,onCollapse:s().func.isRequired};var am=Object.defineProperty,Qs=Object.getOwnPropertySymbols,im=Object.prototype.hasOwnProperty,lm=Object.prototype.propertyIsEnumerable,Ys=(e,t,n)=>t in e?am(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Js=(e,t)=>{for(var n in t||(t={}))im.call(t,n)&&Ys(e,n,t[n]);if(Qs)for(var n of Qs(t))lm.call(t,n)&&Ys(e,n,t[n]);return e};const cm=(0,j.default)(L.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,um=(0,j.default)(z.Z)`
  line-height: 0;
`,Xn=({description:e,disabled:t,error:n,intlLabel:o,labelAction:a,name:l,onChange:i,placeholder:c,value:u,required:d})=>{const{formatMessage:m}=(0,V.useIntl)(),g=(0,r.useRef)(null),f=(0,r.useRef)(null),[h,b]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!1),[C,O]=(0,r.useState)(!1),{components:F}=(0,y.useLibrary)(),v=F["media-library"],R=()=>S(Z=>!Z),D=()=>b(Z=>!Z),T=()=>{b(!1),O(Z=>!Z)},U=(Z,N,k)=>{switch(Z){case"Link":case"Strikethrough":{Ks(N,Z),k();break}case"Code":case"Quote":{Xp(N,Z),k();break}case"Bold":case"Italic":case"Underline":{Ks(N,Z);break}case"BulletList":case"NumberList":{Gp(N,Z),k();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{Kp(N,Z);break}default:}},B=Z=>{const N=Z.map(k=>({alt:k.alternativeText||k.name,url:(0,y.prefixFileUrlWithBackendUrl)(k.url),mime:k.mime}));Qp(f,N),S(!1)},A=c?m({id:c.id,defaultMessage:c.defaultMessage},Js({},c.values)):"",K=o.id?m({id:o.id,defaultMessage:o.defaultMessage},Js({},o.values)):l;return r.createElement(r.Fragment,null,r.createElement(ce.K,{spacing:1},r.createElement(ce.K,{horizontal:!0,spacing:1},r.createElement(z.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},K,d&&r.createElement(um,{textColor:"danger600"},"*")),a&&r.createElement(cm,{paddingLeft:1},a)),r.createElement(Jn,{isExpandMode:C,error:n,previewContent:u,onCollapse:T},r.createElement(qp,{isExpandMode:C,editorRef:f,isPreviewMode:h,onActionClick:U,onToggleMediaLib:R,onTogglePreviewMode:C?void 0:D,disabled:t}),r.createElement(Sp,{disabled:t,isExpandMode:C,editorRef:f,error:n,isPreviewMode:h,name:l,onChange:i,placeholder:A,textareaRef:g,value:u}),!C&&r.createElement(zp,{onToggleExpand:T})),r.createElement(Hp,{description:e,name:l,error:n})),n&&r.createElement(L.x,{paddingTop:1},r.createElement(z.Z,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0},n)),E&&r.createElement(v,{onClose:R,onSelectAssets:B}))};Xn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:""},Xn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,onChange:s().func.isRequired,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),required:s().bool,value:s().string};const dm=Xn;var pm=p(95659),mm=p.n(pm),Xs=p(63428),ea=p(96404),fm=p(33629);const gm=j.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  /* BASICS */

  .colored {
    background-color: yellow;
    color: black !important;
  }

  > div {
    border-radius: 3px;
    > div:last-of-type {
      min-height: 253px;
      max-height: 506px;
    }
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    direction: ltr;
    z-index: 0;
  }
`,ym=(0,j.default)(L.x)`
  border-radius: ${({theme:e})=>e.borderRadius};
  border: 1px solid ${({theme:e,error:t})=>t?e.colors.danger600:"transparent"};
`;var ta=p(64777),hm=Object.defineProperty,na=Object.getOwnPropertySymbols,bm=Object.prototype.hasOwnProperty,vm=Object.prototype.propertyIsEnumerable,ra=(e,t,n)=>t in e?hm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Em=(e,t)=>{for(var n in t||(t={}))bm.call(t,n)&&ra(e,n,t[n]);if(na)for(var n of na(t))vm.call(t,n)&&ra(e,n,t[n]);return e};const er=({intlLabel:e,labelAction:t,name:n})=>{const{formatMessage:o}=(0,V.useIntl)(),a=e!=null&&e.id?o({id:e.id,defaultMessage:e.defaultMessage},Em({},e.values)):n;return r.createElement(ta.Q,{action:t},a)};er.defaultProps={id:void 0,intlLabel:void 0,labelAction:void 0},er.propTypes={id:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),labelAction:s().element,name:s().string.isRequired};const Cm=er;var oa=p(54574);const tr=({name:e,hint:t,error:n,children:o,required:a})=>{const{formatMessage:l}=(0,V.useIntl)(),i=n?l({id:n,defaultMessage:n}):"";return r.createElement(oa.g,{name:e,hint:t&&l(t),error:i,id:e,required:a},o)};tr.defaultProps={hint:void 0,error:"",required:!1},tr.propTypes={name:s().string.isRequired,hint:s().shape({id:s().string,defaultMessage:s().string}),error:s().string,children:s().node.isRequired,required:s().bool};const Pm=tr;var Om=Object.defineProperty,Rm=(e,t,n)=>t in e?Om(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,at=(e,t,n)=>(Rm(e,typeof t!="symbol"?t+"":t,n),n),wm=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Mm=600,Tm="blackboard";(()=>wm(void 0,null,function*(){yield p.e(3860).then(p.t.bind(p,96876,23)),yield p.e(2781).then(p.t.bind(p,3256,23)),yield p.e(953).then(p.t.bind(p,96477,23)),yield p.e(5178).then(p.t.bind(p,82801,23)),yield p.e(5509).then(p.t.bind(p,64020,23)),yield p.e(3973).then(p.bind(p,91380)),yield p.e(2218).then(p.bind(p,69039))}))();class nr extends r.Component{constructor(t){super(t),at(this,"timer",null),at(this,"setInitValue",()=>{const{value:n}=this.props;try{return n===null?this.codeMirror.setValue(""):n===0?this.codeMirror.setValue("0"):this.codeMirror.setValue(n)}catch(o){return this.setState({error:!0})}}),at(this,"setSize",()=>this.codeMirror.setSize("100%","auto")),at(this,"getContentAtLine",n=>this.codeMirror.getLine(n)),at(this,"markSelection",({message:n})=>{let o=parseInt(n.split(":")[0].split("line ")[1],10)-1,a=this.getContentAtLine(o);a==="{"&&(o+=1,a=this.getContentAtLine(o));const l=a.length,i=l-mm()(a," ").length,c=this.codeMirror.markText({line:o,ch:i},{line:o,ch:l},{className:"colored"});this.setState({markedText:c})}),at(this,"handleChange",(n,o)=>{if(o.origin==="setValue")return;const{name:a,onChange:l}=this.props;let i=n.getValue();i===""&&(i=null),l({target:{name:a,value:i,type:"json"}}),this.state.markedText&&(this.state.markedText.clear(),this.setState({markedText:null,error:null})),clearTimeout(this.timer),this.timer=setTimeout(()=>this.testJSON(n.getValue()),Mm)}),at(this,"testJSON",n=>{try{fm.parse(n)}catch(o){this.markSelection(o)}}),this.editor=r.createRef(),this.state={error:!1,markedText:null}}componentDidMount(){this.codeMirror=nn().fromTextArea(this.editor.current,{autoCloseBrackets:!0,lineNumbers:!0,matchBrackets:!0,mode:"application/json",readOnly:this.props.disabled,smartIndent:!0,styleSelectedText:!0,tabSize:2,theme:Tm,fontSize:"13px"}),this.codeMirror.on("change",this.handleChange),this.setSize(),this.setInitValue()}componentDidUpdate(t){t.value!==this.props.value&&!this.codeMirror.state.focused&&this.setInitValue()}render(){return this.state.error?r.createElement("div",null,"error json"):r.createElement(Pm,{name:this.props.name,hint:this.props.description,error:this.props.error,required:this.props.required},r.createElement(ce.K,{spacing:1},r.createElement(Cm,{intlLabel:this.props.intlLabel,name:this.props.name,labelAction:this.props.labelAction}),r.createElement(ym,{error:this.props.error},r.createElement(gm,{disabled:this.props.disabled},r.createElement("textarea",{ref:this.editor,autoComplete:"off",id:this.props.id||this.props.name,defaultValue:""}))),r.createElement(Xs.J,null),r.createElement(ea.c,null)))}}nr.defaultProps={description:null,disabled:!1,id:void 0,error:void 0,intlLabel:void 0,labelAction:void 0,onChange(){},value:null,required:!1},nr.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,id:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),labelAction:s().element,name:s().string.isRequired,onChange:s().func,value:s().any,required:s().bool};const Im=nr;var rr=p(16364),sa=p(30815),Dm=p(86783),xt=p(51277),Lm=p(86647);const aa=(e,t)=>{const[n,o]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const a=setTimeout(()=>{o(e)},t);return()=>{clearTimeout(a)}},[e,t]),n},Sm=/^[A-Za-z0-9-_.~]*$/;var xm=p(25752);const km=(0,j.default)(L.x)`
  position: relative;
`,Fm=(0,j.default)(xm.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,or=(0,j.default)(q.k)`
  position: absolute;
  right: ${({theme:e})=>e.spaces[6]};
  width: 100px;
  pointer-events: none;

  svg {
    margin-right: ${({theme:e})=>e.spaces[1]};
    height: ${12/16}rem;
    width: ${12/16}rem;
    path {
      fill: ${({theme:e,notAvailable:t})=>t?e.colors.danger600:e.colors.success600};
    }
  }
`,Am=j.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,jm=(0,j.default)(q.k)`
  animation: ${Am} 2s infinite linear;
`;var $m=Object.defineProperty,ia=Object.getOwnPropertySymbols,Nm=Object.prototype.hasOwnProperty,Vm=Object.prototype.propertyIsEnumerable,la=(e,t,n)=>t in e?$m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sr=(e,t)=>{for(var n in t||(t={}))Nm.call(t,n)&&la(e,n,t[n]);if(ia)for(var n of ia(t))Vm.call(t,n)&&la(e,n,t[n]);return e},ca=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const ar=({attribute:e,contentTypeUID:t,description:n,disabled:o,error:a,intlLabel:l,labelAction:i,name:c,onChange:u,value:d,placeholder:m,required:g})=>{const{modifiedData:f,initialData:h,layout:b}=(0,y.useCMEditViewDataManager)(),[E,S]=(0,r.useState)(!1),[C,O]=(0,r.useState)(null),F=aa(d,300),v=(0,r.useRef)(),R=h[c],{formatMessage:D}=(0,V.useIntl)(),T=I()(b,["options","timestamps",0]),U=!h[T],B=aa(f[e.targetField],300),[A,K]=(0,r.useState)(!1),[Z,N]=(0,r.useState)(null),k=l.id?D({id:l.id,defaultMessage:l.defaultMessage},sr({},l.values)):c,H=n?D({id:n.id,defaultMessage:n.defaultMessage},sr({},n.values)):"",x=m?D({id:m.id,defaultMessage:m.defaultMessage},sr({},m.values)):"";v.current=($=!1)=>ca(void 0,null,function*(){S(!0);const Q=fe("uid/generate");try{const{data:{data:ne}}=yield me.be.post(Q,{contentTypeUID:t,field:c,data:f});u({target:{name:c,value:ne,type:"text"}},$),S(!1)}catch(ne){S(!1)}});const G=()=>ca(void 0,null,function*(){S(!0);const $=fe("uid/check-availability");if(d)try{const{data:Q}=yield me.be.post($,{contentTypeUID:t,field:c,value:d?d.trim():""});O(Q),S(!1)}catch(Q){S(!1)}});(0,r.useEffect)(()=>{!d&&e.required&&v.current(!0)},[]),(0,r.useEffect)(()=>{F&&F.trim().match(Sm)&&F!==R&&G(),F||O(null)},[F,R]),(0,r.useEffect)(()=>{let $;return C&&C.isAvailable&&($=setTimeout(()=>{O(null)},4e3)),()=>{$&&clearTimeout($)}},[C]),(0,r.useEffect)(()=>{!A&&U&&B&&f[e.targetField]&&!d&&v.current(!0)},[B,A,U]);const w=()=>{N(D({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}))},M=()=>{N(null)},_=$=>{$.target.value&&U&&K(!0),u($)};return r.createElement(rr.o,{disabled:o,error:a,endAction:r.createElement(km,null,C&&C.isAvailable&&!Z&&r.createElement(or,{alignItems:"center",justifyContent:"flex-end"},r.createElement(Dm.default,null),r.createElement(z.Z,{textColor:"success600",variant:"pi"},D({id:"content-manager.components.uid.available",defaultMessage:"Available"}))),C&&!C.isAvailable&&!Z&&r.createElement(or,{notAvailable:!0,alignItems:"center",justifyContent:"flex-end"},r.createElement(xt.default,null),r.createElement(z.Z,{textColor:"danger600",variant:"pi"},D({id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"}))),Z&&r.createElement(or,{alignItems:"center",justifyContent:"flex-end"},r.createElement(z.Z,{textColor:"primary600",variant:"pi"},Z)),r.createElement(Fm,{onClick:()=>v.current(),label:"regenerate",onMouseEnter:w,onMouseLeave:M},E?r.createElement(jm,null,r.createElement(Lm.default,null)):r.createElement(sa.Z,null))),hint:H,label:k,labelAction:i,name:c,onChange:_,placeholder:x,value:d||"",required:g})};ar.propTypes={attribute:s().shape({targetField:s().string,required:s().bool}).isRequired,contentTypeUID:s().string.isRequired,description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,onChange:s().func.isRequired,value:s().string,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),required:s().bool},ar.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1};const qm=ar;var Bm=p(78718),ir=p.n(Bm),zm=p(88180),ua=p(37856),Zm=p(23620),da=p(52624),lr=p(39785),kt=p(84495),Wm=Object.defineProperty,on=Object.getOwnPropertySymbols,pa=Object.prototype.hasOwnProperty,ma=Object.prototype.propertyIsEnumerable,fa=(e,t,n)=>t in e?Wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_m=(e,t)=>{for(var n in t||(t={}))pa.call(t,n)&&fa(e,n,t[n]);if(on)for(var n of on(t))ma.call(t,n)&&fa(e,n,t[n]);return e},Um=(e,t)=>{var n={};for(var o in e)pa.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&on)for(var o of on(e))t.indexOf(o)<0&&ma.call(e,o)&&(n[o]=e[o]);return n};const cr=e=>{var t=e,{children:n,loadMore:o,search:a,totalNumberOfRelations:l,size:i}=t,c=Um(t,["children","loadMore","search","totalNumberOfRelations","size"]);return r.createElement(r.Fragment,null,r.createElement(q.k,{paddingBottom:l>0?3:0,gap:2,justifyContent:"space-between",alignItems:"end",wrap:"wrap"},r.createElement(ce.K,_m({basis:i<=6?"100%":"70%",spacing:1},c),a),o),n)};cr.defaultProps={search:void 0,loadMore:void 0,totalNumberOfRelations:0},cr.propTypes={children:s().node.isRequired,search:s().node,loadMore:s().node,size:s().number.isRequired,totalNumberOfRelations:s().number};var Hm=Object.defineProperty,sn=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,ya=Object.prototype.propertyIsEnumerable,ha=(e,t,n)=>t in e?Hm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gm=(e,t)=>{for(var n in t||(t={}))ga.call(t,n)&&ha(e,n,t[n]);if(sn)for(var n of sn(t))ya.call(t,n)&&ha(e,n,t[n]);return e},Km=(e,t)=>{var n={};for(var o in e)ga.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&sn)for(var o of sn(e))t.indexOf(o)<0&&ya.call(e,o)&&(n[o]=e[o]);return n};const Qm=(0,j.default)(q.k)`
  width: 100%;
  /* Used to prevent endAction to be pushed out of container */
  min-width: 0;
`,ur=e=>{var t=e,{children:n,disabled:o,endAction:a,style:l}=t,i=Km(t,["children","disabled","endAction","style"]);return r.createElement(L.x,{style:l,as:"li"},r.createElement(q.k,Gm({paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,hasRadius:!0,borderSize:1,background:o?"neutral150":"neutral0",borderColor:"neutral200",justifyContent:"space-between"},i),r.createElement(Qm,{justifyContent:"space-between"},n),a&&r.createElement(L.x,{paddingLeft:4},a)))};ur.defaultProps={disabled:!1,endAction:void 0,style:void 0},ur.propTypes={children:s().node.isRequired,disabled:s().bool,endAction:s().node,style:s().shape({height:s().number,left:s().number,position:s().string,right:s().number,width:s().string})};var Ym=Object.defineProperty,an=Object.getOwnPropertySymbols,ba=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable,Ea=(e,t,n)=>t in e?Ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jm=(e,t)=>{for(var n in t||(t={}))ba.call(t,n)&&Ea(e,n,t[n]);if(an)for(var n of an(t))va.call(t,n)&&Ea(e,n,t[n]);return e},Xm=(e,t)=>{var n={};for(var o in e)ba.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&an)for(var o of an(e))t.indexOf(o)<0&&va.call(e,o)&&(n[o]=e[o]);return n};const ef=(0,j.default)(L.x)`
  position: relative;
  overflow-x: hidden;
  overflow-y: auto;

  &:before,
  &:after {
    position: absolute;
    width: 100%;
    height: 4px;
    z-index: 1;
  }

  &:before {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: ${({overflowDirection:e})=>e==="top-bottom"||e==="top"?"''":void 0};
    background: linear-gradient(rgba(33, 33, 52, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
    top: 0;
  }

  &:after {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: ${({overflowDirection:e})=>e==="top-bottom"||e==="bottom"?"''":void 0};
    background: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(33, 33, 52, 0.1) 100%);
    bottom: 0;
  }
`,dr=e=>{var t=e,{children:n,overflow:o}=t,a=Xm(t,["children","overflow"]);return r.createElement(ef,Jm({overflowDirection:o},a),r.createElement(ce.K,{spacing:1},n))};dr.defaultProps={overflow:""},dr.propTypes={children:s().node.isRequired,overflow:s().oneOf(["top-bottom","bottom","top",""])};var tf=p(87583),nf=Object.defineProperty,Ca=Object.getOwnPropertySymbols,rf=Object.prototype.hasOwnProperty,of=Object.prototype.propertyIsEnumerable,Pa=(e,t,n)=>t in e?nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oa=(e,t)=>{for(var n in t||(t={}))rf.call(t,n)&&Pa(e,n,t[n]);if(Ca)for(var n of Ca(t))of.call(t,n)&&Pa(e,n,t[n]);return e};const sf=j.default.div`
  flex-shrink: 0;
  width: ${(0,y.pxToRem)(6)};
  height: ${(0,y.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
`,Ra=e=>{const{formatMessage:t}=(0,V.useIntl)(),n=tf.components.Option,{publicationState:o,mainField:a,id:l}=e.data;if(o){const i=o==="draft",c={id:P("components.Select.draft-info-title"),defaultMessage:"State: Draft"},u={id:P("components.Select.publish-info-title"),defaultMessage:"State: Published"},d=t(i?c:u);return r.createElement(n,Oa({},e),r.createElement(q.k,null,r.createElement(sf,{title:d,isDraft:i}),r.createElement(z.Z,{ellipsis:!0},a!=null?a:l)))}return r.createElement(n,Oa({},e),a!=null?a:l)};Ra.propTypes={isFocused:s().bool.isRequired,data:s().shape({id:s().number.isRequired,isDraft:s().bool,mainField:s().string,publicationState:s().oneOfType([s().string,s().bool])}).isRequired};const ln=50;var af=Object.defineProperty,lf=Object.defineProperties,cf=Object.getOwnPropertyDescriptors,wa=Object.getOwnPropertySymbols,uf=Object.prototype.hasOwnProperty,df=Object.prototype.propertyIsEnumerable,Ma=(e,t,n)=>t in e?af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pf=(e,t)=>{for(var n in t||(t={}))uf.call(t,n)&&Ma(e,n,t[n]);if(wa)for(var n of wa(t))df.call(t,n)&&Ma(e,n,t[n]);return e},mf=(e,t)=>lf(e,cf(t));const ff=(0,j.default)(Zm.r)`
  display: block;

  > span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
  }
`,gf=j.default.button`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }

  &:hover svg path,
  &:focus svg path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,pr=({description:e,disabled:t,error:n,id:o,name:a,numberOfRelationsToDisplay:l,label:i,labelAction:c,labelLoadMore:u,labelDisconnectRelation:d,loadingMessage:m,noRelationsMessage:g,onRelationConnect:f,onRelationLoadMore:h,onRelationDisconnect:b,onSearchNextPage:E,onSearch:S,placeholder:C,publicationStateTranslations:O,required:F,relations:v,searchResults:R,size:D})=>{var T;const[U,B]=(0,r.useState)(null),A=(0,r.useRef)(),K=(0,r.useRef)(),[Z,N]=(0,r.useState)(""),{data:k}=R,H=v.data,x=(T=H.length)!=null?T:0,G=(0,r.useMemo)(()=>x>l?Math.min(x,l)*ln+ln/2:Math.min(x,l)*ln,[x,l]),w=!!u&&!t&&v.hasNextPage||v.isLoading,M=(0,r.useMemo)(()=>k.flat().filter(Boolean).map(ve=>mf(pf({},ve),{value:ve.id,label:ve.mainField})),[k]);(0,r.useEffect)(()=>{if(x<=l)return N("");const ve=Be=>{const Ke=Be.target.parentNode.scrollHeight,Qe=Be.target.scrollHeight-Be.target.scrollTop;return Be.target.scrollTop===0?N("bottom"):N(Qe===Ke?"top":"top-bottom")},Ae=K==null?void 0:K.current;return!v.isLoading&&H.length>0&&Ae&&K.current.addEventListener("scroll",ve),()=>{Ae&&Ae.removeEventListener("scroll",ve)}},[v,H,l,x]);const[_,$]=(0,r.useState)(!1),Q=(0,r.useRef)(),ne=(0,r.useRef)([]);(0,r.useEffect)(()=>(M.length>0&&ne.current.length===0&&$(ve=>(ve&&(Q.current=setTimeout(()=>{$(!0)},10)),!1)),()=>{ne.current=M||[]}),[M]),(0,r.useEffect)(()=>()=>{Q.current&&clearTimeout(Q.current)},[]);const re=()=>{$(!1)},he=()=>{$(!0),S()},W=bs(H.length),ue=(0,r.useRef)(),_e=()=>{ue.current="loadMore",h()};return(0,r.useEffect)(()=>{ue.current==="onChange"&&H.length!==W?A.current.scrollToItem(H.length,"end"):ue.current==="loadMore"&&H.length!==W&&A.current.scrollToItem(0,"start")},[W,H]),r.createElement(oa.g,{error:n,name:a,hint:e,id:o,required:F},r.createElement(cr,{totalNumberOfRelations:x,size:D,search:r.createElement(r.Fragment,null,r.createElement(ta.Q,{action:c},i),r.createElement(y.ReactSelect,{menuPosition:"absolute",menuPlacement:"auto",components:{Option:Ra},options:M,isDisabled:t,isLoading:R.isLoading,error:n,inputId:o,isSearchable:!0,isClear:!0,loadingMessage:()=>m,onChange:ve=>{B(null),f(ve),ue.current="onChange"},onInputChange:ve=>{B(ve),S(ve)},onMenuClose:re,onMenuOpen:he,menuIsOpen:_,noOptionsMessage:()=>g,onMenuScrollToBottom:()=>{R.hasNextPage&&E()},placeholder:C,name:a,value:U})),loadMore:w&&r.createElement(lr.A,{disabled:v.isLoading||v.isFetchingNextPage,onClick:_e,loading:v.isLoading||v.isFetchingNextPage,startIcon:r.createElement(sa.Z,null)},u)},r.createElement(dr,{overflow:Z},r.createElement(zm.t7,{height:G,ref:A,outerRef:K,itemCount:x,itemSize:ln,itemData:H,innerElementType:"ol"},({data:ve,index:Ae,style:Be})=>{const{publicationState:Ke,href:Qe,mainField:Ee,id:je}=ve[Ae],Pt=Ke==="draft"?"secondary":"success";return r.createElement(ur,{disabled:t,key:`relation-${a}-${je}`,endAction:r.createElement(gf,{"data-testid":`remove-relation-${je}`,disabled:t,type:"button",onClick:()=>b(ve[Ae]),"aria-label":d},r.createElement(da.J,{width:"12px",as:kn.default})),style:Be},r.createElement(L.x,{minWidth:0,paddingTop:1,paddingBottom:1,paddingRight:4},r.createElement(kt.u,{description:Ee!=null?Ee:`${je}`},Qe?r.createElement(ff,{to:Qe,disabled:t},Ee!=null?Ee:je):r.createElement(z.Z,{textColor:t?"neutral600":"primary600",ellipsis:!0},Ee!=null?Ee:je))),Ke&&r.createElement(ua.q,{variant:Pt,showBullet:!1,size:"S"},r.createElement(z.Z,{fontWeight:"bold",textColor:`${Pt}700`},O[Ke])))})),(e||n)&&r.createElement(L.x,{paddingTop:2},r.createElement(Xs.J,null),r.createElement(ea.c,null))))},yf=s().shape({data:s().arrayOf(s().shape({href:s().string,id:s().number.isRequired,publicationState:s().oneOfType([s().string,s().bool]),mainField:s().oneOfType([s().string,s().number])})),hasNextPage:s().bool,isFetchingNextPage:s().bool.isRequired,isLoading:s().bool.isRequired,isSuccess:s().bool.isRequired}),hf=s().shape({data:s().arrayOf(s().shape({id:s().number.isRequired,href:s().string,mainField:s().oneOfType([s().string,s().number]),publicationState:s().oneOfType([s().string,s().bool])})),hasNextPage:s().bool,isLoading:s().bool.isRequired,isSuccess:s().bool.isRequired});pr.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:null,labelLoadMore:null,required:!1,relations:{data:[]},searchResults:{data:[]}},pr.propTypes={error:s().string,description:s().string,disabled:s().bool,id:s().string.isRequired,label:s().string.isRequired,labelAction:s().element,labelLoadMore:s().string,labelDisconnectRelation:s().string.isRequired,loadingMessage:s().string.isRequired,name:s().string.isRequired,noRelationsMessage:s().string.isRequired,numberOfRelationsToDisplay:s().number.isRequired,onRelationConnect:s().func.isRequired,onRelationDisconnect:s().func.isRequired,onRelationLoadMore:s().func.isRequired,onSearch:s().func.isRequired,onSearchNextPage:s().func.isRequired,placeholder:s().string.isRequired,publicationStateTranslations:s().shape({draft:s().string.isRequired,published:s().string.isRequired}).isRequired,required:s().bool,searchResults:hf,size:s().number.isRequired,relations:yf};const bf=pr;var it=p(23724),vf=Object.defineProperty,Ta=Object.getOwnPropertySymbols,Ef=Object.prototype.hasOwnProperty,Cf=Object.prototype.propertyIsEnumerable,Ia=(e,t,n)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Da=(e,t)=>{for(var n in t||(t={}))Ef.call(t,n)&&Ia(e,n,t[n]);if(Ta)for(var n of Ta(t))Cf.call(t,n)&&Ia(e,n,t[n]);return e};function Pf(e,t){return n=>{const o=t(n);return r.createElement(e,Da(Da({},n),o))}}const Of=Pf;var Rf=Object.defineProperty,wf=Object.defineProperties,Mf=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,Tf=Object.prototype.hasOwnProperty,If=Object.prototype.propertyIsEnumerable,Sa=(e,t,n)=>t in e?Rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Df=(e,t)=>{for(var n in t||(t={}))Tf.call(t,n)&&Sa(e,n,t[n]);if(La)for(var n of La(t))If.call(t,n)&&Sa(e,n,t[n]);return e},Lf=(e,t)=>wf(e,Mf(t));function Sf({componentUid:e,isUserAllowedToEditField:t,isUserAllowedToReadField:n,name:o,queryInfos:a}){var l;const{isCreatingEntry:i,createActionAllowedFields:c,readActionAllowedFields:u,updateActionAllowedFields:d,slug:m,initialData:g}=(0,y.useCMEditViewDataManager)(),f=(0,r.useMemo)(()=>t===!0?!0:(i?c:d).includes(o),[i,c,o,t,d]),h=(0,r.useMemo)(()=>n?!0:(i?[]:u).includes(o),[i,n,o,u]),b=o.split(".");let E;e&&(E=(l=I()(g,b.slice(0,-1)))==null?void 0:l.id);const S=(0,r.useMemo)(()=>i?null:e?E?fe(`relations/${e}/${E}/${b.at(-1)}`):null:fe(`relations/${m}/${g.id}/${o.split(".").at(-1)}`),[i,e,m,g.id,o,E,b]),C=(0,r.useMemo)(()=>fe(e?`relations/${e}/${o.split(".").at(-1)}`:`relations/${m}/${o.split(".").at(-1)}`),[e,m,o]);return{componentId:E,isComponentRelation:Boolean(e),queryInfos:Lf(Df({},a),{endpoints:{search:C,relation:S}}),isCreatingEntry:i,isFieldAllowed:f,isFieldReadable:h}}const xf=Sf;function kf(e,t){return`${fe(`collectionType/${e}/${t!=null?t:""}`)}`}const cn={DRAFT:"draft",PUBLISHED:"published"},mr=5,Ff=10;var Af=Object.defineProperty,xa=Object.getOwnPropertySymbols,jf=Object.prototype.hasOwnProperty,$f=Object.prototype.propertyIsEnumerable,ka=(e,t,n)=>t in e?Af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nf=(e,t)=>{for(var n in t||(t={}))jf.call(t,n)&&ka(e,n,t[n]);if(xa)for(var n of xa(t))$f.call(t,n)&&ka(e,n,t[n]);return e};const fr=(e,{shouldAddLink:t,mainFieldName:n,targetModel:o})=>{const a=Nf({},e);return t&&(a.href=kf(o,a.id)),a.publicationState=!1,(a==null?void 0:a.publishedAt)!==void 0&&(a.publicationState=a.publishedAt?cn.PUBLISHED:cn.DRAFT),a.mainField=a[n],a},Vf=(e,{shouldAddLink:t=!1,mainFieldName:n,targetModel:o}={})=>[...e].map(a=>fr(a,{shouldAddLink:t,mainFieldName:n,targetModel:o}));var qf=Object.defineProperty,Bf=Object.defineProperties,zf=Object.getOwnPropertyDescriptors,Fa=Object.getOwnPropertySymbols,Zf=Object.prototype.hasOwnProperty,Wf=Object.prototype.propertyIsEnumerable,Aa=(e,t,n)=>t in e?qf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_f=(e,t)=>{for(var n in t||(t={}))Zf.call(t,n)&&Aa(e,n,t[n]);if(Fa)for(var n of Fa(t))Wf.call(t,n)&&Aa(e,n,t[n]);return e},Uf=(e,t)=>Bf(e,zf(t));const Hf=(e,{mainFieldName:t})=>{const{data:n}=e,{pages:o=[]}=n!=null?n:{};return Uf(_f({},e),{data:o.map(a=>a==null?void 0:a.results.map(l=>fr(l,{mainFieldName:t}))).filter(Boolean).flat()})},Gf=(e=[],t=[])=>{const n=e.reduce((a,l)=>t.find(i=>i.id===l.id)?a:[...a,l.id],[]),o=t.reduce((a,l)=>e.find(i=>i.id===l.id)?a:[...a,l.id],[]);return[n,o]};var Kf=Object.defineProperty,Qf=Object.defineProperties,Yf=Object.getOwnPropertyDescriptors,ja=Object.getOwnPropertySymbols,Jf=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable,$a=(e,t,n)=>t in e?Kf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ft=(e,t)=>{for(var n in t||(t={}))Jf.call(t,n)&&$a(e,n,t[n]);if(ja)for(var n of ja(t))Xf.call(t,n)&&$a(e,n,t[n]);return e},un=(e,t)=>Qf(e,Yf(t)),Na=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const eg=(e,{name:t,relation:n,search:o})=>{const[a,l]=(0,r.useState)({}),[i,c]=(0,r.useState)(0),u=v=>Na(void 0,[v],function*({pageParam:R=1}){var D;try{const{data:T}=yield me.be.get(n==null?void 0:n.endpoint,{params:un(Ft({},(D=n.pageParams)!=null?D:{}),{page:R})});return c(R),T}catch(T){return null}}),d=v=>Na(void 0,[v],function*({pageParam:R=1}){var D;try{const{data:T}=yield me.be.get(o.endpoint,{params:un(Ft(Ft({},(D=o.pageParams)!=null?D:{}),a),{page:R})});return T}catch(T){return null}}),{onLoad:m,normalizeArguments:g={}}=n,f=(0,it.useInfiniteQuery)(["relation",e],u,{cacheTime:0,enabled:n.enabled,getNextPageParam(v){const R=!(v!=null&&v.pagination);if(!(!v||R||(v==null?void 0:v.pagination.page)>=(v==null?void 0:v.pagination.pageCount)))return v.pagination.page+1},select:v=>un(Ft({},v),{pages:v.pages.map(R=>{if(!R)return R;const{data:D,results:T,pagination:U}=R,B=!!D;let A=[];return B?A=[D]:T&&(A=[...T].reverse()),{pagination:U,results:A}})})}),{pageGoal:h}=n,{status:b,data:E,fetchNextPage:S,hasNextPage:C}=f;(0,r.useEffect)(()=>{h>i&&C&&b==="success"&&S({pageParam:i+1})},[h,i,S,C,b]),(0,r.useEffect)(()=>{var v,R;if(b==="success"&&E&&((R=(v=E.pages)==null?void 0:v.at(-1))!=null&&R.results)&&m){const D=Vf(E.pages.at(-1).results,g);m({target:{name:t,value:D}})}},[b,m,t,E]);const O=(0,it.useInfiniteQuery)(["relation",e,"search",JSON.stringify(a)],d,{enabled:Object.keys(a).length>0,getNextPageParam(v){if(!(!(v!=null&&v.pagination)||v.pagination.page>=v.pagination.pageCount))return v.pagination.page+1}});return{relations:f,search:O,searchFor:(v,R={})=>{l(un(Ft({},R),{_q:v}))}}};var tg=Object.defineProperty,ng=Object.defineProperties,rg=Object.getOwnPropertyDescriptors,Va=Object.getOwnPropertySymbols,og=Object.prototype.hasOwnProperty,sg=Object.prototype.propertyIsEnumerable,qa=(e,t,n)=>t in e?tg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gr=(e,t)=>{for(var n in t||(t={}))og.call(t,n)&&qa(e,n,t[n]);if(Va)for(var n of Va(t))sg.call(t,n)&&qa(e,n,t[n]);return e},yr=(e,t)=>ng(e,rg(t));const hr=({error:e,componentId:t,isComponentRelation:n,editable:o,description:a,intlLabel:l,isCreatingEntry:i,isFieldAllowed:c,isFieldReadable:u,labelAction:d,mainField:m,name:g,queryInfos:{endpoints:f,defaultParams:h,shouldDisplayRelationLink:b},placeholder:E,required:S,relationType:C,size:O,targetModel:F})=>{var v,R,D,T,U,B;const{formatMessage:A}=(0,V.useIntl)(),{connectRelation:K,disconnectRelation:Z,loadRelation:N,modifiedData:k,slug:H,initialData:x}=(0,y.useCMEditViewDataManager)(),G=I()(k,g,[]),w=Math.ceil(I()(x,g,[]).length/mr),{relations:M,search:_,searchFor:$}=eg(`${H}-${g}-${(v=x==null?void 0:x.id)!=null?v:""}`,{name:g,relation:{enabled:!!f.relation,endpoint:f.relation,pageGoal:w,pageParams:yr(gr({},h),{pageSize:mr}),onLoad:N,normalizeArguments:{mainFieldName:m.name,shouldAddLink:b,targetModel:F}},search:{endpoint:f.search,pageParams:yr(gr({},h),{entityId:i?void 0:n?t:x.id,pageSize:Ff})}}),Q=(0,r.useMemo)(()=>C.toLowerCase().includes("morph"),[C]),ne=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(C),re=(0,r.useMemo)(()=>Q?!0:i?!o:!c&&u||!o,[Q,i,o,c,u]),he=Ee=>{const je=fr(Ee,{mainFieldName:m.name,shouldAddLink:b,targetModel:F});K({name:g,value:je,toOneRelation:ne})},W=Ee=>{Z({name:g,id:Ee.id})},ue=()=>{M.fetchNextPage()},_e=(Ee="")=>{const[je,Pt]=Gf(G,I()(x,g));$(Ee,{idsToInclude:Pt,idsToOmit:je})},ve=()=>{_.fetchNextPage()};if(!c&&i||!i&&!c&&!u)return r.createElement(y.NotAllowedInput,{name:g,intlLabel:l,labelAction:d});const Ae=G.length,Be=((R=I()(x,g))!=null?R:[]).length,Ke=(B=(U=(T=(D=M.data)==null?void 0:D.pages[0])==null?void 0:T.pagination)==null?void 0:U.total)!=null?B:0,Qe=!M.data&&Ae===Be?Ae:Ae-Be+Ke;return r.createElement(bf,{error:e,description:a,disabled:re,id:g,label:`${A({id:l.id,defaultMessage:l.defaultMessage})} ${Qe>0?`(${Qe})`:""}`,labelAction:d,labelLoadMore:i?null:A({id:P("relation.loadMore"),defaultMessage:"Load More"}),labelDisconnectRelation:A({id:P("relation.disconnect"),defaultMessage:"Remove"}),listHeight:320,loadingMessage:A({id:P("relation.isLoading"),defaultMessage:"Relations are loading"}),name:g,noRelationsMessage:A({id:P("relation.notAvailable"),defaultMessage:"No relations available"}),numberOfRelationsToDisplay:mr,onRelationConnect:Ee=>he(Ee),onRelationDisconnect:Ee=>W(Ee),onRelationLoadMore:()=>ue(),onSearch:Ee=>_e(Ee),onSearchNextPage:()=>ve(),placeholder:A(E||{id:P("relation.add"),defaultMessage:"Add relation"}),publicationStateTranslations:{[cn.DRAFT]:A({id:P("relation.publicationState.draft"),defaultMessage:"Draft"}),[cn.PUBLISHED]:A({id:P("relation.publicationState.published"),defaultMessage:"Published"})},relations:ir()(yr(gr({},M),{data:G}),"data","hasNextPage","isFetchingNextPage","isLoading","isSuccess"),required:S,searchResults:Hf(_,{mainFieldName:m.name}),size:O})};hr.defaultProps={componentId:void 0,editable:!0,error:void 0,description:"",labelAction:null,isComponentRelation:!1,isFieldAllowed:!0,placeholder:null,required:!1},hr.propTypes={componentId:s().number,editable:s().bool,error:s().string,description:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,isCreatingEntry:s().bool.isRequired,isComponentRelation:s().bool,isFieldAllowed:s().bool,isFieldReadable:s().bool.isRequired,mainField:s().shape({name:s().string.isRequired,schema:s().shape({type:s().string.isRequired}).isRequired}).isRequired,name:s().string.isRequired,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),required:s().bool,relationType:s().string.isRequired,size:s().number.isRequired,targetModel:s().string.isRequired,queryInfos:s().shape({defaultParams:s().shape({locale:s().string}),endpoints:s().shape({relation:s().string,search:s().string.isRequired}).isRequired,shouldDisplayRelationLink:s().bool.isRequired}).isRequired};const ag=(0,r.memo)(hr),ig=Of(ag,xf);var lg=Object.defineProperty,Ba=Object.getOwnPropertySymbols,cg=Object.prototype.hasOwnProperty,ug=Object.prototype.propertyIsEnumerable,za=(e,t,n)=>t in e?lg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Za=(e,t)=>{for(var n in t||(t={}))cg.call(t,n)&&za(e,n,t[n]);if(Ba)for(var n of Ba(t))ug.call(t,n)&&za(e,n,t[n]);return e};function dg(e,t){return n=>{const o=t(n.keys);return r.createElement(e,Za(Za({},n),o))}}const pg=dg,mg=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],fg=(e="")=>{switch((0,Y.toLower)(e)){case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}},gg=e=>{let t;return e==="float"||e==="decimal"?t=.01:t=1,t};function yg(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:o,modifiedData:a,onChange:l,readActionAllowedFields:i,shouldNotRunValidations:c,updateActionAllowedFields:u}=(0,y.useCMEditViewDataManager)(),d=(0,r.useMemo)(()=>o?t:u,[o,t,u]),m=(0,r.useMemo)(()=>o?[]:i,[o,i]),g=(0,Y.get)(a,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:o,onChange:l,readableFields:m,shouldNotRunValidations:c,value:g}}const hg=yg,Wa=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];var bg=Object.defineProperty,vg=Object.defineProperties,Eg=Object.getOwnPropertyDescriptors,_a=Object.getOwnPropertySymbols,Cg=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable,Ua=(e,t,n)=>t in e?bg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dn=(e,t)=>{for(var n in t||(t={}))Cg.call(t,n)&&Ua(e,n,t[n]);if(_a)for(var n of _a(t))Pg.call(t,n)&&Ua(e,n,t[n]);return e},Og=(e,t)=>vg(e,Eg(t));function br({allowedFields:e,componentUid:t,fieldSchema:n,formErrors:o,isCreatingEntry:a,keys:l,labelAction:i,metadatas:c,onChange:u,readableFields:d,shouldNotRunValidations:m,queryInfos:g,value:f,size:h,customFieldInputs:b}){const{fields:E}=(0,y.useLibrary)(),{formatMessage:S}=(0,V.useIntl)(),{contentType:C}=Je(),O=(0,r.useMemo)(()=>!I()(c,"editable",!0),[c]),{type:F,customField:v}=n,R=I()(o,[l],null),D=(0,r.useMemo)(()=>_o(l),[l]),T=(0,r.useMemo)(()=>{const re=qd()(n,m?[...Wa,"required","minLength"]:Wa),he=n.regex||null;if(he){const W=new RegExp(he);W&&(re.regex=W)}return re},[n,m]),U=(0,r.useMemo)(()=>I()(T,["required"],!1),[T]),B=(0,r.useMemo)(()=>{const re=I()(C,["attributes"],{});return I()(re,[D[0],"type"],null)==="dynamiczone"},[C,D]),A=(0,r.useMemo)(()=>fg(F),[F]),K=(0,r.useMemo)(()=>F==="media"&&!f?[]:f,[F,f]),Z=(0,r.useMemo)(()=>gg(F),[F]),N=(0,r.useMemo)(()=>{const re=D.join(".");if(e.includes(re))return!0;if(B)return e.includes(D[0]);if(D.length>1){const W=Wn()(D,D.length-1).join(".");return e.includes(W)}return!1},[e,D,B]),k=(0,r.useMemo)(()=>{const re=D.join(".");if(d.includes(re))return!0;if(B)return d.includes(D[0]);if(D.length>1){const W=Wn()(D,D.length-1).join(".");return d.includes(W)}return!1},[d,D,B]),H=(0,r.useMemo)(()=>k||N,[N,k]),x=(0,r.useMemo)(()=>a?O:k&&!N?!0:O,[O,a,N,k]),G=(0,r.useMemo)(()=>mg(n.enum||[],U),[n,U]),{label:w,description:M,placeholder:_,visible:$}=c,Q=(0,r.useMemo)(()=>{if(!c.step||A!=="datetime"&&A!=="time")return Z;if(!K)return c.step;let re;return A==="datetime"?re=parseInt(K.substr(14,2),10):A==="time"&&(re=parseInt(K.slice(-2),10)),re%c.step===0?c.step:Z},[A,K,c.step,Z]);if($===!1)return null;if(!H)return r.createElement(y.NotAllowedInput,{description:M?{id:M,defaultMessage:M}:null,intlLabel:{id:w,defaultMessage:w},labelAction:i,error:R&&S(R),name:l,required:U});if(F==="relation")return r.createElement(ig,Og(dn(dn({},c),n),{componentUid:t,description:c.description?S({id:c.description,defaultMessage:c.description}):void 0,intlLabel:{id:c.label,defaultMessage:c.label},labelAction:i,isUserAllowedToEditField:N,isUserAllowedToReadField:k,name:l,placeholder:c.placeholder?{id:c.placeholder,defaultMessage:c.placeholder}:null,queryInfos:g,size:h,value:f,error:R&&S(R)}));const ne=dn(dn({json:Im,uid:qm,media:E.media,wysiwyg:dm},E),b);return r.createElement(y.GenericInput,{attribute:n,autoComplete:"new-password",intlLabel:{id:w,defaultMessage:w},isNullable:A==="bool"&&[null,void 0].includes(n.default),description:M?{id:M,defaultMessage:M}:null,disabled:x,error:R,labelAction:i,contentTypeUID:C.uid,customInputs:ne,multiple:n.multiple||!1,name:l,onChange:u,options:G,placeholder:_?{id:_,defaultMessage:_}:null,required:n.required||!1,step:Q,type:v||A,value:K,withDefaultValue:!1})}br.defaultProps={componentUid:void 0,formErrors:{},labelAction:void 0,size:void 0,value:null,queryInfos:{},customFieldInputs:{}},br.propTypes={allowedFields:s().array.isRequired,componentUid:s().string,fieldSchema:s().object.isRequired,formErrors:s().object,keys:s().string.isRequired,isCreatingEntry:s().bool.isRequired,labelAction:s().element,metadatas:s().object.isRequired,onChange:s().func.isRequired,readableFields:s().array.isRequired,size:s().number,shouldNotRunValidations:s().bool.isRequired,value:s().any,queryInfos:s().shape({containsKey:s().string,defaultParams:s().object,endPoint:s().string}),customFieldInputs:s().object};const Rg=(0,r.memo)(br,Xe()),vr=pg(Rg,hg);var wg=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const yt=new Map,Er=(e=[])=>{const[t,n]=(0,r.useState)(Object.fromEntries(yt)),[o,a]=(0,r.useState)(()=>yt.size===0&&e.length>0),l=(0,y.useCustomFields)();(0,r.useEffect)(()=>{const c=d=>{n(d),a(!1)},u=(d,m)=>wg(void 0,null,function*(){const g=yield Promise.all(m);d.forEach((f,h)=>{yt.set(f,g[h].default)}),c(Object.fromEntries(yt))});if(e.length&&o){const d=e.filter(g=>!yt.get(g)),m=d.map(g=>l.get(g).components.Input());m.length>0&&u(d,m)}},[e,l,o]);const i=(0,r.useCallback)(()=>{yt.clear(),n({})},[]);return{isLazyLoading:o,lazyComponentStore:t,cleanup:i}},Cr=({componentUid:e,isFromDynamicZone:t,isNested:n,name:o})=>{const{getComponentLayout:a}=Je(),i=(0,r.useMemo)(()=>a(e),[e,a]).layouts.edit,{lazyComponentStore:c}=Er();return r.createElement(L.x,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":""},r.createElement(ce.K,{spacing:6},i.map((u,d)=>r.createElement(qe.r,{gap:4,key:d},u.map(({name:m,size:g,metadatas:f,fieldSchema:h,queryInfos:b})=>{const E=h.type==="component",S=`${o}.${m}`;if(E){const C=h.component;return r.createElement(Ce.P,{col:g,s:12,xs:12,key:m},r.createElement(pn,{componentUid:C,intlLabel:{id:f.label,defaultMessage:f.label},isNested:!0,isRepeatable:h.repeatable,max:h.max,min:h.min,name:S,required:h.required||!1}))}return r.createElement(Ce.P,{col:g,key:m,s:12,xs:12},r.createElement(vr,{componentUid:e,keys:S,fieldSchema:h,metadatas:f,queryInfos:b,size:g,customFieldInputs:c}))})))))};Cr.defaultProps={isFromDynamicZone:!1,isNested:!1},Cr.propTypes={componentUid:s().string.isRequired,isFromDynamicZone:s().bool,isNested:s().bool,name:s().string.isRequired};const Mg=Cr;var At=p(96315),Tg=Object.defineProperty,Ha=Object.getOwnPropertySymbols,Ig=Object.prototype.hasOwnProperty,Dg=Object.prototype.propertyIsEnumerable,Ga=(e,t,n)=>t in e?Tg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ka=(e,t)=>{for(var n in t||(t={}))Ig.call(t,n)&&Ga(e,n,t[n]);if(Ha)for(var n of Ha(t))Dg.call(t,n)&&Ga(e,n,t[n]);return e};function Lg(e,t){return n=>{const o=t(n);return r.createElement(e,Ka(Ka({},n),o))}}const Sg=Lg;function xg(){const{addRepeatableComponentToField:e,formErrors:t}=(0,y.useCMEditViewDataManager)();return{addRepeatableComponentToField:e,formErrors:t}}const kg=xg;function Fg(e,t){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}var Pr=p(61080),Ag=p(79833),Qa=p.n(Ag);const jg=j.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,$g=()=>r.createElement(jg,{padding:6,background:"primary100"}),Ng=(0,j.default)(Re.h)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,Ya=(0,j.default)(Re.h)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,Vg=j.default.span`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>e.spaces[4]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  height: ${50/16}rem;
`,qg=(0,j.default)(lr.A)`
  text-align: left;

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral500};
    }
  }
`,Ja=({displayedValue:e})=>r.createElement(Vg,null,r.createElement(ce.K,{horizontal:!0,spacing:3,flex:1},r.createElement(q.k,{justifyContent:"center",borderRadius:"50%",height:`${24/16}rem}`,width:`${24/16}rem}`,"aria-hidden":!0,as:"span",background:"neutral200"},r.createElement(da.J,{as:Io.default,width:`${8/16}rem}`,color:"neutral600"})),r.createElement(qg,{onClick:()=>{},flex:1},r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral700"},e))),r.createElement(ce.K,{horizontal:!0,spacing:0},r.createElement(Ya,{noBorder:!0,onClick:()=>{},icon:r.createElement(ze.default,null)}),r.createElement(Ya,{icon:r.createElement(pt.Z,null),noBorder:!0})));Ja.propTypes={displayedValue:s().string.isRequired};const Bg=Ja;var zg=Object.defineProperty,Xa=Object.getOwnPropertySymbols,Zg=Object.prototype.hasOwnProperty,Wg=Object.prototype.propertyIsEnumerable,ei=(e,t,n)=>t in e?zg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ti=(e,t)=>{for(var n in t||(t={}))Zg.call(t,n)&&ei(e,n,t[n]);if(Xa)for(var n of Xa(t))Wg.call(t,n)&&ei(e,n,t[n]);return e};function _g(e,t){return n=>{const o=t(n);return r.createElement(e,ti(ti({},n),o))}}const Ug=_g;function Hg({schema:e,componentFieldName:t}){const{checkFormErrors:n,modifiedData:o,moveComponentField:a,removeRepeatableField:l,triggerFormValidation:i}=(0,y.useCMEditViewDataManager)(),c=(0,r.useMemo)(()=>(0,Y.get)(e,["settings","mainField"],"id"),[e]);return{displayedValue:(0,Y.toString)((0,Y.get)(o,[...t.split("."),c],"")),mainField:c,checkFormErrors:n,moveComponentField:a,removeRepeatableField:l,schema:e,triggerFormValidation:i}}const Gg=Hg,Kg=j.default.span`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  padding: 0 ${({theme:e})=>e.spaces[3]};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Or=({componentFieldName:e,componentUid:t,hasErrorMessage:n,hasErrors:o,isDraggingSibling:a,isOpen:l,isReadOnly:i,onClickToggle:c,schema:u,toggleCollapses:d,moveComponentField:m,removeRepeatableField:g,setIsDraggingSibling:f,triggerFormValidation:h,displayedValue:b})=>{const E=(0,r.useRef)(null),S=(0,r.useRef)(null),[,C]=(0,r.useState)(!1),{formatMessage:O}=(0,V.useIntl)(),F=u.layouts.edit,[,v]=(0,ke.useDrop)({accept:Le.COMPONENT,canDrop(){return!1},hover(Z,N){if(!S.current)return;const k=Z.originalPath,H=e,x=k.split("."),G=x.slice().splice(-1).join(""),w=H.split(".").splice(-1).join(""),M=x.slice(0,x.length-1),_=parseInt(G,10),$=parseInt(w,10);if(_===$)return;const Q=S.current.getBoundingClientRect(),ne=(Q.bottom-Q.top)/2,he=N.getClientOffset().y-Q.top;_<$&&he<ne||_>$&&he>ne||k.split(".").length===H.split(".").length&&(m(M,_,$),Z.originalPath=H)}}),[{isDragging:R},D,T]=(0,ke.useDrag)({type:Le.COMPONENT,item(){return d(-1),{displayedValue:b,originalPath:e}},end(){h(),f(!1)},collect:Z=>({isDragging:Z.isDragging()})});(0,r.useEffect)(()=>{T((0,Pr.rX)(),{captureDraggingState:!1})},[T]),(0,r.useEffect)(()=>{R&&f(!0)},[R,f]),(0,r.useEffect)(()=>{a||C(Z=>!Z)},[a]);const U={dragRef:D(E),dropRef:v(S)},B=Qa()(b),A=o?"error":void 0,{lazyComponentStore:K}=Er();return r.createElement(L.x,{ref:U?U.dropRef:null},R&&r.createElement($g,null),!R&&a&&r.createElement(Bg,{displayedValue:B,componentFieldName:e}),!R&&!a&&r.createElement(qn.U,{error:A,hasErrorMessage:n,expanded:l,onToggle:c,id:e,size:"S"},r.createElement(Bn.B,{action:i?null:r.createElement(ce.K,{horizontal:!0,spacing:0},r.createElement(Ng,{expanded:l,noBorder:!0,onClick:()=>{g(e),d()},label:O({id:P("containers.Edit.delete"),defaultMessage:"Delete"}),icon:r.createElement(ze.default,null)}),r.createElement(kt.u,{description:O({id:P("components.DragHandle-label"),defaultMessage:"Drag"})},r.createElement(Kg,{role:"button",tabIndex:-1,ref:U.dragRef,onClick:Z=>Z.stopPropagation()},r.createElement(pt.Z,null)))),title:B,togglePosition:"left"}),r.createElement(zn.v,null,r.createElement(ce.K,{background:"neutral100",padding:6,spacing:6},F.map((Z,N)=>r.createElement(qe.r,{gap:4,key:N},Z.map(({name:k,fieldSchema:H,metadatas:x,queryInfos:G,size:w})=>{const M=H.type==="component",_=`${e}.${k}`;if(M){const $=H.component;return r.createElement(Ce.P,{col:w,s:12,xs:12,key:k},r.createElement(pn,{componentUid:$,intlLabel:{id:x.label,defaultMessage:x.label},isRepeatable:H.repeatable,isNested:!0,name:_,max:H.max,min:H.min,required:H.required}))}return r.createElement(Ce.P,{key:_,col:w,s:12,xs:12},r.createElement(vr,{componentUid:t,fieldSchema:H,keys:_,metadatas:x,queryInfos:G,size:w,customFieldInputs:K}))})))))))};Or.defaultProps={componentUid:void 0,isDraggingSibling:!1,isOpen:!1,setIsDraggingSibling(){},toggleCollapses(){}},Or.propTypes={componentFieldName:s().string.isRequired,componentUid:s().string,hasErrorMessage:s().bool.isRequired,hasErrors:s().bool.isRequired,isDraggingSibling:s().bool,isOpen:s().bool,isReadOnly:s().bool.isRequired,onClickToggle:s().func.isRequired,schema:s().object.isRequired,toggleCollapses:s().func,moveComponentField:s().func.isRequired,removeRepeatableField:s().func.isRequired,setIsDraggingSibling:s().func,triggerFormValidation:s().func.isRequired,displayedValue:s().string.isRequired};const Qg=(0,r.memo)(Or),Yg=Ug(Qg,Gg);var ni=p(17373),Jg=Object.defineProperty,ri=Object.getOwnPropertySymbols,Xg=Object.prototype.hasOwnProperty,ey=Object.prototype.propertyIsEnumerable,oi=(e,t,n)=>t in e?Jg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ty=(e,t)=>{for(var n in t||(t={}))Xg.call(t,n)&&oi(e,n,t[n]);if(ri)for(var n of ri(t))ey.call(t,n)&&oi(e,n,t[n]);return e};const ny=(0,j.default)(L.x)`
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,ry=(0,j.default)(L.x)`
  > div {
    & > * {
      border-radius: unset;
      border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    > div {
      > div:first-of-type {
        border-radius: unset;
      }
    }
  }

  > div:first-of-type {
    > div {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      > div:first-of-type {
        border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      }
    }

    > div:not([data-strapi-expanded='true']) {
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};

      &:hover {
        border-top: 1px solid ${({theme:e})=>e.colors.primary600};
      }
    }

    > span {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
  }

  & [data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }

  ${({theme:e,footer:t})=>`
    &:not(${t}) {
      & > *:last-of-type {
        border-radius: 0 0 ${e.borderRadius} ${e.borderRadius};
      }
    }
  `}
`,oy=(0,j.default)(L.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Rr=({children:e,footer:t,label:n,labelAction:o,error:a})=>{const{formatMessage:l}=(0,V.useIntl)(),i=r.Children.toArray(e).map(c=>(0,r.cloneElement)(c,{hasErrorMessage:!1}));return r.createElement(ni.k,{attributeName:"data-strapi-accordion-toggle"},n&&r.createElement(q.k,{paddingBottom:1},r.createElement(z.Z,{as:"label",textColor:"neutral800",variant:"pi",fontWeight:"bold"},n),o&&r.createElement(oy,{paddingLeft:1},o)),r.createElement(ry,{footer:t},i),t&&r.createElement(ny,null,t),a&&r.createElement(L.x,{paddingTop:1},r.createElement(z.Z,{variant:"pi",textColor:"danger600"},l({id:a.id,defaultMessage:a.id},ty({},a.values)))))};Rr.defaultProps={error:void 0,footer:null,label:null,labelAction:void 0},Rr.propTypes={children:s().node.isRequired,error:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),footer:s().node,label:s().string,labelAction:s().node};const sy=Rr,ay=(0,j.default)(lr.A)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,wr=({addRepeatableComponentToField:e,formErrors:t,componentUid:n,componentValue:o,componentValueLength:a,isReadOnly:l,max:i,min:c,name:u})=>{const d=(0,y.useNotification)(),{formatMessage:m}=(0,V.useIntl)(),[g,f]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[,E]=(0,ke.useDrop)({accept:Le.COMPONENT}),{getComponentLayout:S,components:C}=Je(),O=(0,r.useMemo)(()=>S(n),[n,S]),F=(0,r.useMemo)(()=>Uo(o||[])+1,[o]),v=Fg(u,t),R=()=>{f("")},D=c-a,T=I()(t,u,{id:""}).id.includes("min"),U=(0,r.useCallback)(()=>{l||(a<i?(e(u,O,C,T),f(F)):a>=i&&d({type:"info",message:{id:P("components.notification.info.maximum-requirement")}}))},[C,e,O,a,T,l,i,u,F,d]);let B=t[u];return T&&(B={id:P("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:D}}),a===0?r.createElement(Ss,{error:B,isReadOnly:l,onClick:U}):(v.some(K=>K.split(".").length>1)&&!T&&(B={id:P("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),r.createElement(L.x,{hasRadius:!0,ref:E},r.createElement(sy,{error:B,footer:r.createElement(q.k,{justifyContent:"center",height:"48px",background:"neutral0"},r.createElement(ay,{disabled:l,onClick:U,startIcon:r.createElement(At.default,null)},m({id:P("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})))},o.map((K,Z)=>{const N=K.__temp_key__,k=g===N,H=`${u}.${Z}`,x=v.includes(H);return r.createElement(Yg,{componentFieldName:H,componentUid:n,hasErrors:x,hasMinError:T,isDraggingSibling:h,isOpen:k,isReadOnly:l,key:N,onClickToggle:()=>{f(k?"":N)},parentName:u,schema:O,setIsDraggingSibling:b,toggleCollapses:R})}))))};wr.defaultProps={componentValue:null,componentValueLength:0,formErrors:{},max:1/0,min:0},wr.propTypes={addRepeatableComponentToField:s().func.isRequired,componentUid:s().string.isRequired,componentValue:s().oneOfType([s().array,s().object]),componentValueLength:s().number,formErrors:s().object,isReadOnly:s().bool.isRequired,max:s().number,min:s().number,name:s().string.isRequired};const iy=(0,r.memo)(wr),ly=Sg(iy,kg);var cy=Object.defineProperty,si=Object.getOwnPropertySymbols,uy=Object.prototype.hasOwnProperty,dy=Object.prototype.propertyIsEnumerable,ai=(e,t,n)=>t in e?cy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ii=(e,t)=>{for(var n in t||(t={}))uy.call(t,n)&&ai(e,n,t[n]);if(si)for(var n of si(t))dy.call(t,n)&&ai(e,n,t[n]);return e};function py(e,t){return n=>{const o=t(n);return r.createElement(e,ii(ii({},n),o))}}const my=py;function fy({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:o,isCreatingEntry:a,modifiedData:l,removeComponentFromField:i,readActionAllowedFields:c,updateActionAllowedFields:u,formErrors:d}=(0,y.useCMEditViewDataManager)(),{contentType:m}=Je(),g=(0,r.useMemo)(()=>{const O=(0,Y.get)(m,["attributes"],{});return Object.keys(O).filter(v=>(0,Y.get)(O,[v,"type"],"")==="dynamiczone")},[m]),f=(0,r.useMemo)(()=>a?o:u,[a,o,u]),h=(0,Y.get)(l,t,null),b=(0,r.useMemo)(()=>_o(t),[t]),E=(0,r.useMemo)(()=>e&&a||f.filter(v=>v===b[0]).length>0?!0:f.map(v=>v.split(".")).filter(v=>v.length<b.length?!1:(0,Y.take)(v,b.length).join(".")===b.join(".")).length>0,[e,a,f,b]),S=(0,r.useMemo)(()=>e||g.includes(b[0])?!0:(a?[]:c).map(v=>v.split(".")).filter(v=>v.length<b.length?!1:(0,Y.take)(v,b.length).join(".")===b.join(".")).length>0,[e,g,b,a,c]),C=(0,r.useMemo)(()=>a||E?!1:S,[E,S,a]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:E,hasChildrenReadableFields:S,isCreatingEntry:a,isReadOnly:C,removeComponentFromField:i,componentValue:h}}const gy=fy,yy=(0,j.default)(L.x)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Mr=({intlLabel:e,id:t,labelAction:n,name:o,numberOfEntries:a,showNumberOfEntries:l,required:i})=>{const{formatMessage:c}=(0,V.useIntl)(),u=e!=null&&e.id?c(e):o;return r.createElement(L.x,{paddingBottom:1},r.createElement(q.k,null,r.createElement(z.Z,{textColor:"neutral800",htmlFor:t||o,variant:"pi",fontWeight:"bold",as:"label"},u,l&&r.createElement(r.Fragment,null,"\xA0(",a,")"),i&&r.createElement(z.Z,{textColor:"danger600"},"*")),n&&r.createElement(yy,{paddingLeft:1},n)))};Mr.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},Mr.propTypes={id:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,numberOfEntries:s().number,required:s().bool,showNumberOfEntries:s().bool};const hy=Mr,Tr=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:o,isFromDynamicZone:a,isRepeatable:l,isNested:i,labelAction:c,max:u,min:d,name:m,hasChildrenAllowedFields:g,hasChildrenReadableFields:f,isReadOnly:h,componentValue:b,removeComponentFromField:E,required:S})=>{const{formatMessage:C}=(0,V.useIntl)(),O=kd()(b),F=b!==null||a,v=!l&&F&&!a&&g,{getComponentLayout:R,components:D}=Je(),T=(0,r.useMemo)(()=>R(t),[t,R]);if(!g&&o)return r.createElement(y.NotAllowedInput,{labelAction:c,intlLabel:n,name:m});if(!g&&!o&&!f)return r.createElement(y.NotAllowedInput,{labelAction:c,intlLabel:n,name:m});const U=()=>{e(m,T,D)};return r.createElement(L.x,null,r.createElement(q.k,{justifyContent:"space-between"},n&&r.createElement(hy,{intlLabel:n,labelAction:c,name:m,numberOfEntries:O,showNumberOfEntries:l,required:S}),v&&r.createElement(Re.h,{label:C({id:P("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:r.createElement(ze.default,null),noBorder:!0,onClick:()=>{E(m,t)}})),r.createElement(ce.K,{spacing:1},!l&&!F&&r.createElement(Ss,{isReadOnly:h,onClick:U}),!l&&F&&r.createElement(Mg,{componentUid:t,isFromDynamicZone:a,isNested:i,name:m}),l&&r.createElement(ly,{componentValue:b,componentValueLength:O,componentUid:t,isReadOnly:h,max:u,min:d,name:m})))};Tr.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},Tr.propTypes={addNonRepeatableComponentToField:s().func.isRequired,componentUid:s().string.isRequired,componentValue:s().oneOfType([s().object,s().array]),hasChildrenAllowedFields:s().bool,hasChildrenReadableFields:s().bool,isCreatingEntry:s().bool.isRequired,isFromDynamicZone:s().bool,isReadOnly:s().bool,isRepeatable:s().bool,isNested:s().bool,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),labelAction:s().element,max:s().number,min:s().number,name:s().string.isRequired,removeComponentFromField:s().func.isRequired,required:s().bool};const by=(0,r.memo)(Tr,Xe()),pn=my(by,gy),Ir=(0,j.default)(Re.h)`
  background-color: transparent;

  svg path {
    fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
  }
`,vy=(0,j.default)(L.x)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,Ey=(0,j.default)(L.x)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,Cy=(0,j.default)(L.x)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,Dr=({componentUid:e,formErrors:t,index:n,isFieldAllowed:o,onMoveComponentDownClick:a,onMoveComponentUpClick:l,name:i,onRemoveComponentClick:c,showDownIcon:u,showUpIcon:d})=>{const[m,g]=(0,r.useState)(!0),{formatMessage:f}=(0,V.useIntl)(),{getComponentLayout:h}=Je(),{modifiedData:b}=(0,y.useCMEditViewDataManager)(),{icon:E,friendlyName:S,mainValue:C}=(0,r.useMemo)(()=>{var R;const D=h(e),{info:{icon:T,displayName:U}}=D,B=I()(D,["settings","mainField"],"id"),A=(R=I()(b,[i,n,B]))!=null?R:"",K=B==="id"?"":String(A).trim(),Z=K.length>0?` - ${K}`:K;return{friendlyName:U,icon:T,mainValue:Z}},[e,h,b,i,n]),O=Object.keys(t).filter(R=>{const D=R.split(".");return`${D[0]}.${D[1]}`==`${i}.${n}`});let F;O.length>0&&(F=f({id:P("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"}));const v=()=>{g(R=>!R)};return r.createElement(L.x,null,r.createElement(q.k,{justifyContent:"center"},r.createElement(Cy,{background:"neutral200"})),r.createElement(vy,{hasRadius:!0},r.createElement(qn.U,{expanded:m,onToggle:v,size:"S",error:F},r.createElement(Bn.B,{startIcon:r.createElement(St,{showBackground:!1,size:"S"}),action:r.createElement(ce.K,{horizontal:!0,spacing:0,expanded:m},u&&r.createElement(Ir,{noBorder:!0,label:f({id:P("components.DynamicZone.move-down-label"),defaultMessage:"Move component down"}),onClick:a,icon:r.createElement(Dd.Z,null)}),d&&r.createElement(Ir,{noBorder:!0,label:f({id:P("components.DynamicZone.move-up-label"),defaultMessage:"Move component up"}),onClick:l,icon:r.createElement(Ld.Z,null)}),o&&r.createElement(Ir,{noBorder:!0,label:f({id:P("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:S}),onClick:c,icon:r.createElement(ze.default,null)})),title:`${S}${C}`,togglePosition:"left"}),r.createElement(zn.v,null,r.createElement(Ey,{background:"neutral0"},r.createElement(pn,{componentUid:e,icon:E,name:`${i}.${n}`,isFromDynamicZone:!0}))))))};Dr.defaultProps={formErrors:{},index:0,isFieldAllowed:!0,showDownIcon:!0,showUpIcon:!0},Dr.propTypes={componentUid:s().string.isRequired,formErrors:s().object,index:s().number,isFieldAllowed:s().bool,name:s().string.isRequired,onMoveComponentDownClick:s().func.isRequired,onMoveComponentUpClick:s().func.isRequired,onRemoveComponentClick:s().func.isRequired,showDownIcon:s().bool,showUpIcon:s().bool};const Py=Dr,Lr=(0,j.default)(Is.Z)`
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,Oy=(0,j.default)(Hn.Y)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
  padding-top: ${({theme:e})=>e.spaces[3]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[4]};

  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${Lr} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${Lr} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,Ry=(0,j.default)(L.x)`
  height: 100%;
`,Sr=({hasError:e,hasMaxError:t,hasMinError:n,isDisabled:o,isOpen:a,label:l,missingComponentNumber:i,name:c,onClick:u})=>{const{formatMessage:d}=(0,V.useIntl)(),m=d({id:P("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:l||c}),g=d({id:"app.utils.close-label",defaultMessage:"Close"});let f=a?g:m;return t&&!a&&(f=d({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."})),n&&!a&&(f=d({id:P("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:i})),r.createElement(q.k,{justifyContent:"center"},r.createElement(L.x,{style:{cursor:o?"not-allowed":"pointer"}},r.createElement(Oy,{type:"button",onClick:u,disabled:o,hasError:e},r.createElement(q.k,null,r.createElement(Ry,{"aria-hidden":!0,paddingRight:2},r.createElement(Lr,{$isOpen:a,$hasError:e&&!a})),r.createElement(z.Z,{variant:"pi",fontWeight:"bold",textColor:e&&!a?"danger600":"neutral500"},f)))))};Sr.defaultProps={hasError:!1,hasMaxError:!1,hasMinError:!1,isDisabled:!1,isOpen:!1,label:"",missingComponentNumber:0},Sr.propTypes={label:s().string,hasError:s().bool,hasMaxError:s().bool,hasMinError:s().bool,isDisabled:s().bool,isOpen:s().bool,missingComponentNumber:s().number,name:s().string.isRequired,onClick:s().func.isRequired};const wy=Sr,My=(0,j.default)(L.x)`
  border-radius: ${(0,y.pxToRem)(26)};
`,xr=({label:e,labelAction:t,name:n,numberOfComponents:o,required:a,intlDescription:l})=>{const{formatMessage:i}=(0,V.useIntl)(),c=i({id:e||n,defaultMessage:e||n});return r.createElement(q.k,{justifyContent:"center"},r.createElement(L.x,null,r.createElement(My,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,background:"neutral0",shadow:"filterShadow",color:"neutral500"},r.createElement(q.k,{direction:"column",justifyContent:"center"},r.createElement(q.k,{maxWidth:(0,y.pxToRem)(356)},r.createElement(z.Z,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0},c,"\xA0"),r.createElement(z.Z,{variant:"pi",textColor:"neutral600",fontWeight:"bold"},"(",o,")"),a&&r.createElement(z.Z,{textColor:"danger600"},"*"),t&&r.createElement(L.x,{paddingLeft:1},t)),l&&r.createElement(L.x,{paddingTop:1,maxWidth:(0,y.pxToRem)(356)},r.createElement(z.Z,{variant:"pi",textColor:"neutral600",ellipsis:!0},i(l)))))))};xr.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,numberOfComponents:0,required:!1},xr.propTypes={intlDescription:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}),label:s().string,labelAction:s().element,name:s().string.isRequired,numberOfComponents:s().number,required:s().bool};const Ty=xr;var Iy=p(7739),Dy=p.n(Iy);const Ly=(0,j.default)(L.x)`
  flex-shrink: 0;
  height: ${(0,y.pxToRem)(84)};
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;
  align-items: center;

  &:focus,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    /* > Stack > ComponentIcon */
    > div > div:first-child {
      background: ${({theme:e})=>e.colors.primary200};
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;function kr({children:e,onClick:t}){return r.createElement(Ly,{as:"button",type:"button",onClick:t,hasRadius:!0},r.createElement(ce.K,{spacing:1,alignItems:"center",justifyContent:"center"},r.createElement(St,null),r.createElement(z.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral600"},e)))}kr.defaultProps={onClick(){}},kr.propTypes={children:s().node.isRequired,onClick:s().func};const Sy=j.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,Fr=({category:e,components:t,variant:n,isOpen:o,onAddComponent:a,onToggle:l})=>{const{formatMessage:i}=(0,V.useIntl)(),c=()=>{l(e)};return r.createElement(qn.U,{expanded:o,onToggle:c,size:"S"},r.createElement(Bn.B,{variant:n,title:i({id:e,defaultMessage:e}),togglePosition:"left"}),r.createElement(zn.v,null,r.createElement(L.x,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3},r.createElement(Sy,null,t.map(({componentUid:u,info:{displayName:d}})=>r.createElement(kr,{key:u,onClick:a(u)},i({id:d,defaultMessage:d})))))))};Fr.defaultProps={components:[],isOpen:!1,variant:"primary"},Fr.propTypes={category:s().string.isRequired,components:s().array,isOpen:s().bool,onAddComponent:s().func.isRequired,onToggle:s().func.isRequired,variant:s().oneOf(["primary","secondary"])};const xy=Fr,Ar=({components:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:o}=(0,V.useIntl)(),{getComponentLayout:a}=Je(),[l,i]=(0,r.useState)(""),c=(0,r.useMemo)(()=>{const m=e.map(f=>{const{category:h,info:b}=a(f);return{componentUid:f,category:h,info:b}}),g=Dy()(m,"category");return Object.keys(g).reduce((f,h)=>(f.push({category:h,components:g[h]}),f),[])},[e,a]);(0,r.useEffect)(()=>{t&&c.length>0&&i(c[0].category)},[t,c]);const u=m=>()=>{n(m),i("")},d=m=>{i(g=>g===m?"":m)};return t?r.createElement(L.x,{paddingBottom:6},r.createElement(L.x,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0},r.createElement(q.k,{justifyContent:"center"},r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral600"},o({id:P("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"}))),r.createElement(L.x,{paddingTop:2},r.createElement(ni.k,{attributeName:"data-strapi-accordion-toggle"},c.map(({category:m,components:g},f)=>r.createElement(xy,{key:m,category:m,components:g,onAddComponent:u,isOpen:m===l,onToggle:d,variant:f%2===1?"primary":"secondary"})))))):null};Ar.defaultProps={components:[],isOpen:!1},Ar.propTypes={components:s().array,isOpen:s().bool,onClickAddComponent:s().func.isRequired};const ky=Ar,jr=({name:e,addComponentToDynamicZone:t,formErrors:n,isCreatingEntry:o,isFieldAllowed:a,isFieldReadable:l,labelAction:i,moveComponentUp:c,moveComponentDown:u,removeComponentFromDynamicZone:d,dynamicDisplayedComponents:m,fieldSchema:g,metadatas:f})=>{var h;const[b,E]=(0,r.useState)(!1),S=(0,y.useNotification)(),{getComponentLayout:C,components:O}=Je(),F=m.length,v=f.description?{id:f.description,defaultMessage:f.description}:null,{max:R=1/0,min:D=-1/0}=g,T=(0,r.useMemo)(()=>Object.keys(n).filter(G=>G===e).map(G=>n[G]),[n,e]),U=D-F,B=T.length>0,A=T.length>0&&I()(T,[0,"id"],"").includes("min"),K=B&&I()(T,[0,"id"],"")==="components.Input.error.validation.max",Z=G=>{E(!1);const w=C(G);t(e,w,O,B)},N=()=>{F<R?E(G=>!G):S({type:"info",message:{id:P("components.notification.info.maximum-requirement")}})},k=(G,w)=>()=>{u(G,w)},H=(G,w)=>()=>{c(G,w)},x=(G,w)=>()=>{d(G,w)};return!a&&(o||!l&&!o)?r.createElement(y.NotAllowedInput,{description:v,intlLabel:{id:f.label,defaultMessage:f.label},labelAction:i,name:e}):r.createElement(ce.K,{spacing:6},F>0&&r.createElement(L.x,null,r.createElement(Ty,{intlDescription:v,label:f.label,labelAction:i,name:e,numberOfComponents:F,required:g.required||!1}),m.map((G,w)=>{const M=a&&w<F-1,_=a&&w>0;return r.createElement(Py,{componentUid:G,formErrors:n,key:w,index:w,isFieldAllowed:a,onMoveComponentDownClick:k(e,w),onMoveComponentUpClick:H(e,w),name:e,onRemoveComponentClick:x(e,w),showDownIcon:M,showUpIcon:_})})),r.createElement(wy,{hasError:B,hasMaxError:K,hasMinError:A,isDisabled:!a,label:f.label,missingComponentNumber:U,isOpen:b,name:e,onClick:N}),r.createElement(ky,{isOpen:b,components:(h=g.components)!=null?h:[],onClickAddComponent:Z}))};jr.defaultProps={dynamicDisplayedComponents:[],fieldSchema:{max:1/0,min:-1/0},labelAction:null},jr.propTypes={addComponentToDynamicZone:s().func.isRequired,dynamicDisplayedComponents:s().array,fieldSchema:s().shape({components:s().array.isRequired,max:s().number,min:s().number,required:s().bool}),formErrors:s().object.isRequired,isCreatingEntry:s().bool.isRequired,isFieldAllowed:s().bool.isRequired,isFieldReadable:s().bool.isRequired,labelAction:s().element,metadatas:s().shape({description:s().string,label:s().string}).isRequired,moveComponentUp:s().func.isRequired,moveComponentDown:s().func.isRequired,name:s().string.isRequired,removeComponentFromDynamicZone:s().func.isRequired};const Fy=(0,r.memo)(jr,Xe()),Ay=Md(Fy,Id);var et=p(46781);const mn=()=>({type:et.ZA}),$r=e=>({type:et.Id,data:e}),Nr=(e,t=!1)=>({type:et.TP,rawQuery:e,isSingleType:t}),li=()=>({type:et.c2}),ci=(e,t)=>({type:et.w7,componentsDataStructure:e,contentTypeDataStructure:t}),de=e=>({type:et.d0,status:e}),tt=e=>({type:et.t9,data:e}),jy=()=>({type:et.tE}),Vr=e=>e["content-manager_editViewCrudReducer"];var $y=p(25108),Ny=Object.defineProperty,ui=Object.getOwnPropertySymbols,Vy=Object.prototype.hasOwnProperty,qy=Object.prototype.propertyIsEnumerable,di=(e,t,n)=>t in e?Ny(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,By=(e,t)=>{for(var n in t||(t={}))Vy.call(t,n)&&di(e,n,t[n]);if(ui)for(var n of ui(t))qy.call(t,n)&&di(e,n,t[n]);return e},nt=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const qr=({allLayoutData:e,children:t,slug:n,id:o,origin:a})=>{const l=(0,it.useQueryClient)(),i=(0,y.useNotification)(),{setCurrentStep:c}=(0,y.useGuidedTour)(),{trackUsage:u}=(0,y.useTracking)(),{push:d,replace:m}=(0,J.useHistory)(),[{rawQuery:g}]=(0,y.useQueryParams)(),f=(0,pe.useDispatch)(),{componentsDataStructure:h,contentTypeDataStructure:b,data:E,isLoading:S,status:C}=(0,pe.useSelector)(Vr),O=fs(n),F=(0,r.useRef)(!0),v=(0,r.useRef)(u),R=(0,r.useRef)(e),D=o===null,T=(0,r.useMemo)(()=>D&&!a?null:fe(`collection-types/${n}/${a||o}`),[n,o,D,a]),U=(0,r.useCallback)(w=>a?(0,y.contentManagementUtilRemoveFieldsFromData)(w,R.current.contentType,R.current.components):w,[a]),B=(0,r.useCallback)(w=>{const M=es(w,R.current.contentType,R.current.components);return(0,y.formatContentTypeData)(M,R.current.contentType,R.current.components)},[]);(0,r.useEffect)(()=>{const w=Object.keys(e.components).reduce(($,Q)=>{const ne=_t(I()(e,["components",Q,"attributes"],{}),e.components);return $[Q]=(0,y.formatContentTypeData)(ne,e.components[Q],e.components),$},{}),M=_t(e.contentType.attributes,e.components),_=(0,y.formatContentTypeData)(M,e.contentType,e.components);f(ci(w,_))},[e,f]),(0,r.useEffect)(()=>()=>{f(li())},[f]),(0,r.useEffect)(()=>{const M=Fe.Z.CancelToken.source(),_=Q=>nt(void 0,null,function*(){f(mn());try{const{data:ne}=yield me.be.get(T,{cancelToken:Q.token});f($r(B(U(ne))))}catch(ne){if(Fe.Z.isCancel(ne))return;$y.error(ne);const re=I()(ne,"response.status",null);if(re===404){d(O);return}re===403&&(i({type:"info",message:{id:P("permissions.not-allowed.update")}}),d(O))}}),$=()=>nt(void 0,null,function*(){yield f(mn()),yield f(Nr(g))});return F.current?(T?_(M):$(),()=>{M.cancel("Operation canceled by the user.")}):()=>{}},[U,B,d,T,f,g,O,i]);const A=(0,r.useCallback)(w=>{const M=w.response.data;let _=I()(M,["error","message"],"Bad Request");Array.isArray(_)&&(_=I()(_,["0","messages","0","id"])),typeof _=="string"&&i({type:"warning",message:_})},[i]),K=(0,r.useCallback)(w=>nt(void 0,null,function*(){try{v.current("willDeleteEntry",w);const{data:M}=yield me.be.delete(fe(`collection-types/${n}/${o}`));return i({type:"success",message:{id:P("success.record.delete")}}),v.current("didDeleteEntry",w),Promise.resolve(M)}catch(M){return v.current("didNotDeleteEntry",By({error:M},w)),Promise.reject(M)}}),[o,n,i]),Z=(0,r.useCallback)(()=>{m(O)},[O,m]),N=(0,r.useCallback)((w,M)=>nt(void 0,null,function*(){const _=`${fe(`collection-types/${n}`)}${g}`;try{f(de("submit-pending"));const{data:$}=yield me.be.post(_,w);return v.current("didCreateEntry",M),i({type:"success",message:{id:P("success.record.save")}}),c("contentManager.success"),l.invalidateQueries(["relation"]),f(tt(B($))),f(de("resolved")),m(`/content-manager/collectionType/${n}/${$.id}${g}`),Promise.resolve($)}catch($){return A($),v.current("didNotCreateEntry",{error:$,trackerProperty:M}),f(de("resolved")),Promise.reject($)}}),[B,A,m,n,f,g,i,c,l]),k=(0,r.useCallback)(()=>nt(void 0,null,function*(){try{v.current("willCheckDraftRelations");const w=fe(`collection-types/${n}/${o}/actions/numberOfDraftRelations`);f(de("draft-relation-check-pending"));const M=yield me.be.get(w);return v.current("didCheckDraftRelations"),f(de("resolved")),M.data.data}catch(w){return A(w),f(de("resolved")),Promise.reject(w)}}),[A,o,n,f]),H=(0,r.useCallback)(()=>nt(void 0,null,function*(){try{v.current("willPublishEntry");const w=fe(`collection-types/${n}/${o}/actions/publish`);f(de("publish-pending"));const{data:M}=yield me.be.post(w);return v.current("didPublishEntry"),f(tt(B(M))),f(de("resolved")),i({type:"success",message:{id:P("success.record.publish")}}),Promise.resolve(M)}catch(w){return A(w),f(de("resolved")),Promise.reject(w)}}),[B,A,o,n,f,i]),x=(0,r.useCallback)((w,M)=>nt(void 0,null,function*(){const _=fe(`collection-types/${n}/${o}`);try{v.current("willEditEntry",M),f(de("submit-pending"));const{data:$}=yield me.be.put(_,w);return v.current("didEditEntry",{trackerProperty:M}),i({type:"success",message:{id:P("success.record.save")}}),l.invalidateQueries(["relation"]),f(tt(B($))),f(de("resolved")),Promise.resolve($)}catch($){return v.current("didNotEditEntry",{error:$,trackerProperty:M}),A($),f(de("resolved")),Promise.reject($)}}),[B,A,n,o,f,i,l]),G=(0,r.useCallback)(()=>nt(void 0,null,function*(){const w=fe(`collection-types/${n}/${o}/actions/unpublish`);f(de("unpublish-pending"));try{v.current("willUnpublishEntry");const{data:M}=yield me.be.post(w);return v.current("didUnpublishEntry"),i({type:"success",message:{id:P("success.record.unpublish")}}),f(tt(B(M))),f(de("resolved")),Promise.resolve(M)}catch(M){return f(de("resolved")),A(M),Promise.reject(M)}}),[B,A,o,n,f,i]);return t({componentsDataStructure:h,contentTypeDataStructure:b,data:E,isCreatingEntry:D,isLoadingForData:S,onDelete:K,onDeleteSucceeded:Z,onPost:N,onPublish:H,onDraftRelationCheck:k,onPut:x,onUnpublish:G,status:C,redirectionLink:O})};qr.defaultProps={id:null,origin:null},qr.propTypes={allLayoutData:s().exact({components:s().object.isRequired,contentType:s().shape({apiID:s().string.isRequired,attributes:s().object.isRequired,info:s().object.isRequired,isDisplayed:s().bool.isRequired,kind:s().string.isRequired,layouts:s().object.isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,pluginOptions:s().object,settings:s().object.isRequired,uid:s().string.isRequired}).isRequired}).isRequired,children:s().func.isRequired,id:s().string,origin:s().string,slug:s().string.isRequired};const zy=(0,r.memo)(qr,Xe());var Zy=p(41609),De=p.n(Zy),Wy=p(18446),jt=p.n(Wy),_y=p(36968),X=p.n(_y),Uy=p(98601),Hy=p.n(Uy),Gy=p(45578),pi=p.n(Gy),Ky=p(82492),Qy=p.n(Ky);const Br=(e,t,n,o)=>{const a=e.slice();return a.splice(t,1),a.splice(n,0,o),a};var Yy=p(1469),Jy=p.n(Yy);const Xy=({browserState:e,serverState:t},n,o)=>{const a=(c,u)=>I()(c,["attributes",u,"type"],""),l=(c,u)=>I()(c,["attributes",...u],""),i=(c,u,d)=>Object.keys(c).reduce((m,g)=>{const f=a(d,g),h=I()(c,g),b=I()(u,g),E=l(d,[g,"component"]),S=l(d,[g,"repeatable"]);let C;switch(f){case"json":C=JSON.parse(h);break;case"time":{C=h,h&&h.split(":").length<3&&(C=`${h}:00`);break}case"media":l(d,[g,"multiple"])===!0?C=h?h.filter(O=>!(O instanceof File)):null:C=I()(h,0)instanceof File?null:I()(h,"id",null);break;case"component":S?C=h&&h.map((O,F)=>i(O,(b!=null?b:[])[F],o[E])):C=h&&i(h,b,o[E]);break;case"relation":{let O=b!=null?b:[];const F=h.reduce((R,D)=>O.find(T=>T.id===D.id)?R:[...R,{id:D.id}],[]);C={disconnect:O.reduce((R,D)=>h.find(T=>T.id===D.id)?R:[...R,{id:D.id}],[]),connect:F};break}case"dynamiczone":C=h.map((O,F)=>i(O,(b!=null?b:[])[F],o[O.__component]));break;default:C=eh(h,"id")}return m[g]=C,m},{});return i(e,t,n)},eh=(e,t)=>Jy()(e)?e.map(n=>n[t]?n[t]:n):us()(e)?e[t]:e,th=Xy;var nh=p(51584),rh=p.n(nh),oh=p(7654),sh=p.n(oh),ah=p(14841),ht=p.n(ah),ye=p(53209);function $t(e){return["integer","biginteger","decimal","float","number"].includes(e)}var ih=Object.defineProperty,lh=Object.defineProperties,ch=Object.getOwnPropertyDescriptors,mi=Object.getOwnPropertySymbols,uh=Object.prototype.hasOwnProperty,dh=Object.prototype.propertyIsEnumerable,fi=(e,t,n)=>t in e?ih(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gi=(e,t)=>{for(var n in t||(t={}))uh.call(t,n)&&fi(e,n,t[n]);if(mi)for(var n of mi(t))dh.call(t,n)&&fi(e,n,t[n]);return e},yi=(e,t)=>lh(e,ch(t));ye.kM(ye.nK,"defined",function(){return this.test("defined",y.translatedErrors.required,e=>e!==void 0)}),ye.kM(ye.IX,"notEmptyMin",function(e){return this.test("notEmptyMin",y.translatedErrors.min,t=>De()(t)?!0:t.length>=e)}),ye.kM(ye.Z_,"isInferior",function(e,t){return this.test("isInferior",e,function(n){return!n||Number.isNaN(ht()(n))?!0:ht()(t)>=ht()(n)})}),ye.kM(ye.Z_,"isSuperior",function(e,t){return this.test("isSuperior",e,function(n){return!n||Number.isNaN(ht()(n))?!0:ht()(n)>=ht()(t)})});const ph=e=>I()(e,["attributes"],{}),zr=(e,{components:t},n={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=ph(e);return ye.Ry().shape(Object.keys(o).reduce((a,l)=>{const i=o[l];if(i.type!=="relation"&&i.type!=="component"&&i.type!=="dynamiczone"){const c=mh(i.type,i,n);a[l]=c}if(i.type==="relation"&&(a[l]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(i.relationType)?ye.Ry().nullable():ye.IX().nullable()),i.type==="component"){const c=zr(t[i.component],{components:t},yi(gi({},n),{isFromComponent:!0}));if(i.repeatable===!0){const{min:d,max:m,required:g}=i;let f=ye.Vo(h=>{let b=ye.IX().of(c);return d?g?b=b.min(d,y.translatedErrors.min):g!==!0&&De()(h)?b=b.nullable():b=b.min(d,y.translatedErrors.min):g&&!n.isDraft&&(b=b.min(1,y.translatedErrors.required)),m&&(b=b.max(m,y.translatedErrors.max)),b});return a[l]=f,a}const u=ye.Vo(d=>d!==void 0?i.required===!0&&!n.isDraft?c.defined():c.nullable():i.required===!0?ye.Ry().defined():ye.Ry().nullable());return a[l]=u,a}if(i.type==="dynamiczone"){let c=ye.IX().of(ye.Vo(({__component:m})=>zr(t[m],{components:t},yi(gi({},n),{isFromComponent:!0}))));const{max:u,min:d}=i;d?i.required?c=c.test("min",y.translatedErrors.min,m=>n.isCreatingEntry?m&&m.length>=d:m===void 0?!0:m!==null&&m.length>=d).test("required",y.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null):c=c.notEmptyMin(d):i.required&&!n.isDraft&&(c=c.test("required",y.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null)),u&&(c=c.max(u,y.translatedErrors.max)),a[l]=c}return a},{}))},mh=(e,t,n)=>{let o=ye.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(e)&&(o=ye.Z_()),e==="json"&&(o=ye.nK(y.translatedErrors.json).test("isJSON",y.translatedErrors.json,a=>{if(a===void 0)return!0;try{return JSON.parse(a),!0}catch(l){return!1}}).nullable()),e==="email"&&(o=o.email(y.translatedErrors.email)),["number","integer","float","decimal"].includes(e)&&(o=ye.Rx().transform(a=>sh()(a)?void 0:a).typeError()),e==="biginteger"&&(o=ye.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(e)&&(o=ye.hT()),Object.keys(t).forEach(a=>{const l=t[a];if(l||!rh()(l)&&Number.isInteger(Math.floor(l))||l===0)switch(a){case"required":{n.isDraft||(e==="password"&&n.isCreatingEntry&&(o=o.required(y.translatedErrors.required)),e!=="password"&&(n.isCreatingEntry?o=o.required(y.translatedErrors.required):o=o.test("required",y.translatedErrors.required,i=>i===void 0&&!n.isFromComponent?!0:$t(e)?i===0?!0:!!i:e==="boolean"?i!=null:e==="date"||e==="datetime"?typeof i=="string"?!De()(i):!De()(i==null?void 0:i.toString()):!De()(i))));break}case"max":{e==="biginteger"?o=o.isInferior(y.translatedErrors.max,l):o=o.max(l,y.translatedErrors.max);break}case"maxLength":o=o.max(l,y.translatedErrors.maxLength);break;case"min":{e==="biginteger"?o=o.isSuperior(y.translatedErrors.min,l):o=o.min(l,y.translatedErrors.min);break}case"minLength":{n.isDraft||(o=o.min(l,y.translatedErrors.minLength));break}case"regex":o=o.matches(new RegExp(l),{message:y.translatedErrors.regex,excludeEmptyString:!t.required});break;case"lowercase":["text","textarea","email","string"].includes(e)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(e)&&(o=o.strict().uppercase());break;case"positive":$t(e)&&(o=o.positive());break;case"negative":$t(e)&&(o=o.negative());break;default:o=o.nullable()}}),o},hi=zr,Ge=(e,t=()=>!1)=>{const n=o=>Object.entries(o).reduce((a,[l,i])=>{if(t(i)&&(a=[...a,l]),i.type==="component"){const c=e[i.component].attributes,d=n(c).map(m=>`${l}.${m}`);a=[...a,d]}else if(i.type==="dynamiczone"){const u=i.components.flatMap(d=>n({[d]:{type:"component",component:d}}).map(m=>m.split(`${d}.`)[1])).filter(d=>Boolean(d)).map(d=>`${l}.${d}`);a=[...a,u]}return a.flat()},[]);return n},fh=(e,t)=>{const n=(o,a,l,i)=>o&&(l===i.length-1&&e===a&&o[a]!==void 0?(X()(o,a,t),o):(Array.isArray(o[a])&&o[a].forEach(c=>{i.slice(l+1).reduce(n,c)}),o[a]));return n};var gh=Object.defineProperty,yh=Object.defineProperties,hh=Object.getOwnPropertyDescriptors,bi=Object.getOwnPropertySymbols,bh=Object.prototype.hasOwnProperty,vh=Object.prototype.propertyIsEnumerable,vi=(e,t,n)=>t in e?gh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nt=(e,t)=>{for(var n in t||(t={}))bh.call(t,n)&&vi(e,n,t[n]);if(bi)for(var n of bi(t))vh.call(t,n)&&vi(e,n,t[n]);return e},Zr=(e,t)=>yh(e,hh(t));const Eh={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null,publishConfirmation:{show:!1,draftCount:0}},Ch=(e,t)=>(0,Kt.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{const{componentLayoutData:o,allComponents:a}=t,l=Ge(a,d=>d.type==="relation")(o.attributes),i=Nt({},e.componentsDataStructure[o.uid]),c=Ge(a,d=>d.type==="component"&&d.repeatable)(o.attributes),u=l.reduce((d,m)=>{const[g]=m.split(".");return c.includes(g)||X()(d,m,[]),d},i);X()(n,["modifiedData",...t.keys],u);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{const{keys:o,allComponents:a,componentLayoutData:l,shouldCheckErrors:i}=t;i&&(n.shouldCheckErrors=!e.shouldCheckErrors),t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"&&(n.modifiedDZName=o[0]);const c=I()(e,["modifiedData",...o],[]),u=t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"?Zr(Nt({},e.componentsDataStructure[l.uid]),{__component:l.uid}):Zr(Nt({},e.componentsDataStructure[l.uid]),{__temp_key__:Uo(c)+1}),d=Ge(a,b=>b.type==="relation")(l.attributes),m=Ge(a,b=>b.type==="component"&&b.repeatable)(l.attributes),g=Ge(a,b=>b.type==="component"&&!b.repeatable)(l.attributes),f=d.reduce((b,E)=>{const[S]=E.split(".");return!m.includes(S)&&!g.includes(S)&&X()(b,E,[]),b},u),h=Array.isArray(c)?[...c,f]:[f];X()(n,["modifiedData",...o],h);break}case"LOAD_RELATION":{const o=["initialData",...t.keys],a=["modifiedData",...t.keys],{value:l}=t,i=I()(e,o),c=I()(e,a);X()(n,o,pi()([...l,...i],"id")),X()(n,a,pi()([...l,...c],"id"));break}case"CONNECT_RELATION":{const o=["modifiedData",...t.keys],{value:a,toOneRelation:l}=t;if(l)X()(n,o,[a]);else{const c=[...I()(e,o),a];X()(n,o,c)}break}case"DISCONNECT_RELATION":{const o=["modifiedData",...t.keys],{id:a}=t,i=I()(e,[...o]).filter(c=>c.id!==a);X()(n,o,i);break}case"INIT_FORM":{const{initialValues:o,relationalFieldPaths:a=[],componentPaths:l=[],repeatableComponentPaths:i=[],dynamicZonePaths:c=[],setModifiedDataOnly:u}=t,d=Ve()(o),m=a.map(g=>g.split(".")).reduce((g,f)=>{const[h]=f;if(e.modifiedData&&I()(e.modifiedData,h)){const b=Ve()(I()(e.modifiedData,h));X()(g,h,Qy()(b,I()(o,h)))}else if(i.includes(h)||c.includes(h)||l.includes(h)){const b=fh(f.slice(-1)[0],[]);f.reduce(b,g)}else X()(g,f,[]);return g},d);u||(n.initialData=m),n.modifiedData=m,n.formErrors={},n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_FIELD":{const o=I()(e,["modifiedData",...t.pathToComponent]),a=I()(e,["modifiedData",...t.pathToComponent,t.dragIndex]),l=Br(o,t.dragIndex,t.hoverIndex,a);X()(n,["modifiedData",...t.pathToComponent],l);break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:o,dynamicZoneName:a,shouldCheckErrors:l}=t;l&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=e.modifiedData[a],c=t.type==="MOVE_COMPONENT_UP"?o-1:o+1,u=e.modifiedData[a][o],d=Br(i,o,c,u);X()(n,["modifiedData",t.dynamicZoneName],d);break}case"MOVE_FIELD":{const o=I()(e,["modifiedData",...t.keys],[]).slice(),a=I()(e,["modifiedData",...t.keys,t.dragIndex]),l=Br(o,t.dragIndex,t.overIndex,a);X()(n,["modifiedData",...t.keys],l);break}case"ON_CHANGE":{const[o]=t.keys;if(t.shouldSetInitialValue&&X()(n,["initialData",...t.keys],t.value),t.keys.length===2&&I()(e,["modifiedData",o])===null){X()(n,["modifiedData",o],{[t.keys[1]]:t.value});break}X()(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors),n.modifiedData[t.dynamicZoneName].splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const o=["modifiedData",...t.keys];X()(n,o,null);break}case"REMOVE_PASSWORD_FIELD":{Hy()(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const o=t.keys.length-1,a=["modifiedData",...Wn()(t.keys,o)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=I()(e,a).slice();i.splice(parseInt(t.keys[o],10),1),X()(n,a,i);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"SET_PUBLISH_CONFIRMATION":{n.publishConfirmation=Nt({},t.publishConfirmation);break}case"RESET_PUBLISH_CONFIRMATION":{n.publishConfirmation=Zr(Nt({},e.publishConfirmation),{show:!1});break}default:return n}});var Ph=Object.defineProperty,Ei=Object.getOwnPropertySymbols,Oh=Object.prototype.hasOwnProperty,Rh=Object.prototype.propertyIsEnumerable,Ci=(e,t,n)=>t in e?Ph(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fn=(e,t)=>{for(var n in t||(t={}))Oh.call(t,n)&&Ci(e,n,t[n]);if(Ei)for(var n of Ei(t))Rh.call(t,n)&&Ci(e,n,t[n]);return e},gn=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Wr=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:o,componentsDataStructure:a,contentTypeDataStructure:l,createActionAllowedFields:i,from:c,initialValues:u,isCreatingEntry:d,isLoadingForData:m,isSingleType:g,onPost:f,onPublish:h,onDraftRelationCheck:b,onPut:E,onUnpublish:S,readActionAllowedFields:C,redirectToPreviousPage:O,slug:F,status:v,updateActionAllowedFields:R})=>{const[D,T]=(0,r.useReducer)(Ch,Eh),{formErrors:U,initialData:B,modifiedData:A,modifiedDZName:K,shouldCheckErrors:Z,publishConfirmation:N}=D,{setModifiedDataOnly:k}=(0,pe.useSelector)(Vr),H=(0,pe.useDispatch)(),x=(0,y.useNotification)(),{lockApp:G,unlockApp:w}=(0,y.useOverlayBlocker)(),M=I()(e,["contentType"],{}),_=(0,r.useMemo)(()=>I()(M,["options","draftAndPublish"],!1),[M]),$=(0,r.useMemo)(()=>_&&!B.publishedAt,[_,B.publishedAt]),{trackUsage:Q}=(0,y.useTracking)(),{formatMessage:ne}=(0,V.useIntl)(),re=(0,r.useRef)(Q),he=(0,r.useMemo)(()=>m||d?!1:t===!1&&n===!1,[m,d,t,n]);(0,r.useEffect)(()=>{v==="resolved"?w():G()},[G,w,v]),(0,r.useEffect)(()=>{m||je()},[Z]),(0,r.useEffect)(()=>{const ee=Object.keys(U);if(ee.length>0){const te=ee[0],se=document.getElementById(te);se&&se.focus()}},[U]),(0,r.useEffect)(()=>{he&&x({type:"info",message:{id:P("permissions.not-allowed.update")}})},[he,x]),(0,r.useEffect)(()=>{T({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:a,contentTypeDataStructure:l})},[a,l]);const{components:W}=e,ue=bs(u);(0,r.useEffect)(()=>{if(u&&(M!=null&&M.attributes)&&!jt()(ue,u)){const ee=Ge(W,Ie=>Ie.type==="relation")(M.attributes),te=Ge(W,Ie=>Ie.type==="component"&&!Ie.repeatable)(M.attributes),se=Ge(W,Ie=>Ie.type==="component"&&Ie.repeatable)(M.attributes),Te=Ge(W,Ie=>Ie.type==="dynamiczone")(M.attributes);T({type:"INIT_FORM",initialValues:u,relationalFieldPaths:ee,componentPaths:te,repeatableComponentPaths:se,dynamicZonePaths:Te,setModifiedDataOnly:k}),k&&H(jy())}},[u,M,W,k,H,ue]);const _e=(0,r.useCallback)(ee=>(te,se,Te,Ie=!1)=>{re.current("didAddComponentToDynamicZone"),T({type:ee,keys:te.split("."),componentLayoutData:se,allComponents:Te,shouldCheckErrors:Ie})},[]),ve=_e("ADD_COMPONENT_TO_DYNAMIC_ZONE"),Ae=(0,r.useCallback)((ee,te,se)=>{T({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:ee.split("."),componentLayoutData:te,allComponents:se})},[]),Be=(0,r.useCallback)(({name:ee,value:te,toOneRelation:se})=>{T({type:"CONNECT_RELATION",keys:ee.split("."),value:te,toOneRelation:se})},[]),Ke=(0,r.useCallback)(({target:{name:ee,value:te}})=>{T({type:"LOAD_RELATION",keys:ee.split("."),value:te})},[]),Qe=_e("ADD_REPEATABLE_COMPONENT_TO_FIELD"),Ee=(0,r.useMemo)(()=>{const ee={isCreatingEntry:d,isDraft:$,isFromComponent:!1};return hi(M,{components:e.components||{}},ee)},[e.components,M,d,$]),je=(0,r.useCallback)((...ee)=>gn(void 0,[...ee],function*(te={}){let se={};const Te=Ve()(A);De()(Te)||X()(Te,te.path,te.value);try{yield Ee.validate(Te,{abortEarly:!1})}catch(Ie){se=(0,y.getYupInnerErrors)(Ie),K&&(se=Object.keys(se).reduce((_c,Mo)=>(Mo.split(".")[0]!==K&&(_c[Mo]=se[Mo]),_c),{}))}T({type:"SET_FORM_ERRORS",errors:se})}),[K,A,Ee]),Pt=(0,r.useCallback)(({target:{name:ee,value:te,type:se}},Te=!1)=>{let Ie=te;if(["text","textarea","string","email","uid","select","select-one","number"].includes(se)&&!te&&te!==0&&(Ie=null),se==="password"&&!te){T({type:"REMOVE_PASSWORD_FIELD",keys:ee.split(".")});return}T({type:"ON_CHANGE",keys:ee.split("."),value:Ie,shouldSetInitialValue:Te})},[]),Wc=(0,r.useCallback)((ee,te)=>{const se=Lu(Ve()(ee),"__temp_key__");return th({browserState:se,serverState:te},M,e.components)},[e.components,M]),wo=(0,r.useMemo)(()=>_?$?{status:"draft"}:{}:{},[_,$]),QC=(0,r.useCallback)(ee=>gn(void 0,null,function*(){return ee.preventDefault(),T({type:"RESET_PUBLISH_CONFIRMATION"})}),[]),YC=(0,r.useCallback)(ee=>gn(void 0,null,function*(){ee.preventDefault();let te={};try{yield Ee.validate(A,{abortEarly:!1})}catch(se){te=(0,y.getYupInnerErrors)(se)}try{if(De()(te)){const se=Wc(A,B);d?yield f(se,wo):yield E(se,wo)}}catch(se){te=fn(fn({},te),(0,y.getAPIInnerErrors)(se,{getTrad:P}))}T({type:"SET_FORM_ERRORS",errors:te})}),[Wc,d,A,B,f,E,wo,Ee]),JC=(0,r.useCallback)(()=>gn(void 0,null,function*(){const ee=hi(M,{components:I()(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1}),te=yield b();if(!N.show&&te>0){T({type:"SET_PUBLISH_CONFIRMATION",publishConfirmation:{show:!0,draftCount:te}});return}T({type:"RESET_PUBLISH_CONFIRMATION"});let se={};try{yield ee.validate(A,{abortEarly:!1})}catch(Te){se=(0,y.getYupInnerErrors)(Te)}try{De()(se)&&(yield h())}catch(Te){se=fn(fn({},se),(0,y.getAPIInnerErrors)(Te,{getTrad:P}))}T({type:"SET_FORM_ERRORS",errors:se})}),[e,M,d,A,N.show,h,b]),Ot=(0,r.useCallback)(ee=>{const te=Object.keys(U).some(Te=>Te.split(".")[0]===ee);return!De()(U)&&te},[U]),XC=(0,r.useCallback)((ee,te)=>{re.current("changeComponentsOrder"),T({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:ee,currentIndex:te,shouldCheckErrors:Ot(ee)})},[Ot]),eP=(0,r.useCallback)((ee,te)=>{re.current("changeComponentsOrder"),T({type:"MOVE_COMPONENT_UP",dynamicZoneName:ee,currentIndex:te,shouldCheckErrors:Ot(ee)})},[Ot]),tP=(0,r.useCallback)((ee,te,se)=>{T({type:"MOVE_COMPONENT_FIELD",pathToComponent:ee,dragIndex:te,hoverIndex:se})},[]),nP=(0,r.useCallback)(({name:ee,id:te})=>{T({type:"DISCONNECT_RELATION",keys:ee.split("."),id:te})},[]),rP=(0,r.useCallback)((ee,te)=>{re.current("removeComponentFromDynamicZone"),T({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:ee,index:te,shouldCheckErrors:Ot(ee)})},[Ot]),oP=(0,r.useCallback)((ee,te)=>{T({type:"REMOVE_COMPONENT_FROM_FIELD",keys:ee.split("."),componentUid:te})},[]),sP=(0,r.useCallback)((ee,te)=>{T({type:"REMOVE_REPEATABLE_FIELD",keys:ee.split("."),componentUid:te})},[]),aP=(0,r.useCallback)(()=>{T({type:"TRIGGER_FORM_VALIDATION"})},[]);return he?r.createElement(J.Redirect,{to:c}):A?r.createElement(y.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:ve,addNonRepeatableComponentToField:Ae,connectRelation:Be,addRepeatableComponentToField:Qe,allLayoutData:e,checkFormErrors:je,createActionAllowedFields:i,formErrors:U,hasDraftAndPublish:_,initialData:B,isCreatingEntry:d,isSingleType:g,shouldNotRunValidations:$,status:v,layout:M,loadRelation:Ke,modifiedData:A,moveComponentDown:XC,moveComponentField:tP,moveComponentUp:eP,onChange:Pt,onPublish:JC,onUnpublish:S,disconnectRelation:nP,readActionAllowedFields:C,redirectToPreviousPage:O,removeComponentFromDynamicZone:rP,removeComponentFromField:oP,removeRepeatableField:sP,slug:F,triggerFormValidation:aP,updateActionAllowedFields:R,onPublishPromptDismissal:QC,publishConfirmation:N}},m||!d&&!B.id?r.createElement(st.Main,{"aria-busy":"true"},r.createElement(y.LoadingIndicatorPage,null)):r.createElement(r.Fragment,null,r.createElement(J.Prompt,{when:!jt()(A,B),message:ne({id:"global.prompt.unsaved"})}),r.createElement("form",{noValidate:!0,onSubmit:YC},o))):null};Wr.defaultProps={from:"/",initialValues:null,redirectToPreviousPage(){}},Wr.propTypes={allLayoutData:s().object.isRequired,allowedActions:s().object.isRequired,children:s().node.isRequired,componentsDataStructure:s().object.isRequired,contentTypeDataStructure:s().object.isRequired,createActionAllowedFields:s().array.isRequired,from:s().string,initialValues:s().object,isCreatingEntry:s().bool.isRequired,isLoadingForData:s().bool.isRequired,isSingleType:s().bool.isRequired,onPost:s().func.isRequired,onPublish:s().func.isRequired,onDraftRelationCheck:s().func.isRequired,onPut:s().func.isRequired,onUnpublish:s().func.isRequired,readActionAllowedFields:s().array.isRequired,redirectToPreviousPage:s().func,slug:s().string.isRequired,status:s().string.isRequired,updateActionAllowedFields:s().array.isRequired};const wh=Wr,lt=e=>fe(`single-types/${e}`),Mh=e=>Object.values(e||{}).reduce((t,n)=>Object.assign(t,n),{});var Th=Object.defineProperty,yn=Object.getOwnPropertySymbols,Pi=Object.prototype.hasOwnProperty,Oi=Object.prototype.propertyIsEnumerable,Ri=(e,t,n)=>t in e?Th(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wi=(e,t)=>{for(var n in t||(t={}))Pi.call(t,n)&&Ri(e,n,t[n]);if(yn)for(var n of yn(t))Oi.call(t,n)&&Ri(e,n,t[n]);return e},Ih=(e,t)=>{var n={};for(var o in e)Pi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&yn)for(var o of yn(e))t.indexOf(o)<0&&Oi.call(e,o)&&(n[o]=e[o]);return n};const Mi=(e={})=>{const t=wi(wi({},e),Mh(e.plugins)),{plugins:n,_q:o}=t,a=Ih(t,["plugins","_q"]);return o&&X()(a,"_q",encodeURIComponent(o)),`${(0,He.stringify)(a,{encode:!1,addQueryPrefix:!0})}`};var Dh=Object.defineProperty,Ti=Object.getOwnPropertySymbols,Lh=Object.prototype.hasOwnProperty,Sh=Object.prototype.propertyIsEnumerable,Ii=(e,t,n)=>t in e?Dh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xh=(e,t)=>{for(var n in t||(t={}))Lh.call(t,n)&&Ii(e,n,t[n]);if(Ti)for(var n of Ti(t))Sh.call(t,n)&&Ii(e,n,t[n]);return e},ct=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Di=({allLayoutData:e,children:t,slug:n})=>{const o=(0,it.useQueryClient)(),{trackUsage:a}=(0,y.useTracking)(),{push:l}=(0,J.useHistory)(),{setCurrentStep:i}=(0,y.useGuidedTour)(),c=(0,r.useRef)(a),[u,d]=(0,r.useState)(!0),[{query:m,rawQuery:g}]=(0,y.useQueryParams)(),f=Mi(m),h=(0,y.useNotification)(),b=(0,pe.useDispatch)(),{componentsDataStructure:E,contentTypeDataStructure:S,data:C,isLoading:O,status:F}=(0,pe.useSelector)(Vr),v=(0,r.useCallback)(N=>{const k=es(N,e.contentType,e.components);return(0,y.formatContentTypeData)(k,e.contentType,e.components)},[e]);(0,r.useEffect)(()=>()=>{b(li())},[b]),(0,r.useEffect)(()=>{const N=Object.keys(e.components).reduce((x,G)=>{const w=_t(I()(e,["components",G,"attributes"],{}),e.components);return x[G]=(0,y.formatContentTypeData)(w,e.components[G],e.components),x},{}),k=_t(e.contentType.attributes,e.components),H=(0,y.formatContentTypeData)(k,e.contentType,e.components);b(ci(N,H))},[e,b]),(0,r.useEffect)(()=>{const k=Fe.Z.CancelToken.source();return(x=>ct(void 0,null,function*(){b(mn()),d(!0);try{const{data:G}=yield me.be.get(lt(`${n}${f}`),{cancelToken:x.token});b($r(v(G))),d(!1)}catch(G){if(Fe.Z.isCancel(G))return;const w=I()(G,"response.status",null);w===404&&b(Nr(g,!0)),w===403&&(h({type:"info",message:{id:P("permissions.not-allowed.update")}}),l("/"))}}))(k),()=>k.cancel("Operation canceled by the user.")},[v,l,n,b,f,g,h]);const R=(0,r.useCallback)(N=>{const k=N.response.data;let H=I()(k,["error","message"],"Bad Request");Array.isArray(H)&&(H=I()(H,["0","messages","0","id"])),typeof H=="string"&&h({type:"warning",message:H})},[h]),D=(0,r.useCallback)(N=>ct(void 0,null,function*(){try{c.current("willDeleteEntry",N);const{data:k}=yield me.be.delete(lt(`${n}${f}`));return h({type:"success",message:{id:P("success.record.delete")}}),c.current("didDeleteEntry",N),Promise.resolve(k)}catch(k){return c.current("didNotDeleteEntry",xh({error:k},N)),R(k),Promise.reject(k)}}),[n,R,h,f]),T=(0,r.useCallback)(()=>{d(!0),b(Nr(g,!0))},[b,g]),U=(0,r.useCallback)((N,k)=>ct(void 0,null,function*(){const H=lt(`${n}${g}`);try{b(de("submit-pending"));const{data:x}=yield me.be.put(H,N);return c.current("didCreateEntry",k),h({type:"success",message:{id:P("success.record.save")}}),i("contentManager.success"),o.invalidateQueries(["relation"]),b(tt(v(x))),d(!1),b(de("resolved")),Promise.resolve(x)}catch(x){return c.current("didNotCreateEntry",{error:x,trackerProperty:k}),R(x),b(de("resolved")),Promise.reject(x)}}),[v,R,n,b,g,h,i,o]),B=(0,r.useCallback)(()=>ct(void 0,null,function*(){try{c.current("willCheckDraftRelations");const N=lt(`${n}/actions/numberOfDraftRelations`);b(de("draft-relation-check-pending"));const k=yield me.be.get(N);return c.current("didCheckDraftRelations"),b(de("resolved")),k.data.data}catch(N){return R(N),b(de("resolved")),Promise.reject(N)}}),[R,n,b]),A=(0,r.useCallback)(()=>ct(void 0,null,function*(){try{c.current("willPublishEntry");const N=lt(`${n}/actions/publish${f}`);b(de("publish-pending"));const{data:k}=yield me.be.post(N);return c.current("didPublishEntry"),h({type:"success",message:{id:P("success.record.publish")}}),b(tt(v(k))),b(de("resolved")),Promise.resolve(k)}catch(N){return R(N),b(de("resolved")),Promise.reject(N)}}),[v,R,n,f,b,h]),K=(0,r.useCallback)((N,k)=>ct(void 0,null,function*(){const H=lt(`${n}${g}`);try{c.current("willEditEntry",k),b(de("submit-pending"));const{data:x}=yield me.be.put(H,N);return h({type:"success",message:{id:P("success.record.save")}}),c.current("didEditEntry",{trackerProperty:k}),o.invalidateQueries(["relation"]),b(tt(v(x))),b(de("resolved")),Promise.resolve(x)}catch(x){return R(x),c.current("didNotEditEntry",{error:x,trackerProperty:k}),b(de("resolved")),Promise.reject(x)}}),[v,R,n,b,g,h,o]),Z=(0,r.useCallback)(()=>ct(void 0,null,function*(){const N=lt(`${n}/actions/unpublish${f}`);b(de("unpublish-pending"));try{c.current("willUnpublishEntry");const{data:k}=yield me.be.post(N);c.current("didUnpublishEntry"),h({type:"success",message:{id:P("success.record.unpublish")}}),b(tt(v(k))),b(de("resolved"))}catch(k){b(de("resolved")),R(k)}}),[v,h,R,n,b,f]);return t({componentsDataStructure:E,contentTypeDataStructure:S,data:C,isCreatingEntry:u,isLoadingForData:O,onDelete:D,onDeleteSucceeded:T,onPost:U,onDraftRelationCheck:B,onPublish:A,onPut:K,onUnpublish:Z,redirectionLink:"/",status:F})};Di.propTypes={allLayoutData:s().shape({components:s().object.isRequired,contentType:s().object.isRequired}).isRequired,children:s().func.isRequired,slug:s().string.isRequired};const kh=(0,r.memo)(Di);var Fh=p(71818),Ah=Object.defineProperty,Li=Object.getOwnPropertySymbols,jh=Object.prototype.hasOwnProperty,$h=Object.prototype.propertyIsEnumerable,Si=(e,t,n)=>t in e?Ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xi=(e,t)=>{for(var n in t||(t={}))jh.call(t,n)&&Si(e,n,t[n]);if(Li)for(var n of Li(t))$h.call(t,n)&&Si(e,n,t[n]);return e};function Nh(e,t){return n=>{const o=t();return r.createElement(e,xi(xi({},n),o))}}const Vh=Nh;function qh(){const{initialData:e,hasDraftAndPublish:t}=(0,y.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const Bh=qh;var zh=Object.defineProperty,ki=Object.getOwnPropertySymbols,Zh=Object.prototype.hasOwnProperty,Wh=Object.prototype.propertyIsEnumerable,Fi=(e,t,n)=>t in e?zh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_h=(e,t)=>{for(var n in t||(t={}))Zh.call(t,n)&&Fi(e,n,t[n]);if(ki)for(var n of ki(t))Wh.call(t,n)&&Fi(e,n,t[n]);return e};const Uh=(0,j.default)(Fh.default)`
  width: ${(0,y.pxToRem)(6)};
  height: ${(0,y.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,Ai=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,V.useIntl)();if(!e)return null;const o={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},a=t?o.published:o.draft;return r.createElement(L.x,_h({hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5},a.box),r.createElement(L.x,{as:q.k},r.createElement(Uh,{$bulletColor:a.bulletColor}),r.createElement(L.x,{paddingLeft:3},r.createElement(z.Z,{textColor:a.textColor},n({id:P("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"),r.createElement(z.Z,{fontWeight:"bold",textColor:a.textColor},t&&n({id:P("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:P("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})))))};Ai.propTypes={hasDraftAndPublish:s().bool.isRequired,isPublished:s().bool.isRequired};const Hh=Vh(Ai,Bh);var _r=p(70004);const Ur=60*1e3,Hr=Ur*60,hn=Hr*24,ji=hn*30,$i=hn*365,Gh=e=>e<Ur?{unit:"second",value:-Math.round(e/1e3)}:e<Hr?{unit:"minute",value:-Math.round(e/Ur)}:e<hn?{unit:"hour",value:-Math.round(e/Hr)}:e<ji?{unit:"day",value:-Math.round(e/hn)}:e<$i?{unit:"month",value:-Math.round(e/ji)}:{unit:"year",value:-Math.round(e/$i)};var Ni=p(38683);const Kh=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,V.useIntl)(),{initialData:n,isCreatingEntry:o}=(0,y.useCMEditViewDataManager)(),a=(0,r.useRef)(Date.now()),l=(u,d)=>{var m,g,f;const h=((m=n[d])==null?void 0:m.firstname)||"",b=((g=n[d])==null?void 0:g.lastname)||"",S=((f=n[d])==null?void 0:f.username)||(0,Ni.Pp)(h,b),O=(n[u]?new Date(n[u]).getTime():Date.now())-a.current,{unit:F,value:v}=Gh(-O);return{at:t(v,F,{numeric:"auto"}),by:o?"-":S}},i=l("updatedAt","updatedBy"),c=l("createdAt","createdBy");return r.createElement(L.x,null,r.createElement(z.Z,{variant:"sigma",textColor:"neutral600",id:"additional-informations"},e({id:P("containers.Edit.information"),defaultMessage:"Information"})),r.createElement(L.x,{paddingTop:2,paddingBottom:6},r.createElement(_r.i,null)),r.createElement(ce.K,{spacing:4},r.createElement(q.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:P("containers.Edit.information.created"),defaultMessage:"Created"})),r.createElement(z.Z,null,c.at)),r.createElement(q.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:P("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(z.Z,null,c.by)),r.createElement(q.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:P("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"})),r.createElement(z.Z,null,i.at)),r.createElement(q.k,{justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"bold"},e({id:P("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(z.Z,null,i.by))))};var bn=p(67109),vn=p(47149),En=p(47824),Cn=p(98426),bt=p(85018),Qh=Object.defineProperty,Vi=Object.getOwnPropertySymbols,Yh=Object.prototype.hasOwnProperty,Jh=Object.prototype.propertyIsEnumerable,qi=(e,t,n)=>t in e?Qh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bi=(e,t)=>{for(var n in t||(t={}))Yh.call(t,n)&&qi(e,n,t[n]);if(Vi)for(var n of Vi(t))Jh.call(t,n)&&qi(e,n,t[n]);return e};function Xh(e,t){return n=>{const o=t();return r.createElement(e,Bi(Bi({},n),o))}}const eb=Xh;function tb(){const{initialData:e,isCreatingEntry:t,isSingleType:n,status:o,layout:a,hasDraftAndPublish:l,modifiedData:i,onPublish:c,onUnpublish:u,publishConfirmation:d,onPublishPromptDismissal:m}=(0,y.useCMEditViewDataManager)();return{initialData:e,isCreatingEntry:t,isSingleType:n,status:o,layout:a,hasDraftAndPublish:l,modifiedData:i,onPublish:c,onUnpublish:u,publishConfirmation:d,onPublishPromptDismissal:m}}const nb=tb,zi=(0,j.default)(q.k)`
  text-align: center;
`,Zi=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},initialData:o,isCreatingEntry:a,isSingleType:l,hasDraftAndPublish:i,layout:c,modifiedData:u,onPublish:d,onUnpublish:m,status:g,publishConfirmation:{show:f,draftCount:h},onPublishPromptDismissal:b})=>{const{goBack:E}=(0,J.useHistory)(),[S,C]=(0,r.useState)(!1),{formatMessage:O}=(0,V.useIntl)(),F=I()(c,["settings","mainField"],"id"),v=I()(c,["info","displayName"],"NOT FOUND"),R=!jt()(o,u)||a&&!De()(u);let T=O({id:P("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!a&&!l&&(T=o[F]||v),l&&(T=v);let U=null;if(a&&t&&(U=r.createElement(ce.K,{horizontal:!0,spacing:2},i&&r.createElement(ge.z,{disabled:!0,startIcon:r.createElement(bt.Z,null),variant:"secondary"},O({id:"app.utils.publish",defaultMessage:"Publish"})),r.createElement(ge.z,{disabled:!R,loading:g==="submit-pending",type:"submit"},O({id:P("containers.Edit.submit"),defaultMessage:"Save"})))),!a&&e){const Z=i&&n,N=!De()(o.publishedAt),k=N?g==="unpublish-pending":g==="publish-pending",H=N?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},x=N?()=>C(!0):()=>d();U=r.createElement(q.k,null,Z&&r.createElement(ge.z,{disabled:R,loading:k,onClick:x,startIcon:r.createElement(bt.Z,null),variant:"secondary"},O(H)),r.createElement(L.x,{paddingLeft:Z?2:0},r.createElement(ge.z,{disabled:!R,loading:g==="submit-pending",type:"submit"},O({id:P("containers.Edit.submit"),defaultMessage:"Save"}))))}const B=()=>C(Z=>!Z),A=()=>{B(),m()},K=`${O({id:P("api.id"),defaultMessage:"API ID "})} : ${c.apiID}`;return r.createElement(r.Fragment,null,r.createElement(oe.T,{title:T.toString(),primaryAction:U,subtitle:K,navigationAction:r.createElement(y.Link,{startIcon:r.createElement(bn.Z,null),onClick:Z=>{Z.preventDefault(),E()},to:"/"},O({id:"global.back",defaultMessage:"Back"}))}),r.createElement(vn.V,{onClose:B,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:S},r.createElement(En.a,{icon:r.createElement(xt.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(q.k,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(z.Z,{id:"confirm-description"},O({id:P("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>r.createElement("br",null)}))),r.createElement(q.k,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(z.Z,{id:"confirm-description"},O({id:P("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"}))))),r.createElement(Cn.c,{startAction:r.createElement(ge.z,{onClick:B,variant:"tertiary"},O({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ge.z,{variant:"danger-light",onClick:A},O({id:"components.popUpWarning.button.confirm",defaultMessage:"Confirm"}))})),r.createElement(vn.V,{onClose:b,title:O({id:P("popUpWarning.warning.has-draft-relations.title"),defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:f},r.createElement(En.a,{icon:r.createElement(xt.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(zi,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},h,O({id:P("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, one { relation is} other { relations are}}</b> not published yet and might lead to unexpected behavior."},{b:Z=>r.createElement(z.Z,{fontWeight:"bold"},Z),count:h}))),r.createElement(zi,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},O({id:P("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish?"}))))),r.createElement(Cn.c,{startAction:r.createElement(ge.z,{onClick:b,variant:"tertiary"},O({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ge.z,{variant:"success",onClick:d},O({id:P("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Publish"}))})))};Zi.propTypes={allowedActions:s().shape({canUpdate:s().bool.isRequired,canCreate:s().bool.isRequired,canPublish:s().bool.isRequired}).isRequired,initialData:s().object.isRequired,isCreatingEntry:s().bool.isRequired,isSingleType:s().bool.isRequired,status:s().string.isRequired,layout:s().object.isRequired,hasDraftAndPublish:s().bool.isRequired,modifiedData:s().object.isRequired,onPublish:s().func.isRequired,onUnpublish:s().func.isRequired,publishConfirmation:s().shape({show:s().bool.isRequired,draftCount:s().number.isRequired}).isRequired,onPublishPromptDismissal:s().func.isRequired};const rb=(0,r.memo)(Zi,Xe()),ob=eb(rb,nb),sb=e=>{if(!e.layouts)return[];const t=e.layouts.edit,n=e.attributes,o=i=>(0,Y.get)(n,[i,"type"],"");let a=0;const l=[];return t.forEach(i=>{const c=i.some(({name:u})=>o(u)==="dynamiczone");l[a]||(l[a]=[]),c?(a=a===0&&(0,Y.isEmpty)(l[0])?0:a+1,l[a]||(l[a]=[]),l[a].push(i),a+=1):l[a].push(i)}),l.filter(i=>i.length>0)},ab=(e,t)=>{const n=o=>{const a=(0,y.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${o}`,subject:t}]);return(0,Y.uniq)((0,Y.flatMap)(a,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}},ib=e=>{if(!e)return[];const n=[...e.contentType.layouts.edit,...Object.values(e.components).flatMap(a=>a.layouts.edit)].flat().filter(a=>a.fieldSchema.customField).map(a=>a.fieldSchema.customField);return[...new Set(n)]};var lb=Object.defineProperty,Wi=Object.getOwnPropertySymbols,cb=Object.prototype.hasOwnProperty,ub=Object.prototype.propertyIsEnumerable,_i=(e,t,n)=>t in e?lb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ui=(e,t)=>{for(var n in t||(t={}))cb.call(t,n)&&_i(e,n,t[n]);if(Wi)for(var n of Wi(t))ub.call(t,n)&&_i(e,n,t[n]);return e};function db(e,t){return n=>{const o=t();return r.createElement(e,Ui(Ui({},n),o))}}const pb=db;function mb(){const{hasDraftAndPublish:e,modifiedData:t}=(0,y.useCMEditViewDataManager)();let n={};return e&&(n=(0,Y.isEmpty)(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const fb=mb;var gb=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Hi=({isCreatingEntry:e,onDelete:t,onDeleteSucceeded:n,trackerProperty:o})=>{const[a,l]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),{formatMessage:u}=(0,V.useIntl)(),d=(0,y.useNotification)(),m=()=>l(f=>!f),g=()=>gb(void 0,null,function*(){try{c(!0),yield t(o),c(!1),m(),n()}catch(f){const h=I()(f,"response.payload.message",u({id:P("error.record.delete")}));c(!1),m(),d({type:"warning",message:h})}});return e?null:r.createElement(r.Fragment,null,r.createElement(ge.z,{onClick:m,size:"S",startIcon:r.createElement(ze.default,null),variant:"danger-light"},u({id:P("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})),r.createElement(y.ConfirmDialog,{isConfirmButtonLoading:i,isOpen:a,onConfirm:g,onToggleDialog:m}))};Hi.propTypes={isCreatingEntry:s().bool.isRequired,onDelete:s().func.isRequired,onDeleteSucceeded:s().func.isRequired,trackerProperty:s().object.isRequired};const yb=(0,r.memo)(Hi,Xe()),hb=pb(yb,fb),Gr=({columns:e,customFieldInputs:t})=>r.createElement(qe.r,{gap:4},e.map(({fieldSchema:n,labelAction:o,metadatas:a,name:l,size:i,queryInfos:c})=>{if(n.type==="component"){const{component:d,max:m,min:g,repeatable:f=!1,required:h=!1}=n;return r.createElement(Ce.P,{col:i,s:12,xs:12,key:d},r.createElement(pn,{componentUid:d,labelAction:o,isRepeatable:f,intlLabel:{id:a.label,defaultMessage:a.label},max:m,min:g,name:l,required:h}))}return r.createElement(Ce.P,{col:i,key:l,s:12,xs:12},r.createElement(vr,{size:i,fieldSchema:n,keys:l,labelAction:o,metadatas:a,queryInfos:c,customFieldInputs:t}))}));Gr.defaultProps={customFieldInputs:{}},Gr.propTypes={columns:s().array.isRequired,customFieldInputs:s().object};const bb=Gr,Kr=e=>e["content-manager_editViewLayoutManager"].currentLayout,vb=(0,Dt.P1)(Kr,e=>{var t;return sb((t=e==null?void 0:e.contentType)!=null?t:{})}),Eb=(0,Dt.P1)(Kr,e=>ib(e)),Gi=le.Z.contentManager,Cb=[{action:"plugin::content-type-builder.read",subject:null}],Qr=({allowedActions:e,isSingleType:t,goBack:n,slug:o,id:a,origin:l,userPermissions:i})=>{const{trackUsage:c}=(0,y.useTracking)(),{formatMessage:u}=(0,V.useIntl)(),{layout:d,formattedContentTypeLayout:m,customFieldUids:g}=(0,pe.useSelector)(R=>({layout:Kr(R),formattedContentTypeLayout:vb(R),customFieldUids:Eb(R)})),{isLazyLoading:f,lazyComponentStore:h}=Er(g),{createActionAllowedFields:b,readActionAllowedFields:E,updateActionAllowedFields:S}=ab(i,o),C=t?Gi.singleTypesConfigurations:Gi.collectionTypesConfigurations,O=`/content-manager/${t?"singleType":"collectionType"}/${o}/configurations/edit`,F=t?kh:zy,v=R=>R.every(D=>D.every(T=>T.fieldSchema.type==="dynamiczone"));return f?r.createElement(y.LoadingIndicatorPage,null):r.createElement(F,{allLayoutData:d,slug:o,id:a,origin:l},({componentsDataStructure:R,contentTypeDataStructure:D,data:T,isCreatingEntry:U,isLoadingForData:B,onDelete:A,onDeleteSucceeded:K,onPost:Z,onPublish:N,onDraftRelationCheck:k,onPut:H,onUnpublish:x,redirectionLink:G,status:w})=>r.createElement(wh,{allowedActions:e,allLayoutData:d,createActionAllowedFields:b,componentsDataStructure:R,contentTypeDataStructure:D,from:G,initialValues:T,isCreatingEntry:U,isLoadingForData:B,isSingleType:t,onPost:Z,onPublish:N,onDraftRelationCheck:k,onPut:H,onUnpublish:x,readActionAllowedFields:E,redirectToPreviousPage:n,slug:o,status:w,updateActionAllowedFields:S},r.createElement(be.o,{"aria-busy":w!=="resolved"},r.createElement(ob,{allowedActions:e}),r.createElement(ft.D,null,r.createElement(qe.r,{gap:4},r.createElement(Ce.P,{col:9,s:12},r.createElement(ce.K,{spacing:6},m.map((M,_)=>{if(v(M)){const{0:{0:{name:$,fieldSchema:Q,metadatas:ne,labelAction:re}}}=M;return r.createElement(L.x,{key:_},r.createElement(qe.r,{gap:4},r.createElement(Ce.P,{col:12,s:12,xs:12},r.createElement(Ay,{name:$,fieldSchema:Q,labelAction:re,metadatas:ne}))))}return r.createElement(L.x,{key:_,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150"},r.createElement(ce.K,{spacing:6},M.map(($,Q)=>r.createElement(bb,{columns:$,customFieldInputs:h,key:Q}))))}))),r.createElement(Ce.P,{col:3,s:12},r.createElement(ce.K,{spacing:2},r.createElement(Hh,null),r.createElement(L.x,{as:"aside","aria-labelledby":"additional-informations",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(Kh,null),r.createElement(Xt,{area:"contentManager.editView.informations"})),r.createElement(L.x,{as:"aside","aria-labelledby":"links"},r.createElement(ce.K,{spacing:2},r.createElement(Xt,{area:"contentManager.editView.right-links",slug:o}),o!=="strapi::administrator"&&r.createElement(y.CheckPermissions,{permissions:Cb},r.createElement(y.LinkButton,{onClick:()=>{c("willEditEditLayout")},size:"S",startIcon:r.createElement(mt.Z,null),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${o}`,variant:"secondary"},u({id:P("link-to-ctb"),defaultMessage:"Edit the model"}))),r.createElement(y.CheckPermissions,{permissions:C},r.createElement(y.LinkButton,{size:"S",startIcon:r.createElement(yd.Z,null),style:{width:"100%"},to:O,variant:"secondary"},u({id:"app.links.configure-view",defaultMessage:"Configure the view"}))),e.canDelete&&r.createElement(hb,{isCreatingEntry:U,onDelete:A,onDeleteSucceeded:K}))))))))))};Qr.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},Qr.propTypes={allowedActions:s().shape({canRead:s().bool.isRequired,canUpdate:s().bool.isRequired,canCreate:s().bool.isRequired,canDelete:s().bool.isRequired}).isRequired,id:s().string,isSingleType:s().bool,goBack:s().func.isRequired,origin:s().string,slug:s().string.isRequired,userPermissions:s().array};const Pb=(0,r.memo)(Qr);var Ob=Object.defineProperty,Rb=Object.defineProperties,wb=Object.getOwnPropertyDescriptors,Ki=Object.getOwnPropertySymbols,Mb=Object.prototype.hasOwnProperty,Tb=Object.prototype.propertyIsEnumerable,Qi=(e,t,n)=>t in e?Ob(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ib=(e,t)=>{for(var n in t||(t={}))Mb.call(t,n)&&Qi(e,n,t[n]);if(Ki)for(var n of Ki(t))Tb.call(t,n)&&Qi(e,n,t[n]);return e},Db=(e,t)=>Rb(e,wb(t));const Yr=e=>{const t=(0,r.useMemo)(()=>Wo(e.slug),[e.slug]),{isLoading:n,allowedActions:o}=(0,y.useRBAC)(t,e.userPermissions);return n?r.createElement(y.LoadingIndicatorPage,null):r.createElement(Pb,Db(Ib({},e),{allowedActions:o}))};Yr.defaultProps={permissions:[]},Yr.propTypes={permissions:s().array,slug:s().string.isRequired,userPermissions:s().array.isRequired};const Lb=(0,r.memo)(Yr,Xe());var Sb=Object.defineProperty,xb=Object.defineProperties,kb=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertySymbols,Yi=Object.prototype.hasOwnProperty,Ji=Object.prototype.propertyIsEnumerable,Xi=(e,t,n)=>t in e?Sb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fb=(e,t)=>{for(var n in t||(t={}))Yi.call(t,n)&&Xi(e,n,t[n]);if(Pn)for(var n of Pn(t))Ji.call(t,n)&&Xi(e,n,t[n]);return e},Ab=(e,t)=>xb(e,kb(t)),jb=(e,t)=>{var n={};for(var o in e)Yi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Pn)for(var o of Pn(e))t.indexOf(o)<0&&Ji.call(e,o)&&(n[o]=e[o]);return n};const el=e=>{var t=e,{layout:n}=t,o=jb(t,["layout"]);const a=(0,pe.useSelector)(Fo),l=(0,pe.useDispatch)(),[{query:i}]=(0,y.useQueryParams)(),{runHookWaterfall:c}=(0,y.useStrapiApp)(),u=hs(i,o.slug,"editView");return(0,r.useEffect)(()=>{const d=c(Yt.Eo,{layout:n,query:i});return l(fd(d.layout,i)),()=>{l(md())}},[n,l,i,c]),!a||!u?r.createElement(y.LoadingIndicatorPage,null):r.createElement(Lb,Ab(Fb({},o),{userPermissions:u}))};el.propTypes={layout:s().shape({components:s().object.isRequired,contentType:s().shape({uid:s().string.isRequired,settings:s().object.isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,attributes:s().object.isRequired}).isRequired}).isRequired};const On=el;var $b=p(11700),Vt=p.n($b),Nb=p(94654),Vb=p.n(Nb),qb=Object.defineProperty,Bb=Object.defineProperties,zb=Object.getOwnPropertyDescriptors,tl=Object.getOwnPropertySymbols,Zb=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,nl=(e,t,n)=>t in e?qb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_b=(e,t)=>{for(var n in t||(t={}))Zb.call(t,n)&&nl(e,n,t[n]);if(tl)for(var n of tl(t))Wb.call(t,n)&&nl(e,n,t[n]);return e},Ub=(e,t)=>Bb(e,zb(t));const Jr=e=>e.reduce((t,n)=>t+n.size,0),Hb=e=>e.reduce((t,n,o)=>{const a={rowId:o,rowContent:n};return t.concat(a)},[]),vt=e=>e.reduce((t,n)=>{let o=[];const a=n.rowContent.reduce((c,u)=>{const d=Jr(c);return u.name==="_TEMP_"||(d+u.size<=12?c.push(u):o.push(u)),c},[]),l=t.length===0?0:Math.max.apply(Math,t.map(c=>c.rowId))+1,i=Jr(a);if(i<12&&a.push({name:"_TEMP_",size:12-i}),t.push({rowId:l,rowContent:a}),o.length>0){const c=Jr(o);c<12&&o.push({name:"_TEMP_",size:12-c}),t.push({rowId:l+1,rowContent:o}),o=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),Gb=e=>e.reduce((t,n)=>{const o=n.rowContent.filter(a=>a.name!=="_TEMP_");return t.concat([o])},[]),rl=e=>{switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}},Kb=(e,t=[])=>t.reduce((n,{rowContent:o})=>{var a,l;const i=(l=(a=o.find(c=>c.name===e))==null?void 0:a.size)!=null?l:null;return i&&(n=i),n},null),Qb=(e,t,n=[])=>n.map(o=>(o.rowContent=o.rowContent.map(a=>a.name===e?Ub(_b({},a),{size:t}):a),o)),Xr={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},Yb=(e=Xr,t)=>(0,Kt.default)(e,n=>{var o,a,l;const i=["modifiedData","layouts","edit"];switch(t.type){case"MOVE_ROW":{const c=I()(e,i,[]),{fromIndex:u,toIndex:d}=t;X()(n,i,Wt(c,u,d));break}case"ON_ADD_FIELD":{const c=Ve()(e),u=rl(I()(c,["modifiedData","attributes",t.name,"type"],"")),d=I()(c,i,[]).length,m=[...i,d-1,"rowContent"],g=I()(c,m,[]);let f=I()(c,i,[]);Array.isArray(g)?X()(f,[d>0?d-1:0,"rowContent"],[...g,{name:t.name,size:u}]):X()(f,[d>0?d-1:0,"rowContent"],[{name:t.name,size:u}]);const h=vt(f);X()(n,i,h);break}case"ON_CHANGE":{X()(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{X()(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{X()(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const c=I()(e,[...i,t.rowIndex,"rowContent"],[]);let u=Ve()(e);if(c.length===1||c.length===2&&I()(c,[1,"name"],"")==="_TEMP_"){const m=I()(e,i,[]);X()(u,i,m.filter((g,f)=>t.rowIndex!==f))}else X()(u,[...i,t.rowIndex,"rowContent"],c.filter((m,g)=>g!==t.fieldIndex));const d=vt(I()(u,i,[]));X()(n,i,d);break}case"REORDER_DIFF_ROW":{const c=I()(e,[...i,t.dragRowIndex,"rowContent"],[]),u=I()(e,[...i,t.hoverRowIndex,"rowContent"],[]),d=I()(e,[...i,t.dragRowIndex,"rowContent",t.dragIndex],{}),m=[...u,d];let g=Ve()(e);X()(g,[...i,t.dragRowIndex,"rowContent"],c.filter((h,b)=>t.dragIndex!==b)),X()(g,[...i,t.hoverRowIndex,"rowContent"],Wt(m,m.length-1,t.hoverIndex));const f=vt(I()(g,i,[]));X()(n,i,f);break}case"REORDER_ROW":{const c=Ve()(e),u=I()(c,[...i,t.dragRowIndex,"rowContent"],[]);X()(c,[...i,t.dragRowIndex,"rowContent"],Wt(u,t.dragIndex,t.hoverIndex));const d=vt(I()(c,i,[]));X()(n,i,d);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:I()(e,["modifiedData","metadatas",t.name,"edit"],{}),size:(l=Kb(t.name,(a=(o=e.modifiedData)==null?void 0:o.layouts)==null?void 0:a.edit))!=null?l:rl()};break}case"SUBMIT_META_FORM":{X()(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const c=Ve()(I()(e,i,[])),u=Qb(e.metaToEdit,e.metaForm.size,c);u.length>0&&X()(n,i,vt(u));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}});var Jb=Object.defineProperty,Xb=Object.defineProperties,e0=Object.getOwnPropertyDescriptors,ol=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty,n0=Object.prototype.propertyIsEnumerable,sl=(e,t,n)=>t in e?Jb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r0=(e,t)=>{for(var n in t||(t={}))t0.call(t,n)&&sl(e,n,t[n]);if(ol)for(var n of ol(t))n0.call(t,n)&&sl(e,n,t[n]);return e},o0=(e,t)=>Xb(e,e0(t));const s0=(e,t,n)=>{let o=(0,Y.cloneDeep)(t);return(0,Y.set)(o,["layouts","edit"],vt(Hb(t.layouts.edit))),o0(r0({},e),{initialData:o,modifiedData:o,componentLayouts:n})};var We=p(17205),al=p(78114);const il=({componentUid:e})=>{const{componentLayouts:t}=ot(),{formatMessage:n}=(0,V.useIntl)(),o=I()(t,[e],{}),a=I()(o,["layouts","edit"],[]);return r.createElement(L.x,{padding:3},a.map((l,i)=>r.createElement(qe.r,{gap:4,key:i},l.map(c=>r.createElement(Ce.P,{key:c.name,col:c.size},r.createElement(L.x,{paddingTop:2},r.createElement(q.k,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200"},r.createElement(z.Z,{textColor:"neutral800"},c.name))))))),r.createElement(L.x,{paddingTop:2},r.createElement(y.Link,{startIcon:r.createElement(al.Z,null),to:`/content-manager/components/${e}/configurations/edit`},n({id:P("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"}))))};il.propTypes={componentUid:s().string.isRequired};const a0=il,i0=(0,j.default)(st.Flex)`
  text-decoration: none;

  &:focus,
  &:hover {
    ${({theme:e})=>`
      background-color: ${e.colors.primary100};
      border-color: ${e.colors.primary200};

      ${st.Typography} {
          color: ${e.colors.primary600};
      }
    `}

    /* > ComponentIcon */
    > div:first-child {
      background: ${({theme:e})=>e.colors.primary200};
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`,ll=({components:e})=>{const{componentLayouts:t}=ot();return r.createElement(st.Stack,{spacing:2,horizontal:!0,overflow:"scroll hidden",padding:3},e.map(n=>{var o,a,l;return r.createElement(i0,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,key:n,padding:2,direction:"column",borderColor:"neutral200",as:J.Link,to:`/content-manager/components/${n}/configurations/edit`},r.createElement(St,null),r.createElement(st.Box,{paddingTop:1},r.createElement(st.Typography,{fontSize:1,textColor:"neutral600",fontWeight:"bold"},(l=(a=(o=t==null?void 0:t[n])==null?void 0:o.info)==null?void 0:a.displayName)!=null?l:"")))}))};ll.propTypes={components:s().arrayOf(s().string).isRequired};const l0=ll,cl=(0,j.default)(Re.h)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,eo=({attribute:e,onEditField:t,onDeleteField:n,children:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(L.x,{overflow:"hidden",width:"100%"},r.createElement(q.k,{paddingLeft:3,alignItems:"center",justifyContent:"space-between"},r.createElement(z.Z,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0},o),r.createElement(q.k,null,r.createElement(cl,{label:a({id:P("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:o}),onClick:t,icon:r.createElement(mt.Z,null),noBorder:!0}),r.createElement(cl,{label:a({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:o}),"data-testid":"delete-field",onClick:n,icon:r.createElement(ze.default,null),noBorder:!0}))),(e==null?void 0:e.type)==="component"&&r.createElement(a0,{componentUid:e.component}),(e==null?void 0:e.type)==="dynamiczone"&&r.createElement(l0,{components:e.components}))};eo.defaultProps={attribute:void 0},eo.propTypes={attribute:s().shape({components:s().array,component:s().string,type:s().string}),onEditField:s().func.isRequired,onDeleteField:s().func.isRequired,children:s().string.isRequired};const c0=eo,u0=(0,j.default)(q.k)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,d0=(0,j.default)(pt.Z)`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,p0=(0,j.default)(q.k)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,m0=(0,j.default)(q.k)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,to=({attribute:e,children:t,index:n,lastIndex:o,moveItem:a,moveRow:l,name:i,onDeleteField:c,onEditField:u,rowIndex:d,size:m})=>{const[g,f]=(0,r.useState)(!1),h=i==="_TEMP_",{setIsDraggingSibling:b}=ot(),E=m===12,S=(0,r.useRef)(null),C=(0,r.useRef)(null),[{clientOffset:O,isOver:F},v]=(0,ke.useDrop)({accept:Le.EDIT_FIELD,hover(x,G){if(!C.current||x.size!==12)return;const w=G.getItem().index,M=n,_=G.getItem().rowIndex,$=d;if(w===M&&_===$)return;const Q=C.current.getBoundingClientRect(),ne=(Q.bottom-Q.top)/2,he=G.getClientOffset().y-Q.top;_<$&&he<ne||_>$&&he>ne||(l(_,$),x.rowIndex=$,x.itemIndex=M)},drop(x,G){if(!C.current)return;const w=G.getItem().index,M=n,_=G.getItem().rowIndex,$=d;if(x.size===12||w===M&&_===$)return;const Q=C.current.getBoundingClientRect();if(Math.abs(G.getClientOffset().x-Q.left)>Q.width/1.8){a(w,M+1,_,$),x.itemIndex=M+1,x.rowIndex=$;return}a(w,M,_,$),x.itemIndex=M,x.rowIndex=$},collect:x=>({canDrop:x.canDrop(),clientOffset:x.getClientOffset(),isOver:x.isOver(),isOverCurrent:x.isOver({shallow:!0}),itemType:x.getItemType()})}),[{isDragging:R,getItem:D},T,U]=(0,ke.useDrag)({type:Le.EDIT_FIELD,item(){return b(!0),{index:n,labelField:t,rowIndex:d,name:i,size:m}},canDrag(){return i!=="_TEMP_"},collect:x=>({isDragging:x.isDragging(),getItem:x.getItem()}),end(){b(!1)}});(0,r.useEffect)(()=>{U((0,Pr.rX)(),{captureDraggingState:!0})},[U]);const B={dragRef:T(S),dropRef:v(C)};let A=!1,K=!1;if(C.current&&O){const x=C.current.getBoundingClientRect();A=F&&D.size!==12&&Math.abs(O.x-x.left)<x.width/2,K=F&&D.size!==12&&Math.abs(O.x-x.left)>x.width/2,i==="_TEMP_"&&(A=F&&D.size!==12,K=!1)}const Z=()=>e&&E?`${74/16}rem`:`${32/16}rem`,N=n===0&&!E,k=n===o&&!E,H=n!==0&&!E;return r.createElement(Ce.P,{col:m},r.createElement(u0,{ref:B.dropRef,showLeftCarret:A,showRightCarret:K,isFirst:N,isLast:k,hasHorizontalPadding:H,onDrag:()=>{E&&!g&&f(!0)},onDragEnd:()=>{E&&f(!1)}},g&&E&&r.createElement(L.x,{width:"100%",height:"2px",background:"primary600"}),r.createElement(p0,{width:E&&g?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:Z(),alignItems:"stretch",isDragging:R,dragStart:g,isFullSize:E,isHidden:h},r.createElement(m0,{as:"span",type:"button",ref:B.dragRef,onClick:x=>x.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(d0,null)),!h&&r.createElement(c0,{attribute:e,onEditField:u,onDeleteField:c},t))))};to.defaultProps={attribute:void 0},to.propTypes={attribute:s().shape({components:s().array,component:s().string,type:s().string}),children:s().string.isRequired,index:s().number.isRequired,moveItem:s().func.isRequired,moveRow:s().func.isRequired,name:s().string.isRequired,onDeleteField:s().func.isRequired,onEditField:s().func.isRequired,rowIndex:s().number.isRequired,lastIndex:s().number.isRequired,size:s().number.isRequired};const f0=to,ul=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:o,index:a,lastIndex:l})=>{const{setEditFieldToSelect:i,attributes:c,modifiedData:u,moveRow:d,moveItem:m}=ot(),g=I()(c,[e.name],{}),f=I()(u,["metadatas",e.name,"edit","label"],"");return r.createElement(f0,{onEditField:()=>i(e.name),onDeleteField:()=>t(n,a),attribute:g,index:a,lastIndex:l,rowIndex:o,name:e.name,size:e.size,moveRow:d,moveItem:m},f||e.name)};ul.propTypes={index:s().number.isRequired,lastIndex:s().number.isRequired,onRemoveField:s().func.isRequired,rowId:s().number.isRequired,rowIndex:s().number.isRequired,rowItem:s().object.isRequired};const g0=ul,dl=({row:e,onRemoveField:t,rowIndex:n})=>r.createElement(qe.r,null,e.rowContent.map((o,a)=>r.createElement(g0,{key:o.name,rowItem:o,index:a,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1})));dl.propTypes={onRemoveField:s().func.isRequired,row:s().object.isRequired,rowIndex:s().number.isRequired};const y0=dl,h0=[{action:"plugin::content-type-builder.read",subject:null}],b0=()=>{const{trackUsage:e}=(0,y.useTracking)(),{formatMessage:t}=(0,V.useIntl)(),{slug:n,modifiedData:o,isContentTypeView:a}=ot(),l=a?"content-types":"components",i=`/plugins/content-type-builder/${l==="content-types"?l:"component-categories"}`,c=I()(o,"category",""),u=l==="content-types"?n:`${c}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:r.createElement(y.CheckPermissions,{permissions:h0},r.createElement(y.LinkButton,{to:`${i}/${u}`,onClick:d,size:"S",startIcon:r.createElement(mt.Z,null),variant:"secondary"},t({id:P(`edit-settings-view.link-to-ctb.${l}`),defaultMessage:"Edit the content type"})))},pl=({editLayout:e,fields:t,onRemoveField:n,onAddField:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(ce.K,{spacing:4},r.createElement(q.k,{justifyContent:"space-between"},r.createElement("div",null,r.createElement(L.x,null,r.createElement(z.Z,{fontWeight:"bold"},a({id:P("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"}))),r.createElement(L.x,null,r.createElement(z.Z,{variant:"pi",textColor:"neutral600"},a({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(b0,null)),r.createElement(L.x,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(ce.K,{spacing:2},e.map((l,i)=>r.createElement(y0,{key:l.rowId,row:l,rowIndex:i,onRemoveField:n})),r.createElement(We.O,{id:"label",label:a({id:P("containers.SettingPage.add.field"),defaultMessage:"Insert another field"}),as:ge.z,"data-testid":"add-field",fullWidth:!0,startIcon:r.createElement(At.default,null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(l=>r.createElement(We.s,{key:l,onClick:()=>o(l)},l))))))};pl.propTypes={editLayout:s().array.isRequired,fields:s().array.isRequired,onAddField:s().func.isRequired,onRemoveField:s().func.isRequired};const v0=pl;var ml=p(42866),fl=p(24969),gl=p(59946),yl=p(36856),Rn=p(34668),E0=p(14484),C0=p(73145),hl=p(82574),no=p(74525),P0=p(48394),ro=p(21210),O0=p(3963),qt=p(31666),R0=p(60133),w0=p(85038),M0=p(65531);const bl={biginteger:r.createElement(qt.Z,null),boolean:r.createElement(E0.Z,null),date:r.createElement(Rn.Z,null),datetime:r.createElement(Rn.Z,null),decimal:r.createElement(qt.Z,null),email:r.createElement(C0.Z,null),enum:r.createElement(hl.Z,null),enumeration:r.createElement(hl.Z,null),file:r.createElement(no.Z,null),files:r.createElement(no.Z,null),float:r.createElement(qt.Z,null),integer:r.createElement(qt.Z,null),media:r.createElement(no.Z,null),number:r.createElement(qt.Z,null),relation:r.createElement(P0.Z,null),string:r.createElement(ro.Z,null),text:r.createElement(ro.Z,null),richtext:r.createElement(ro.Z,null),time:r.createElement(Rn.Z,null),timestamp:r.createElement(Rn.Z,null),json:r.createElement(R0.Z,null),uid:r.createElement(O0.Z,null),component:r.createElement(w0.Z,null),dynamiczone:r.createElement(M0.Z,null)},oo=({type:e,customFieldUid:t})=>{const n=(0,y.useCustomFields)();let o=bl[e];if(t){const l=n.get(t).icon;l&&(o=r.createElement(L.x,{marginRight:3,width:7,height:6},r.createElement(l,null)))}return bl[e]?o:null};oo.defaultProps={customFieldUid:null},oo.propTypes={type:s().string.isRequired,customFieldUid:s().string};const vl=oo,T0=e=>e.reduce((t,n)=>{const o=(0,Y.get)(n,["attributes"],{}),a=Object.keys(o).filter(l=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext"].includes((0,Y.get)(o,[l,"type"],"")));return t[n.uid]=a,t},{}),El=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=P(e==="mainField"?"containers.SettingPage.editSettings.entry.title":`form.Input.${e}`);return{type:t,label:{id:n}}};var Bt=p(20707),I0=Object.defineProperty,wn=Object.getOwnPropertySymbols,Cl=Object.prototype.hasOwnProperty,Pl=Object.prototype.propertyIsEnumerable,Ol=(e,t,n)=>t in e?I0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,so=(e,t)=>{for(var n in t||(t={}))Cl.call(t,n)&&Ol(e,n,t[n]);if(wn)for(var n of wn(t))Pl.call(t,n)&&Ol(e,n,t[n]);return e},D0=(e,t)=>{var n={};for(var o in e)Cl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&wn)for(var o of wn(e))t.indexOf(o)<0&&Pl.call(e,o)&&(n[o]=e[o]);return n};const ao=e=>{var t=e,{type:n,options:o,onChange:a,value:l,name:i}=t,c=D0(t,["type","options","onChange","value","name"]);const{formatMessage:u}=(0,V.useIntl)();switch(n){case"text":return r.createElement(rr.o,so({onChange:a,value:l,name:i},c));case"bool":return r.createElement(Bt.s,so({onChange:d=>{a({target:{name:i,value:d.target.checked}})},checked:l,name:i,onLabel:u({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:u({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"})},c));case"select":return r.createElement(Ze.P,so({value:l,name:i,onChange:d=>a({target:{name:i,value:d}})},c),o.map(d=>r.createElement(Pe.W,{key:d,value:d},d)));default:return null}};ao.defaultProps={options:void 0},ao.propTypes={type:s().string.isRequired,options:s().arrayOf(s().string),onChange:s().func.isRequired,value:s().oneOfType([s().string,s().bool]).isRequired,name:s().string.isRequired};const L0=ao,S0=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],x0=["dynamiczone","component","json","richtext"],k0=[1,5,10,15,30,60],F0=["datetime","time"],Rl=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,V.useIntl)(),{modifiedData:o,selectedField:a,attributes:l,fieldForm:i}=ot(),c=(0,r.useMemo)(Vn,[]),{schemas:u}=(0,pe.useSelector)(C=>c(C),pe.shallowEqual),d=(0,r.useMemo)(()=>{if(!a)return[];const C=I()(o,["metadatas",a,"edit"],{});return Object.keys(C).filter(O=>O!=="visible")},[a,o]),m=(0,r.useMemo)(()=>T0(u),[u]),g=(0,r.useCallback)(C=>{if(C!=="relation"&&C!=="component")return[];const O=C==="component"?"component":"targetModel",F=I()(o,["attributes",a,O],"");return I()(m,[F],[])},[a,m,o]),f=d.map(C=>{const O=I()(l,[a,"type"]);return["component","dynamiczone"].includes(O)&&!["label","description"].includes(C)||O==="component"&&C!=="label"||["media","json","boolean"].includes(O)&&C==="placeholder"||C==="step"?null:r.createElement(Ce.P,{col:6,key:C},r.createElement(L0,{type:El(C).type,hint:C==="mainField"?n({id:P("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:I()(El(C),"label.id","app.utils.defaultMessage")}),name:C,onChange:e,value:I()(i,["metadata",C],""),options:g(O)}))}),h=!x0.includes(l[a].type),b=r.createElement(Ce.P,{col:6,key:"size"},r.createElement(Ze.P,{value:i==null?void 0:i.size,name:"size",onChange:C=>{t({name:a,value:C})},label:n({id:P("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"})},S0.map(([C,O])=>r.createElement(Pe.W,{key:C,value:C},O)))),E=F0.includes(l[a].type),S=r.createElement(Ce.P,{col:6,key:"step"},r.createElement(Ze.P,{value:I()(i,["metadata","step"],1),name:"step",onChange:C=>e({target:{name:"step",value:C}}),label:n({id:P("containers.SettingPage.editSettings.step.label"),defaultMessage:"Time interval (minutes)"})},k0.map(C=>r.createElement(Pe.W,{key:C,value:C},C))));return r.createElement(r.Fragment,null,f,h&&b,E&&S)};Rl.propTypes={onMetaChange:s().func.isRequired,onSizeChange:s().func.isRequired};const A0=Rl,j0=(0,j.default)(q.k)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,io=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:o,type:a,customFieldUid:l})=>{const{selectedField:i}=ot(),{formatMessage:c}=(0,V.useIntl)(),u=()=>a==="timestamp"?"date":["decimal","float","integer","biginter"].includes(a)?"number":a;return r.createElement(ml.P,{onClose:e,labelledBy:"title"},r.createElement("form",{onSubmit:o},r.createElement(fl.x,null,r.createElement(j0,null,r.createElement(vl,{type:u(),customFieldUid:l}),r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},c({id:P("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Vt()(i)})))),r.createElement(gl.f,null,r.createElement(qe.r,{gap:4},r.createElement(A0,{onMetaChange:t,onSizeChange:n}))),r.createElement(yl.m,{startActions:r.createElement(ge.z,{onClick:e,variant:"tertiary"},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ge.z,{type:"submit"},c({id:"global.finish",defaultMessage:"Finish"}))})))};io.defaultProps={customFieldUid:null},io.propTypes={customFieldUid:s().string,onSubmit:s().func.isRequired,onToggle:s().func.isRequired,onMetaChange:s().func.isRequired,onSizeChange:s().func.isRequired,type:s().string.isRequired};const $0=io,N0=(e,t,n)=>me.be.put(fe(n?`content-types/${t}/configuration`:`components/${t}/configuration`),e),lo=({mainLayout:e,components:t,isContentTypeView:n,slug:o,updateLayout:a})=>{const[l,i]=(0,r.useReducer)(Yb,Xr,()=>s0(Xr,e,t)),[c,u]=(0,r.useState)(!1),{trackUsage:d}=(0,y.useTracking)(),m=(0,y.useNotification)(),{goBack:g}=(0,J.useHistory)(),[f,h]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!1),{componentLayouts:S,initialData:C,modifiedData:O,metaToEdit:F,metaForm:v}=l,{formatMessage:R}=(0,V.useIntl)(),D=I()(e,["info","displayName"],""),T=I()(O,["attributes"],{}),U=Object.keys(T).filter(W=>{const ue=I()(T,[W,"type"],"");return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp"].includes(ue)&&!!ue}),B=I()(O,["layouts","edit"],[]),A=Vb()(B,"rowContent"),K=Object.keys(O.attributes).filter(W=>I()(O,["metadatas",W,"edit","visible"],!1)===!0).filter(W=>A.findIndex(ue=>ue.name===W)===-1).sort(),Z=({target:{name:W,value:ue}})=>{i({type:"ON_CHANGE",keys:W.split("."),value:ue})},N=()=>{h(W=>!W)},k=()=>{E(W=>!W)},H=({target:{name:W,value:ue}})=>{i({type:"ON_CHANGE_META",keys:W.split("."),value:ue})},x=({name:W,value:ue})=>{i({type:"ON_CHANGE_SIZE",name:W,value:ue})},G=W=>{W.preventDefault(),i({type:"SUBMIT_META_FORM"}),N()},w=W=>{W.preventDefault(),k()},M=(0,it.useMutation)(W=>N0(W,o,n),{onSuccess({data:W}){a&&a(W.data),i({type:"SUBMIT_SUCCEEDED"}),k(),d("didEditEditSettings")},onError(){m({type:"warning",message:{id:"notification.error"}})}}),{isLoading:_}=M,$=()=>{const W=ir()(Ve()(O),["layouts","metadatas","settings"]);X()(W,"layouts.edit",Gb(W.layouts.edit)),M.mutate(W)},Q=(W,ue)=>{i({type:"MOVE_RELATION",fromIndex:W,toIndex:ue})},ne=(W,ue)=>{i({type:"MOVE_FIELD",fromIndex:W,toIndex:ue})},re=(W,ue,_e,ve)=>{i(_e===ve?{type:"REORDER_ROW",dragRowIndex:_e,dragIndex:W,hoverIndex:ue}:{type:"REORDER_DIFF_ROW",dragIndex:W,hoverIndex:ue,dragRowIndex:_e,hoverRowIndex:ve})},he=(W,ue)=>{i({type:"MOVE_ROW",fromIndex:W,toIndex:ue})};return r.createElement(Ne,{isContentTypeView:n,attributes:T,modifiedData:O,slug:o,componentLayouts:S,selectedField:F,fieldForm:v,onMoveRelation:Q,onMoveField:ne,moveRow:he,moveItem:re,setEditFieldToSelect:W=>{i({type:"SET_FIELD_TO_EDIT",name:W}),N()},isDraggingSibling:c,setIsDraggingSibling:u},r.createElement(be.o,null,r.createElement("form",{onSubmit:w},r.createElement(oe.T,{title:R({id:P("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${Vt()(D)}`},{name:Vt()(D)}),subtitle:R({id:P("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:r.createElement(y.Link,{startIcon:r.createElement(bn.Z,null),onClick:W=>{W.preventDefault(),g()},to:"/"},R({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ge.z,{disabled:jt()(C,O),startIcon:r.createElement(bt.Z,null),type:"submit"},R({id:"global.save",defaultMessage:"Save"}))}),r.createElement(ft.D,null,r.createElement(L.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(ce.K,{spacing:4},r.createElement(z.Z,{variant:"delta",as:"h2"},R({id:P("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(qe.r,null,r.createElement(Ce.P,{col:6,s:12},r.createElement(Ze.P,{label:R({id:P("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:R({id:P("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:W=>{Z({target:{name:"settings.mainField",value:W===""?null:W}})},value:O.settings.mainField},U.map(W=>r.createElement(Pe.W,{key:W,value:W},W))))),r.createElement(L.x,{paddingTop:2,paddingBottom:2},r.createElement(_r.i,null)),r.createElement(z.Z,{variant:"delta",as:"h3"},R({id:P("containers.SettingPage.view"),defaultMessage:"View"})),r.createElement(v0,{attributes:T,editLayout:B,fields:K,onAddField:W=>{i({type:"ON_ADD_FIELD",name:W})},onRemoveField:(W,ue)=>{i({type:"REMOVE_FIELD",rowIndex:W,fieldIndex:ue})}})))),r.createElement(y.ConfirmDialog,{bodyText:{id:P("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(bt.Z,null),isConfirmButtonLoading:_,isOpen:b,onToggleDialog:k,onConfirm:$,variantRightButton:"success-light"})),f&&r.createElement($0,{onSubmit:G,onToggle:N,onMetaChange:H,onSizeChange:x,type:I()(T,[F,"type"],""),customFieldUid:I()(T,[F,"customField"],"")})))};lo.defaultProps={isContentTypeView:!1,updateLayout:null},lo.propTypes={components:s().object.isRequired,isContentTypeView:s().bool,mainLayout:s().shape({attributes:s().object.isRequired,info:s().object.isRequired,layouts:s().shape({list:s().array.isRequired,edit:s().array.isRequired}).isRequired,metadatas:s().object.isRequired,options:s().object.isRequired}).isRequired,slug:s().string.isRequired,updateLayout:s().func};const co=lo;var Et=p(28933);const V0=()=>({type:Et.ZA}),q0=(e,t)=>({type:Et.Id,pagination:e,data:t}),B0=()=>({type:Et.MP});function z0(){return{type:Et.c2}}const Z0=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:Et.Zz}},uo=e=>({type:Et.Rp,target:e});var wl=p(35281),Ml=p(36989),po=p(14087),W0=p(37562);const _0=()=>e=>e["content-manager_listView"]||W0.E,U0=()=>(0,Dt.P1)(_0(),e=>e),Tl=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},H0=U0;var G0=p(41451),K0=p(550),Q0=p(47144),mo=p(18374),Y0=p(65186),J0=p(42274),X0=Object.defineProperty,Mn=Object.getOwnPropertySymbols,Il=Object.prototype.hasOwnProperty,Dl=Object.prototype.propertyIsEnumerable,Ll=(e,t,n)=>t in e?X0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ev=(e,t)=>{for(var n in t||(t={}))Il.call(t,n)&&Ll(e,n,t[n]);if(Mn)for(var n of Mn(t))Dl.call(t,n)&&Ll(e,n,t[n]);return e},tv=(e,t)=>{var n={};for(var o in e)Il.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Mn)for(var o of Mn(e))t.indexOf(o)<0&&Dl.call(e,o)&&(n[o]=e[o]);return n};const nv=(0,j.default)(q.k)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,Sl=e=>{var t=e,{children:n}=t,o=tv(t,["children"]);return r.createElement(nv,ev({justifyContent:"center",alignItems:"center",as:"span"},o),r.createElement(z.Z,{variant:"sigma",textColor:"neutral600"},n))};Sl.propTypes={children:s().string.isRequired};const xl=Sl,fo=({url:e,mime:t,alternativeText:n,name:o,ext:a,formats:l})=>{var i;const c=(0,y.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const m=((i=l==null?void 0:l.thumbnail)==null?void 0:i.url)||null,g=(0,y.prefixFileUrlWithBackendUrl)(m)||c;return r.createElement(J0.q,{src:g,alt:n||o,preview:!0})}const u=(0,y.getFileExtension)(a),d=o.length>100?`${o.substring(0,100)}...`:o;return r.createElement(kt.u,{description:d},r.createElement(xl,null,u))};fo.defaultProps={alternativeText:null,formats:null},fo.propTypes={alternativeText:s().string,ext:s().string.isRequired,formats:s().object,mime:s().string.isRequired,name:s().string.isRequired,url:s().string.isRequired};const kl=fo;var rv=p(56704),ov=Object.defineProperty,Fl=Object.getOwnPropertySymbols,sv=Object.prototype.hasOwnProperty,av=Object.prototype.propertyIsEnumerable,Al=(e,t,n)=>t in e?ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iv=(e,t)=>{for(var n in t||(t={}))sv.call(t,n)&&Al(e,n,t[n]);if(Fl)for(var n of Fl(t))av.call(t,n)&&Al(e,n,t[n]);return e};const jl=({value:e})=>r.createElement(rv.H,null,e.map((t,n)=>{const o=`${t.id}${n}`;if(n===3){const a=`+${e.length-3}`;return r.createElement(xl,{key:o,preview:!1},a)}return n>3?null:r.createElement(kl,iv({key:o},t))}));jl.propTypes={value:s().arrayOf(s().shape({alternativeText:s().string,ext:s().string.isRequired,formats:s().object,mime:s().string.isRequired,name:s().string.isRequired,url:s().string.isRequired})).isRequired};const lv=jl;var $l=p(30190),cv=p(88655),uv=p(51196),dv=p.n(uv);const Nl=({type:e,value:t})=>{const{formatDate:n,formatTime:o,formatNumber:a}=(0,V.useIntl)();let l=t;if(e==="date"&&(l=n(dv()(t),{dateStyle:"full"})),e==="datetime"&&(l=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[i,c,u]=t.split(":"),d=new Date;d.setHours(i),d.setMinutes(c),d.setSeconds(u),l=o(d,{numeric:"auto",style:"short"})}return["float","decimal"].includes(e)&&(l=a(t,{maximumFractionDigits:20})),["integer","biginteger"].includes(e)&&(l=a(t,{maximumFractionDigits:0})),Qa()(l)};Nl.propTypes={type:s().string.isRequired,value:s().any.isRequired};const Ct=Nl;var pv=Object.defineProperty,Vl=Object.getOwnPropertySymbols,mv=Object.prototype.hasOwnProperty,fv=Object.prototype.propertyIsEnumerable,ql=(e,t,n)=>t in e?pv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gv=(e,t)=>{for(var n in t||(t={}))mv.call(t,n)&&ql(e,n,t[n]);if(Vl)for(var n of Vl(t))fv.call(t,n)&&ql(e,n,t[n]);return e},yv=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const hv=(0,j.default)(z.Z)`
  max-width: 500px;
`,bv=(e,t)=>yv(void 0,null,function*(){const{data:{results:n,pagination:o}}=yield me.be.get(e);return t(),{results:n,pagination:o}}),Bl=({fieldSchema:e,metadatas:t,name:n,entityId:o,value:a,contentType:l})=>{const{formatMessage:i}=(0,V.useIntl)(),{notifyStatus:c}=(0,po.G)(),u=(0,r.useMemo)(()=>fe(`relations/${l.uid}/${o}/${n.split(".")[0]}`),[o,n,l]),[d,m]=(0,r.useState)(!1),g=r.createElement(q.k,{gap:1,wrap:"nowrap"},r.createElement($l.C,null,a.count),i({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:a.count})),f=()=>{const E=i({id:P("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"});c(E)},{data:h,status:b}=(0,it.useQuery)([e.targetModel,o],()=>bv(u,f),{enabled:d,staleTime:0});return r.createElement(L.x,gv({},y.stopPropagation),r.createElement(We.O,{label:g,size:"S",onOpen:()=>m(!0),onClose:()=>m(!1)},b!=="success"&&r.createElement(We.s,{"aria-disabled":!0},r.createElement(cv.a,{small:!0},i({id:P("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}))),b==="success"&&r.createElement(r.Fragment,null,h==null?void 0:h.results.map(E=>r.createElement(We.s,{key:E.id,"aria-disabled":!0},r.createElement(hv,{ellipsis:!0},r.createElement(Ct,{type:t.mainField.schema.type,value:E[t.mainField.name]||E.id})))),(h==null?void 0:h.pagination.total)>10&&r.createElement(We.s,{"aria-disabled":!0,"aria-label":i({id:P("DynamicTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"})},r.createElement(z.Z,null,"\u2026")))))};Bl.propTypes={contentType:s().shape({uid:s().string.isRequired}).isRequired,fieldSchema:s().shape({relation:s().string,targetModel:s().string,type:s().string.isRequired}).isRequired,metadatas:s().shape({mainField:s().shape({name:s().string.isRequired,schema:s().shape({type:s().string.isRequired}).isRequired})}).isRequired,name:s().string.isRequired,entityId:s().oneOfType([s().string,s().number]).isRequired,value:s().object.isRequired};const vv=Bl,Ev=(0,j.default)(z.Z)`
  max-width: 500px;
`,zl=({metadatas:e,value:t})=>{var n;return r.createElement(Ev,{textColor:"neutral800",ellipsis:!0},r.createElement(Ct,{type:e.mainField.schema.type,value:(n=t[e.mainField.name])!=null?n:t.id}))};zl.propTypes={metadatas:s().shape({mainField:s().shape({name:s().string.isRequired,schema:s().shape({type:s().string.isRequired}).isRequired})}).isRequired,value:s().object.isRequired};const Cv=zl;var Pv=Object.defineProperty,Zl=Object.getOwnPropertySymbols,Ov=Object.prototype.hasOwnProperty,Rv=Object.prototype.propertyIsEnumerable,Wl=(e,t,n)=>t in e?Pv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wv=(e,t)=>{for(var n in t||(t={}))Ov.call(t,n)&&Wl(e,n,t[n]);if(Zl)for(var n of Zl(t))Rv.call(t,n)&&Wl(e,n,t[n]);return e};const Mv=(0,j.default)(z.Z)`
  max-width: 500px;
`,_l=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,V.useIntl)(),{mainField:{type:o,name:a}}=t,l=r.createElement(r.Fragment,null,r.createElement($l.C,null,e.length)," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length}));return r.createElement(L.x,wv({},y.stopPropagation),r.createElement(We.O,{label:l,size:"S"},e.map(i=>r.createElement(We.s,{key:i.id,"aria-disabled":!0},r.createElement(Mv,{ellipsis:!0},r.createElement(Ct,{type:o,value:i[a]||i.id}))))))};_l.propTypes={metadatas:s().shape({mainField:s().shape({name:s().string,type:s().string,value:s().string})}).isRequired,value:s().array.isRequired};const Tv=_l,Iv=(0,j.default)(z.Z)`
  max-width: 250px;
`,Ul=({value:e,metadatas:t})=>{const{mainField:n}=t,o=e[n.name];return r.createElement(kt.u,{label:o},r.createElement(Iv,{textColor:"neutral800",ellipsis:!0},r.createElement(Ct,{type:n.type,value:o})))};Ul.propTypes={metadatas:s().shape({mainField:s().shape({name:s().string,type:s().string,value:s().string})}).isRequired,value:s().object.isRequired};const Dv=Ul;var Lv=p(81763),Hl=p.n(Lv);function Gl(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function Sv(e,t,n,o){if(e==="component"){const{mainField:{name:a,type:l}}=n;if(o!=null&&o.repeatable)return t.length>0;const i=t==null?void 0:t[a];return a==="id"&&![void 0,null].includes(i)?!0:$t(l)&&l!=="biginteger"&&a!=="id"?Hl()(i):!De()(i)}return e==="relation"?Gl(o.relation)?!De()(t):(t==null?void 0:t.count)>0:$t(e)&&e!=="biginteger"?Hl()(t):e==="boolean"?t!==null:!De()(t)}var xv=Object.defineProperty,Kl=Object.getOwnPropertySymbols,kv=Object.prototype.hasOwnProperty,Fv=Object.prototype.propertyIsEnumerable,Ql=(e,t,n)=>t in e?xv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Av=(e,t)=>{for(var n in t||(t={}))kv.call(t,n)&&Ql(e,n,t[n]);if(Kl)for(var n of Kl(t))Fv.call(t,n)&&Ql(e,n,t[n]);return e};const Yl=(0,j.default)(z.Z)`
  max-width: 300px;
`,go=({content:e,fieldSchema:t,metadatas:n,name:o,rowId:a,contentType:l})=>{const{type:i}=t;if(!Sv(i,e,n,t))return r.createElement(z.Z,{textColor:"neutral800"},"-");switch(i){case"media":return t.multiple?r.createElement(lv,{value:e}):r.createElement(kl,Av({},e));case"relation":return Gl(t.relation)?r.createElement(Cv,{metadatas:n,value:e}):r.createElement(vv,{fieldSchema:t,metadatas:n,value:e,name:o,entityId:a,contentType:l});case"component":return t.repeatable===!0?r.createElement(Tv,{value:e,metadatas:n}):r.createElement(Dv,{value:e,metadatas:n});case"string":return r.createElement(kt.u,{description:e},r.createElement(Yl,{ellipsis:!0,textColor:"neutral800"},r.createElement(Ct,{type:i,value:e})));default:return r.createElement(Yl,{ellipsis:!0,textColor:"neutral800"},r.createElement(Ct,{type:i,value:e}))}};go.defaultProps={content:void 0},go.propTypes={content:s().any,contentType:s().shape({uid:s().string.isRequired}).isRequired,fieldSchema:s().shape({component:s().string,multiple:s().bool,type:s().string.isRequired,repeatable:s().bool,relation:s().string}).isRequired,metadatas:s().object.isRequired,name:s().string.isRequired,rowId:s().oneOfType([s().string,s().number]).isRequired};const jv=go;var $v=Object.defineProperty,Nv=Object.defineProperties,Vv=Object.getOwnPropertyDescriptors,Tn=Object.getOwnPropertySymbols,Jl=Object.prototype.hasOwnProperty,Xl=Object.prototype.propertyIsEnumerable,ec=(e,t,n)=>t in e?$v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zt=(e,t)=>{for(var n in t||(t={}))Jl.call(t,n)&&ec(e,n,t[n]);if(Tn)for(var n of Tn(t))Xl.call(t,n)&&ec(e,n,t[n]);return e},qv=(e,t)=>Nv(e,Vv(t)),Bv=(e,t)=>{var n={};for(var o in e)Jl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Tn)for(var o of Tn(e))t.indexOf(o)<0&&Xl.call(e,o)&&(n[o]=e[o]);return n};const yo=({canCreate:e,canDelete:t,contentType:n,headers:o,entriesToDelete:a,onClickDelete:l,onSelectRow:i,withMainAction:c,withBulkActions:u,rows:d})=>{const{push:m,location:{pathname:g}}=(0,J.useHistory)(),{formatMessage:f}=(0,V.useIntl)(),{trackUsage:h}=(0,y.useTracking)(),b=gs();return r.createElement(K0.p,null,d.map((E,S)=>{const C=a.findIndex(F=>F===E.id)!==-1,O=f({id:"content-manager.components.DynamicTable.row-line",defaultMessage:"item line {number}"},{number:S});return r.createElement(Q0.Tr,zt({key:E.id},(0,y.onRowClick)({fn(){h("willEditEntryFromList"),m({pathname:`${g}/${E.id}`,state:{from:g},search:b})},condition:u})),c&&r.createElement(mo.Td,zt({},y.stopPropagation),r.createElement(G0.C,{"aria-label":f({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,Ni.Pp)(E.firstname,E.lastname)}),checked:C,onChange:()=>{i({name:E.id,value:!C})}})),o.map(F=>{var v=F,{key:R,cellFormatter:D,name:T}=v,U=Bv(v,["key","cellFormatter","name"]);return r.createElement(mo.Td,{key:R},typeof D=="function"?D(E,zt({key:R,name:T},U)):r.createElement(jv,qv(zt({content:E[T.split(".")[0]],name:T,contentType:n},U),{rowId:E.id})))}),u&&r.createElement(mo.Td,null,r.createElement(q.k,zt({justifyContent:"end"},y.stopPropagation),r.createElement(Re.h,{forwardedAs:J.Link,onClick:()=>{h("willEditEntryFromButton")},to:{pathname:`${g}/${E.id}`,state:{from:g},search:b},label:f({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:O}),noBorder:!0,icon:r.createElement(mt.Z,null)}),e&&r.createElement(L.x,{paddingLeft:1},r.createElement(Re.h,{forwardedAs:J.Link,to:{pathname:`${g}/create/clone/${E.id}`,state:{from:g},search:b},label:f({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:O}),noBorder:!0,icon:r.createElement(Y0.Z,null)})),t&&r.createElement(L.x,{paddingLeft:1},r.createElement(Re.h,{onClick:()=>{h("willDeleteEntryFromList"),l(E.id)},label:f({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:O}),noBorder:!0,icon:r.createElement(ze.default,null)})))))}))};yo.defaultProps={canCreate:!1,canDelete:!1,entriesToDelete:[],onClickDelete(){},onSelectRow(){},rows:[],withBulkActions:!1,withMainAction:!1},yo.propTypes={canCreate:s().bool,canDelete:s().bool,contentType:s().shape({uid:s().string.isRequired}).isRequired,entriesToDelete:s().array,headers:s().array.isRequired,onClickDelete:s().func,onSelectRow:s().func,rows:s().array,withBulkActions:s().bool,withMainAction:s().bool};const zv=yo;var Zv=Object.defineProperty,In=Object.getOwnPropertySymbols,tc=Object.prototype.hasOwnProperty,nc=Object.prototype.propertyIsEnumerable,rc=(e,t,n)=>t in e?Zv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wv=(e,t)=>{for(var n in t||(t={}))tc.call(t,n)&&rc(e,n,t[n]);if(In)for(var n of In(t))nc.call(t,n)&&rc(e,n,t[n]);return e},_v=(e,t)=>{var n={};for(var o in e)tc.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&In)for(var o of In(e))t.indexOf(o)<0&&nc.call(e,o)&&(n[o]=e[o]);return n};const oc=e=>{var t=e,{area:n}=t,o=_v(t,["area"]);const a=Es(n);return a?r.createElement("ul",null,a.map(l=>l.Component(o)?r.createElement(L.x,{key:l.name,padding:3,style:{textAlign:"center"}},r.createElement(l.Component,Wv({},o))):null)):null};oc.propTypes={area:s().string.isRequired};const sc=oc,ac=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(vn.V,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(En.a,{icon:r.createElement(xt.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(q.k,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},a({id:P("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"}))),r.createElement(q.k,null,r.createElement(sc,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(Cn.c,{startAction:r.createElement(ge.z,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ge.z,{onClick:o,variant:"danger-light",startIcon:r.createElement(ze.default,null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};ac.propTypes={isConfirmButtonLoading:s().bool.isRequired,isOpen:s().bool.isRequired,onConfirm:s().func.isRequired,onToggleDialog:s().func.isRequired};const Uv=ac,ic=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:o})=>{const{formatMessage:a}=(0,V.useIntl)();return r.createElement(vn.V,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(En.a,{icon:r.createElement(xt.default,null)},r.createElement(ce.K,{spacing:2},r.createElement(q.k,{justifyContent:"center"},r.createElement(z.Z,{id:"confirm-description"},a({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"}))),r.createElement(q.k,null,r.createElement(sc,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(Cn.c,{startAction:r.createElement(ge.z,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ge.z,{onClick:o,variant:"danger-light",startIcon:r.createElement(ze.default,null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};ic.propTypes={isConfirmButtonLoading:s().bool.isRequired,isOpen:s().bool.isRequired,onConfirm:s().func.isRequired,onToggleDialog:s().func.isRequired};const Hv=ic;var Gv=Object.defineProperty,Kv=Object.defineProperties,Qv=Object.getOwnPropertyDescriptors,lc=Object.getOwnPropertySymbols,Yv=Object.prototype.hasOwnProperty,Jv=Object.prototype.propertyIsEnumerable,cc=(e,t,n)=>t in e?Gv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dn=(e,t)=>{for(var n in t||(t={}))Yv.call(t,n)&&cc(e,n,t[n]);if(lc)for(var n of lc(t))Jv.call(t,n)&&cc(e,n,t[n]);return e},Ln=(e,t)=>Kv(e,Qv(t));const Xv=(0,j.default)(ua.q)`
  width: min-content;
`,ho=({canCreate:e,canDelete:t,contentTypeName:n,action:o,isBulkable:a,isLoading:l,onConfirmDelete:i,onConfirmDeleteAll:c,layout:u,rows:d})=>{const{runHookWaterfall:m}=(0,y.useStrapiApp)(),g=u.contentType.options.draftAndPublish||!1,{formatMessage:f}=(0,V.useIntl)(),h=(0,pe.useSelector)(Tl),b=(0,r.useMemo)(()=>{const S=m(Yt.No,{displayedHeaders:h,layout:u}).displayedHeaders.map(C=>{const{metadatas:O}=C;if(C.fieldSchema.type==="relation"){const F=`${C.name}.${C.metadatas.mainField.name}`;return Ln(Dn({},C),{metadatas:Ln(Dn({},O),{label:f({id:P(`containers.ListPage.table-headers.${C.name}`),defaultMessage:O.label})}),name:F})}return Ln(Dn({},C),{metadatas:Ln(Dn({},O),{label:f({id:P(`containers.ListPage.table-headers.${C.name}`),defaultMessage:O.label})})})});return g?[...S,{key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:f({id:P("containers.ListPage.table-headers.publishedAt"),defaultMessage:"publishedAt"}),searchable:!1,sortable:!0},cellFormatter(C){const O=C.publishedAt,F=O?"success":"secondary";return r.createElement(Xv,{showBullet:!1,variant:F,size:"S"},r.createElement(z.Z,{fontWeight:"bold",textColor:`${F}700`},f({id:P(`containers.List.${O?"published":"draft"}`),defaultMessage:O?"Published":"Draft"})))}}]:S},[m,h,u,g,f]);return r.createElement(y.DynamicTable,{components:{ConfirmDialogDelete:Hv,ConfirmDialogDeleteAll:Uv},contentType:n,action:o,isLoading:l,headers:b,onConfirmDelete:i,onConfirmDeleteAll:c,onOpenDeleteAllModalTrackedEvent:"willBulkDeleteEntries",rows:d,withBulkActions:!0,withMainAction:t&&a},r.createElement(zv,{canCreate:e,canDelete:t,contentType:u.contentType,headers:b,rows:d,withBulkActions:!0,withMainAction:t&&a}))};ho.defaultProps={action:void 0},ho.propTypes={canCreate:s().bool.isRequired,canDelete:s().bool.isRequired,contentTypeName:s().string.isRequired,action:s().node,isBulkable:s().bool.isRequired,isLoading:s().bool.isRequired,layout:s().exact({components:s().object.isRequired,contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired}).isRequired}).isRequired,onConfirmDelete:s().func.isRequired,onConfirmDeleteAll:s().func.isRequired,rows:s().array.isRequired};const eE=ho,tE=["json","component","media","richtext","dynamiczone","password"],nE=["createdAt","updatedAt"],rE=(e,t)=>{const{allPermissions:n}=(0,y.useRBACProvider)(),o=(0,y.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),a=I()(o,["0","properties","fields"],[]);return Object.keys(I()(e,["attributes"]),{}).filter(c=>{const u=I()(e,["attributes",c],{});return!(!u.type||tE.includes(u.type)||!a.includes(c)&&c!=="id"&&!nE.includes(c))}).sort()};var oE=p(89597);const uc=({displayedFilters:e})=>{const[t,n]=(0,r.useState)(!1),{formatMessage:o}=(0,V.useIntl)(),a=(0,r.useRef)(),{trackUsage:l}=(0,y.useTracking)(),i=()=>{t||l("willFilterEntries"),n(c=>!c)};return r.createElement(r.Fragment,null,r.createElement(L.x,{paddingTop:1,paddingBottom:1},r.createElement(ge.z,{variant:"tertiary",ref:a,startIcon:r.createElement(oE.Z,null),onClick:i,size:"S"},o({id:"app.utils.filters",defaultMessage:"Filters"})),t&&r.createElement(y.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:i,source:a})),r.createElement(y.FilterListURLQuery,{filtersSchema:e}))};uc.propTypes={displayedFilters:s().arrayOf(s().shape({name:s().string.isRequired,metadatas:s().shape({label:s().string}),fieldSchema:s().shape({type:s().string})})).isRequired};const sE=uc,dc=({contentType:e,slug:t,metadatas:n})=>{const{formatMessage:o}=(0,V.useIntl)(),l=rE(e,t).map(i=>{const c=e.attributes[i],{type:u,enum:d}=c,m={name:"didFilterEntries",properties:{useRelation:u==="relation"}},{mainField:g,label:f}=n[i].list;return{name:i,metadatas:{label:o({id:f,defaultMessage:f})},fieldSchema:{type:u,options:d,mainField:g},trackedEvent:m}});return r.createElement(sE,{displayedFilters:l})};dc.propTypes={contentType:s().object.isRequired,metadatas:s().object.isRequired,slug:s().string.isRequired};const aE=dc,iE=e=>Object.keys(e).reduce((n,o)=>{const a=e[o];return $o(a)&&n.push(o),n},[]).sort(),pc=({layout:e})=>{const t=(0,pe.useDispatch)(),n=(0,pe.useSelector)(Tl),{trackUsage:o}=(0,y.useTracking)(),{formatMessage:a}=(0,V.useIntl)(),l=iE(e.contentType.attributes).map(u=>{const d=e.contentType.metadatas[u].list;return{name:u,intlLabel:{id:d.label,defaultMessage:d.label}}}),i=n.map(({name:u})=>u),c=u=>{if(o("didChangeDisplayedFields"),u.length<i.length){const d=i.filter(m=>u.indexOf(m)===-1);t(uo({name:d[0],value:!0}))}else{const d=u.filter(m=>i.indexOf(m)===-1);t(uo({name:d[0],value:!1}))}};return r.createElement(L.x,{paddingTop:1,paddingBottom:1},r.createElement(Ze.P,{"aria-label":"change displayed fields",value:i,onChange:c,customizeContent:u=>a({id:P("select.currently.selected"),defaultMessage:"{count} currently selected"},{count:u.length}),multi:!0,size:"S"},l.map(u=>r.createElement(Pe.W,{key:u.name,value:u.name},a({id:u.intlLabel.id||u.name,defaultMessage:u.intlLabel.defaultMessage||u.name})))))};pc.propTypes={layout:s().shape({contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired}).isRequired}).isRequired};const lE=(0,r.memo)(pc),bo=({pagination:e})=>r.createElement(L.x,{paddingTop:4},r.createElement(q.k,{alignItems:"flex-end",justifyContent:"space-between"},r.createElement(y.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),r.createElement(y.PaginationURLQuery,{pagination:e})));bo.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},bo.propTypes={pagination:s().shape({page:s().number,pageCount:s().number,pageSize:s().number,total:s().number})};const cE=bo;var uE=p(25108),dE=Object.defineProperty,pE=Object.defineProperties,mE=Object.getOwnPropertyDescriptors,mc=Object.getOwnPropertySymbols,fE=Object.prototype.hasOwnProperty,gE=Object.prototype.propertyIsEnumerable,fc=(e,t,n)=>t in e?dE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yE=(e,t)=>{for(var n in t||(t={}))fE.call(t,n)&&fc(e,n,t[n]);if(mc)for(var n of mc(t))gE.call(t,n)&&fc(e,n,t[n]);return e},hE=(e,t)=>pE(e,mE(t)),vo=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const bE=le.Z.contentManager,vE=(0,j.default)(L.x)`
  svg {
    path {
      fill: ${({theme:e})=>e.colors.neutral900};
    }
  }
`;function gc({canCreate:e,canDelete:t,canRead:n,data:o,getData:a,getDataSucceeded:l,isLoading:i,layout:c,pagination:u,slug:d}){const{total:m}=u,{contentType:{metadatas:g,settings:{bulkable:f,filterable:h,searchable:b}}}=c,E=(0,y.useNotification)(),{trackUsage:S}=(0,y.useTracking)(),{refetchPermissions:C}=(0,y.useRBACProvider)(),O=(0,r.useRef)(S),F=(0,r.useRef)(C),{notifyStatus:v}=(0,po.G)();(0,y.useFocusWhenNavigate)();const[{query:R}]=(0,y.useQueryParams)(),D=Mi(R),T=(0,He.stringify)({plugins:R.plugins},{encode:!1}),{pathname:U}=(0,J.useLocation)(),{push:B}=(0,J.useHistory)(),{formatMessage:A}=(0,V.useIntl)(),K=c.contentType,Z=I()(K,"options.draftAndPublish",!1),N=(0,r.useRef)(""),k=(0,r.useCallback)(($,Q)=>vo(this,null,function*(){a();try{const ne=Q?{cancelToken:Q.token}:null,{data:{results:re,pagination:he}}=yield me.be.get($,ne);v(A({id:P("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:he.count})),l(he,re)}catch(ne){if(Fe.Z.isCancel(ne))return;if(I()(ne,"response.status",null)===403){yield F.current(),E({type:"info",message:{id:P("permissions.not-allowed.update")}}),B("/");return}uE.error(ne),E({type:"warning",message:{id:P("error.model.fetch")}})}}),[A,a,l,v,B,E]),H=(0,r.useCallback)($=>vo(this,null,function*(){try{yield me.be.post(fe(`collection-types/${d}/actions/bulkDelete`),{ids:$});const Q=fe(`collection-types/${d}${D}`);k(Q),O.current("didBulkDeleteEntries")}catch(Q){E({type:"warning",message:{id:P("error.record.delete")}})}}),[k,D,d,E]),x=(0,r.useCallback)($=>vo(this,null,function*(){try{yield me.be.delete(fe(`collection-types/${d}/${$}`));const Q=fe(`collection-types/${d}${D}`);k(Q),E({type:"success",message:{id:P("success.record.delete")}})}catch(Q){const ne=I()(Q,"response.payload.message",A({id:P("error.record.delete")}));E({type:"warning",message:ne})}}),[d,D,k,E,A]);(0,r.useEffect)(()=>{const Q=Fe.Z.CancelToken.source(),ne=n,re=fe(`collection-types/${d}${D}`);return ne&&re.includes(N.current)&&k(re,Q),()=>{N.current=d,Q.cancel("Operation canceled by the user.")}},[n,a,d,D,l,k]);const G=A({id:P("header.name"),defaultMessage:"Content"}),w=A({id:K.info.displayName,defaultMessage:K.info.displayName||G}),M=n?A({id:P("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:m}):null,_=$=>e?r.createElement(ge.z,hE(yE({},$),{forwardedAs:J.Link,onClick:()=>{const Q=Z?{status:"draft"}:{};O.current("willCreateEntry",Q)},to:{pathname:`${U}/create`,search:R.plugins?T:""},startIcon:r.createElement(At.default,null),style:{textDecoration:"none"}}),A({id:P("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})):null;return r.createElement(be.o,{"aria-busy":i},r.createElement(oe.T,{primaryAction:_(),subtitle:M,title:w,navigationAction:r.createElement(y.Link,{startIcon:r.createElement(bn.Z,null),to:"/content-manager/"},A({id:"global.back",defaultMessage:"Back"}))}),!n&&r.createElement(Ml.Z,{endActions:r.createElement(Xt,{area:"contentManager.listView.actions"})}),n&&r.createElement(Ml.Z,{endActions:r.createElement(r.Fragment,null,r.createElement(Xt,{area:"contentManager.listView.actions"}),r.createElement(lE,{layout:c}),r.createElement(y.CheckPermissions,{permissions:bE.collectionTypesConfigurations},r.createElement(vE,{paddingTop:1,paddingBottom:1},r.createElement(Re.h,{onClick:()=>{S("willEditListLayout")},forwardedAs:J.Link,to:{pathname:`${d}/configurations/list`,search:T},icon:r.createElement(al.Z,null),label:A({id:"app.links.configure-view",defaultMessage:"Configure the view"})})))),startActions:r.createElement(r.Fragment,null,b&&r.createElement(y.SearchURLQuery,{label:A({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:w}),placeholder:A({id:"global.search",defaultMessage:"Search"}),trackedEvent:"didSearch"}),h&&r.createElement(aE,{contentType:K,slug:d,metadatas:g}))}),r.createElement(ft.D,null,n?r.createElement(r.Fragment,null,r.createElement(eE,{canCreate:e,canDelete:t,contentTypeName:w,onConfirmDeleteAll:H,onConfirmDelete:x,isBulkable:f,isLoading:i,layout:c,rows:o,action:_({variant:"secondary"})}),r.createElement(cE,{pagination:{pageCount:(u==null?void 0:u.pageCount)||1}})):r.createElement(y.NoPermissions,null)))}gc.propTypes={canCreate:s().bool.isRequired,canDelete:s().bool.isRequired,canRead:s().bool.isRequired,data:s().array.isRequired,layout:s().exact({components:s().object.isRequired,contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,info:s().shape({displayName:s().string.isRequired}).isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired}).isRequired}).isRequired,isLoading:s().bool.isRequired,getData:s().func.isRequired,getDataSucceeded:s().func.isRequired,pagination:s().shape({total:s().number.isRequired,pageCount:s().number}).isRequired,slug:s().string.isRequired};const EE=H0();function CE(e){return(0,wl.bindActionCreators)({getData:V0,getDataSucceeded:q0,onChangeListHeaders:uo,onResetListHeaders:B0},e)}const PE=(0,pe.connect)(EE,CE),OE=(0,wl.compose)(PE)((0,r.memo)(gc,Xe()));var RE=Object.defineProperty,yc=Object.getOwnPropertySymbols,wE=Object.prototype.hasOwnProperty,ME=Object.prototype.propertyIsEnumerable,hc=(e,t,n)=>t in e?RE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bc=(e,t)=>{for(var n in t||(t={}))wE.call(t,n)&&hc(e,n,t[n]);if(yc)for(var n of yc(t))ME.call(t,n)&&hc(e,n,t[n]);return e};const Eo=e=>{const t=(0,r.useMemo)(()=>Wo(e.slug),[e.slug]),{isLoading:n,allowedActions:o}=(0,y.useRBAC)(t,e.permissions);return n?r.createElement(y.LoadingIndicatorPage,null):r.createElement(OE,bc(bc({},e),o))};Eo.defaultProps={permissions:[]},Eo.propTypes={permissions:s().array,slug:s().string.isRequired};const TE=(0,r.memo)(Eo,(e,t)=>{const n=(0,y.difference)(e,t);return Object.keys(n).filter(a=>a!=="state").length>0});var IE=Object.defineProperty,DE=Object.defineProperties,LE=Object.getOwnPropertyDescriptors,Sn=Object.getOwnPropertySymbols,vc=Object.prototype.hasOwnProperty,Ec=Object.prototype.propertyIsEnumerable,Cc=(e,t,n)=>t in e?IE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SE=(e,t)=>{for(var n in t||(t={}))vc.call(t,n)&&Cc(e,n,t[n]);if(Sn)for(var n of Sn(t))Ec.call(t,n)&&Cc(e,n,t[n]);return e},xE=(e,t)=>DE(e,LE(t)),kE=(e,t)=>{var n={};for(var o in e)vc.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Sn)for(var o of Sn(e))t.indexOf(o)<0&&Ec.call(e,o)&&(n[o]=e[o]);return n};const Pc=e=>{var t=e,{layout:n}=t,o=kE(t,["layout"]);const a=(0,pe.useDispatch)(),{replace:l}=(0,J.useHistory)(),[{query:i,rawQuery:c}]=(0,y.useQueryParams)(),u=hs(i,o.slug,"listView"),d=fs(o.slug);return(0,r.useEffect)(()=>{c||l(d)},[c,l,d]),(0,r.useEffect)(()=>{a(Z0(n))},[a,n]),(0,r.useEffect)(()=>()=>{a(z0())},[a]),u?r.createElement(TE,xE(SE({},o),{layout:n,permissions:u})):null};Pc.propTypes={layout:s().exact({components:s().object.isRequired,contentType:s().shape({attributes:s().object.isRequired,metadatas:s().object.isRequired,layouts:s().shape({list:s().array.isRequired}).isRequired,options:s().object.isRequired,settings:s().object.isRequired,pluginOptions:s().object}).isRequired}).isRequired,slug:s().string.isRequired};const FE=Pc,AE=(e,t)=>me.be.put(fe(`content-types/${t}/configuration`),e),Co=({modifiedData:e,onChange:t,sortOptions:n})=>{const{formatMessage:o}=(0,V.useIntl)(),{settings:a,metadatas:l}=e;return r.createElement(ce.K,{spacing:4},r.createElement(z.Z,{variant:"delta",as:"h2"},o({id:P("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(ce.K,{horizontal:!0,justifyContent:"space-between",spacing:4},r.createElement(L.x,{width:"100%"},r.createElement(Bt.s,{label:o({id:P("form.Input.search"),defaultMessage:"Enable search"}),onChange:i=>{t({target:{name:"settings.searchable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:a.searchable})),r.createElement(L.x,{width:"100%"},r.createElement(Bt.s,{label:o({id:P("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:i=>{t({target:{name:"settings.filterable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:a.filterable})),r.createElement(L.x,{width:"100%"},r.createElement(Bt.s,{label:o({id:P("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:i=>{t({target:{name:"settings.bulkable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:a.bulkable}))),r.createElement(qe.r,{gap:4},r.createElement(Ce.P,{s:12,col:6},r.createElement(Ze.P,{label:o({id:P("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:o({id:P("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:i=>t({target:{name:"settings.pageSize",value:i}}),name:"settings.pageSize",value:e.settings.pageSize||""},[10,20,50,100].map(i=>r.createElement(Pe.W,{key:i,value:i},i)))),r.createElement(Ce.P,{s:12,col:3},r.createElement(Ze.P,{label:o({id:P("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:i=>t({target:{name:"settings.defaultSortBy",value:i}}),name:"settings.defaultSortBy",value:e.settings.defaultSortBy||""},n.map(i=>r.createElement(Pe.W,{key:i,value:i},l[i].list.label||i)))),r.createElement(Ce.P,{s:12,col:3},r.createElement(Ze.P,{label:o({id:P("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:i=>t({target:{name:"settings.defaultSortOrder",value:i}}),name:"settings.defaultSortOrder",value:e.settings.defaultSortOrder||""},["ASC","DESC"].map(i=>r.createElement(Pe.W,{key:i,value:i},i))))))};Co.defaultProps={modifiedData:{},sortOptions:[]},Co.propTypes={modifiedData:s().object,onChange:s().func.isRequired,sortOptions:s().array};const jE=Co,Po=j.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,Oc=(0,j.default)(Po)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,$E=(0,j.default)(q.k)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${z.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${Oc} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,NE=(0,j.default)(L.x)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,Rc=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:o,onMoveField:a,onRemoveField:l,name:i,setIsDraggingSibling:c})=>{const{formatMessage:u}=(0,V.useIntl)(),d=(0,r.useRef)(null),m=(0,r.useRef)(null),[,g]=(0,r.useState)(!1),f=(0,r.useRef)(),h=Lo(n),b=()=>{f.current&&f.current.click()},[,E]=(0,ke.useDrop)({accept:Le.FIELD,hover(v,R){if(!m.current)return;const D=v.index,T=e;if(D===T)return;const U=m.current.getBoundingClientRect(),B=(U.right-U.left)/2,K=R.getClientOffset().x-U.left;D>T&&K>B||D<T&&K<B||(a(D,T),v.index=T)}}),[{isDragging:S},C,O]=(0,ke.useDrag)({type:Le.FIELD,item(){return{index:e,labelField:n,name:i}},collect:v=>({isDragging:v.isDragging()}),end(){c(!1)}});(0,r.useEffect)(()=>{O((0,Pr.rX)(),{captureDraggingState:!1})},[O]),(0,r.useEffect)(()=>{S&&c(!0)},[S,c]),(0,r.useEffect)(()=>{t||g(v=>!v)},[t]);const F={dragRef:C(d),dropRef:E(m)};return r.createElement(NE,{ref:F?F.dropRef:null},S&&r.createElement(jn,{transparent:!0,labelField:h}),!S&&t&&r.createElement(jn,{isSibling:!0,labelField:h}),!S&&!t&&r.createElement($E,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:b,isDragging:S},r.createElement(ce.K,{horizontal:!0,spacing:3},r.createElement(Oc,{as:"span","aria-label":u({id:P("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:n}),onClick:v=>v.stopPropagation(),ref:F.dragRef,type:"button"},r.createElement(pt.Z,null)),r.createElement(z.Z,{fontWeight:"bold"},h)),r.createElement(q.k,{paddingLeft:3},r.createElement(Po,{ref:f,onClick:v=>{v.stopPropagation(),o(i)},"aria-label":u({id:P("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:n}),type:"button"},r.createElement(mt.Z,null)),r.createElement(Po,{onClick:l,"data-testid":`delete-${i}`,"aria-label":u({id:P("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:n}),type:"button"},r.createElement(kn.default,null)))))};Rc.propTypes={index:s().number.isRequired,isDraggingSibling:s().bool.isRequired,labelField:s().string.isRequired,name:s().string.isRequired,onClickEditField:s().func.isRequired,onMoveField:s().func.isRequired,onRemoveField:s().func.isRequired,setIsDraggingSibling:s().func.isRequired};const VE=Rc,wc=(0,j.default)(L.x)`
  flex: ${({size:e})=>e};
`,qE=(0,j.default)(wc)`
  overflow-x: scroll;
  overflow-y: hidden;
`,BE=(0,j.default)(wc)`
  max-width: ${32/16}rem;
`,Mc=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:o,onClickEditField:a,onMoveField:l,onRemoveField:i})=>{const{formatMessage:c}=(0,V.useIntl)(),[u,d]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),f=(0,r.useRef)();function h(...E){g("add"),o(...E)}function b(...E){g("remove"),i(...E)}return(0,r.useEffect)(()=>{m==="add"&&(f!=null&&f.current)&&(f.current.scrollLeft=f.current.scrollWidth)},[e,m]),r.createElement(r.Fragment,null,r.createElement(L.x,{paddingBottom:4},r.createElement(z.Z,{variant:"delta",as:"h2"},c({id:P("containers.SettingPage.view"),defaultMessage:"View"}))),r.createElement(q.k,{paddingTop:4,paddingLeft:4,paddingRight:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0},r.createElement(qE,{size:"1",paddingBottom:4,ref:f},r.createElement(ce.K,{horizontal:!0,spacing:3},e.map((E,S)=>r.createElement(VE,{key:E,index:S,isDraggingSibling:u,onMoveField:l,onClickEditField:a,onRemoveField:C=>b(C,S),name:E,labelField:n[E].list.label||E,setIsDraggingSibling:d})))),r.createElement(BE,{size:"auto",paddingBottom:4},r.createElement(We.O,{label:c({id:P("components.FieldSelect.label"),defaultMessage:"Add a field"}),as:Re.h,icon:r.createElement(At.default,null),disabled:t.length<=0,"data-testid":"add-field"},t.map(E=>r.createElement(We.s,{key:E,onClick:()=>h(E)},n[E].list.label||E))))))};Mc.propTypes={displayedFields:Se.PropTypes.array.isRequired,listRemainingFields:Se.PropTypes.array.isRequired,metadatas:Se.PropTypes.objectOf(Se.PropTypes.shape({list:Se.PropTypes.shape({label:Se.PropTypes.string})})).isRequired,onAddField:Se.PropTypes.func.isRequired,onClickEditField:Se.PropTypes.func.isRequired,onMoveField:Se.PropTypes.func.isRequired,onRemoveField:Se.PropTypes.func.isRequired};const zE=Mc,ZE=(0,j.default)(q.k)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,Tc=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:o,onChangeEditLabel:a,onSubmit:l,type:i})=>{const{formatMessage:c}=(0,V.useIntl)(),u=e[n].relationType;let d=!["media","relation"].includes(i);return["oneWay","oneToOne","manyToOne"].includes(u)&&(d=!0),r.createElement(ml.P,{onClose:o,labelledBy:"title"},r.createElement("form",{onSubmit:l},r.createElement(fl.x,null,r.createElement(ZE,null,r.createElement(vl,{type:i}),r.createElement(z.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},c({id:P("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:Vt()(n)})))),r.createElement(gl.f,null,r.createElement(qe.r,{gap:4},r.createElement(Ce.P,{s:12,col:6},r.createElement(rr.o,{id:"label-input",label:c({id:P("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:m=>a(m),value:t.label,hint:c({id:P("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})),d&&r.createElement(Ce.P,{s:12,col:6},r.createElement(Bt.s,{"data-testid":"Enable sort on this field",checked:t.sortable,label:c({id:P("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:m=>a({target:{name:"sortable",value:m.target.checked}}),onLabel:c({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:c({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})))),r.createElement(yl.m,{startActions:r.createElement(ge.z,{onClick:o,variant:"tertiary"},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ge.z,{type:"submit"},c({id:"global.finish",defaultMessage:"Finish"}))})))};Tc.propTypes={attributes:s().objectOf(s().shape({relationType:s().string})).isRequired,fieldForm:s().shape({label:s().string,sortable:s().bool}).isRequired,fieldToEdit:s().string.isRequired,onChangeEditLabel:s().func.isRequired,onCloseModal:s().func.isRequired,onSubmit:s().func.isRequired,type:s().string.isRequired};const WE=Tc;var _E=Object.defineProperty,UE=Object.defineProperties,HE=Object.getOwnPropertyDescriptors,Ic=Object.getOwnPropertySymbols,GE=Object.prototype.hasOwnProperty,KE=Object.prototype.propertyIsEnumerable,Dc=(e,t,n)=>t in e?_E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QE=(e,t)=>{for(var n in t||(t={}))GE.call(t,n)&&Dc(e,n,t[n]);if(Ic)for(var n of Ic(t))KE.call(t,n)&&Dc(e,n,t[n]);return e},YE=(e,t)=>UE(e,HE(t));const JE=(e,t)=>YE(QE({},e),{initialData:t,modifiedData:t}),Oo={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},XE=(e=Oo,t)=>(0,Kt.default)(e,n=>{const o=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const a=I()(e,o,[]);X()(n,o,[...a,t.item]);break}case"MOVE_FIELD":{const a=I()(e,o,[]),{originalIndex:l,atIndex:i}=t;X()(n,o,Wt(a,l,i));break}case"ON_CHANGE":{X()(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{X()(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const a=I()(e,o,[]);X()(n,o,a.filter((l,i)=>t.index!==i));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:a}=t;n.fieldToEdit=a,n.fieldForm.label=I()(n,["modifiedData","metadatas",a,"list","label"],""),n.fieldForm.sortable=I()(n,["modifiedData","metadatas",a,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const a=["modifiedData","metadatas",e.fieldToEdit,"list"];X()(n,[...a,"label"],e.fieldForm.label),X()(n,[...a,"sortable"],e.fieldForm.sortable);break}default:return n}}),eC=["media","richtext","dynamiczone","relation","component","json"];var tC=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Lc=({layout:e,slug:t})=>{const{formatMessage:n}=(0,V.useIntl)(),{trackUsage:o}=(0,y.useTracking)(),a=gs(),l=(0,y.useNotification)(),{refetchData:i}=(0,r.useContext)(xo),[c,u]=(0,r.useState)(!1),d=()=>u(w=>!w),[m,g]=(0,r.useReducer)(XE,Oo,()=>JE(Oo,e)),{fieldToEdit:f,fieldForm:h,initialData:b,modifiedData:E}=m,S=!De()(h),{attributes:C}=e,O=E.layouts.list,F=()=>{const{settings:{pageSize:w,defaultSortBy:M,defaultSortOrder:_},kind:$,uid:Q}=b,ne=`${M}:${_}`,re=`${(0,He.stringify)({page:1,pageSize:w,sort:ne},{encode:!1})}${a?`&${a}`:""}`;return`/content-manager/${$}/${Q}?${re}`},v=({target:{name:w,value:M}})=>{g({type:"ON_CHANGE",keys:w,value:w==="settings.pageSize"?parseInt(M,10):M})},R=()=>tC(void 0,null,function*(){const w=ir()(E,["layouts","settings","metadatas"]);Z.mutate(w)}),D=w=>{g({type:"ADD_FIELD",item:w})},T=(w,M)=>{w.stopPropagation(),O.length===1?l({type:"info",message:{id:P("notification.info.minimumFields")}}):g({type:"REMOVE_FIELD",index:M})},U=w=>{w.preventDefault(),d(),o("willSaveContentTypeLayout")},B=w=>{g({type:"SET_FIELD_TO_EDIT",fieldToEdit:w})},A=()=>{g({type:"UNSET_FIELD_TO_EDIT"})},K=w=>{w.preventDefault(),g({type:"SUBMIT_FIELD_FORM"})},Z=(0,it.useMutation)(w=>AE(w,t),{onSuccess(){o("didEditListSettings"),i()},onError(){l({type:"warning",message:{id:"notification.error"}})}}),{isLoading:N}=Z,k=({target:{name:w,value:M}})=>{g({type:"ON_CHANGE_FIELD_METAS",name:w,value:M})},H=Object.entries(C).reduce((w,M)=>{const[_,$]=M,Q=$o($),ne=O.includes(_);return Q&&!ne&&w.push(_),w},[]).sort(),x=Object.entries(C).reduce((w,M)=>{const[_,{type:$}]=M;return eC.includes($)||w.push(_),w},[]),G=(w,M)=>{g({type:"MOVE_FIELD",originalIndex:w,atIndex:M})};return r.createElement(ie.A,null,r.createElement(be.o,{"aria-busy":N},r.createElement("form",{onSubmit:U},r.createElement(oe.T,{navigationAction:r.createElement(y.Link,{startIcon:r.createElement(bn.Z,null),to:F,id:"go-back"},n({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ge.z,{size:"S",startIcon:r.createElement(bt.Z,null),disabled:jt()(E,b),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:P("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:n({id:P("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:Vt()(E.info.displayName)})}),r.createElement(ft.D,null,r.createElement(L.x,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(jE,{modifiedData:E,onChange:v,sortOptions:x}),r.createElement(L.x,{paddingTop:6,paddingBottom:6},r.createElement(_r.i,null)),r.createElement(zE,{listRemainingFields:H,displayedFields:O,onAddField:D,onClickEditField:B,onMoveField:G,onRemoveField:T,metadatas:E.metadatas}))),r.createElement(y.ConfirmDialog,{bodyText:{id:P("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(bt.Z,null),isConfirmButtonLoading:N,isOpen:c,onToggleDialog:d,onConfirm:R,variantRightButton:"success-light"})),S&&r.createElement(WE,{attributes:C,fieldForm:h,fieldToEdit:f,onChangeEditLabel:k,onCloseModal:A,onSubmit:K,type:I()(C,[f,"type"],"text")})))};Lc.propTypes={layout:s().shape({uid:s().string.isRequired,settings:s().shape({bulkable:s().bool,defaultSortBy:s().string,defaultSortOrder:s().string,filterable:s().bool,pageSize:s().number,searchable:s().bool}).isRequired,metadatas:s().object.isRequired,options:s().object.isRequired,attributes:s().objectOf(s().shape({type:s().string})).isRequired}).isRequired,slug:s().string.isRequired};const nC=(0,r.memo)(Lc),rC=()=>r.createElement(L.x,{padding:8},r.createElement(y.AnErrorOccurred,null)),Sc=le.Z.contentManager,xc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:o,updateLayout:a}=cs(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let m={},g={};return o.contentType&&(m=Ht(o.contentType)),o.components&&(g=Object.keys(o.components).reduce((f,h)=>(f[h]=Ht(o.components[h]),f),{})),{rawContentTypeLayout:m,rawComponentsLayouts:g}},[o]);if((0,Y.get)(o,["contentType","uid"],null)!==e||n)return r.createElement(y.LoadingIndicatorPage,null);const u=({location:{state:m},history:{goBack:g},match:{params:{id:f,origin:h}}},b)=>r.createElement(b,{slug:e,layout:o,state:m,goBack:g,id:f,origin:h}),d=[{path:"create/clone/:origin",comp:On},{path:"create",comp:On},{path:":id",comp:On},{path:"",comp:FE}].map(({path:m,comp:g})=>r.createElement(J.Route,{key:m,path:`${t}/${m}`,render:f=>u(f,g)}));return r.createElement(tu.ErrorBoundary,{FallbackComponent:rC},r.createElement(ko.Provider,{value:o},r.createElement(J.Switch,null,r.createElement(J.Route,{path:`${t}/configurations/list`},r.createElement(y.CheckPagePermissions,{permissions:Sc.collectionTypesConfigurations},r.createElement(nC,{layout:l,slug:e,updateLayout:a}))),r.createElement(J.Route,{path:`${t}/configurations/edit`},r.createElement(y.CheckPagePermissions,{permissions:Sc.collectionTypesConfigurations},r.createElement(co,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:a}))),d)))};xc.propTypes={match:s().shape({url:s().string.isRequired,params:s().shape({slug:s().string.isRequired}).isRequired}).isRequired};const oC=(0,r.memo)(xc);var kc=p(23089),sC=p(25108),aC=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const iC=le.Z.contentManager,lC=()=>{const[{isLoading:e,data:t},n]=(0,r.useReducer)(kc.Z,kc.q),o=(0,r.useMemo)(Vn,[]),{schemas:a}=(0,pe.useSelector)(i=>o(i),pe.shallowEqual),{uid:l}=(0,J.useParams)();return(0,r.useEffect)(()=>{const c=Fe.Z.CancelToken.source();return(d=>aC(void 0,null,function*(){try{n(mn());const{data:{data:m}}=yield me.be.get(fe(`components/${l}/configuration`),{cancelToken:d.token});n($r(Ko(m,a,"component")))}catch(m){if(Fe.Z.isCancel(m))return;sC.error(m)}}))(c),()=>{c.cancel("Operation canceled by the user.")}},[l,a]),e?r.createElement(y.LoadingIndicatorPage,null):r.createElement(y.CheckPagePermissions,{permissions:iC.componentsConfigurations},r.createElement(co,{components:t.components,mainLayout:t.component,slug:l}))},cC=(0,r.memo)(lC);var uC=p(89722),dC=p(86031);const pC=()=>{const{formatMessage:e}=(0,V.useIntl)();return(0,y.useFocusWhenNavigate)(),r.createElement(be.o,null,r.createElement(oe.T,{title:e({id:P("header.name"),defaultMessage:"Content"})}),r.createElement(ft.D,null,r.createElement(uC.x,{action:r.createElement(y.LinkButton,{variant:"secondary",startIcon:r.createElement(At.default,null),to:"/plugins/content-type-builder/content-types/create-content-type"},e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:r.createElement(dC.default,{width:"10rem"}),shadow:"tableShadow"})))},mC=()=>{const{formatMessage:e}=(0,V.useIntl)();return(0,y.useFocusWhenNavigate)(),r.createElement(be.o,null,r.createElement(oe.T,{title:e({id:P("header.name"),defaultMessage:"Content"})}),r.createElement(ft.D,null,r.createElement(y.NoPermissions,null)))},fC=le.Z.contentManager,Fc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:o,updateLayout:a}=cs(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let c={},u={};return o.contentType&&(u=Ht(o.contentType)),o.components&&(c=Object.keys(o.components).reduce((d,m)=>(d[m]=Ht(o.components[m]),d),{})),{rawContentTypeLayout:u,rawComponentsLayouts:c}},[o]);return n?r.createElement(y.LoadingIndicatorPage,null):r.createElement(ko.Provider,{value:o},r.createElement(J.Switch,null,r.createElement(J.Route,{path:`${t}/configurations/edit`},r.createElement(y.CheckPagePermissions,{permissions:fC.singleTypesConfigurations},r.createElement(co,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:a}))),r.createElement(J.Route,{path:t,render:({location:{state:c},history:{goBack:u}})=>r.createElement(On,{layout:o,slug:e,isSingleType:!0,state:c,goBack:u})})))};Fc.propTypes={match:s().shape({url:s().string.isRequired,params:s().shape({slug:s().string.isRequired}).isRequired}).isRequired};const gC=(0,r.memo)(Fc);var yC=p(63852),hC=p(7334),Ac=p.n(hC),bC=p(53192),vC=p(38702),EC=p(34446),CC=p(29489),PC=p(52305),OC=Object.defineProperty,RC=Object.defineProperties,wC=Object.getOwnPropertyDescriptors,jc=Object.getOwnPropertySymbols,MC=Object.prototype.hasOwnProperty,TC=Object.prototype.propertyIsEnumerable,$c=(e,t,n)=>t in e?OC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IC=(e,t)=>{for(var n in t||(t={}))MC.call(t,n)&&$c(e,n,t[n]);if(jc)for(var n of jc(t))TC.call(t,n)&&$c(e,n,t[n]);return e},DC=(e,t)=>RC(e,wC(t));const Nc=(e,t)=>t?(0,yC.ZP)(e,Ac()(t),{keys:[n=>Ac()(n.title)]}):$e()(e,n=>n.title.toLowerCase()),LC=()=>{const[e,t]=(0,r.useState)(""),{formatMessage:n}=(0,V.useIntl)(),o=(0,r.useMemo)(Ku,[]),{collectionTypeLinks:a,singleTypeLinks:l}=(0,pe.useSelector)(h=>o(h),pe.shallowEqual),i=h=>h.map(b=>DC(IC({},b),{title:n({id:b.title,defaultMessage:b.title})})),c=i(a),u=i(l),d=[{id:"collectionTypes",title:{id:P("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:Nc(c,e)},{id:"singleTypes",title:{id:P("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:Nc(u,e)}],m=()=>{t("")},g=({target:{value:h}})=>{t(h)},f=n({id:P("header.name"),defaultMessage:"Content"});return r.createElement(bC.m,{ariaLabel:f},r.createElement(vC.p,{label:f,searchable:!0,value:e,onChange:g,onClear:m,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),r.createElement(EC.Z,null,d.map(h=>{const b=n({id:h.title.id,defaultMessage:h.title.defaultMessage},h.title.values);return r.createElement(CC.D,{key:h.id,label:b,badgeLabel:h.links.length.toString()},h.links.map(E=>{const S=E.search?`?${E.search}`:"";return r.createElement(PC.E,{as:J.NavLink,key:E.uid,to:`${E.to}${S}`},E.title)}))})))};var Ro=p(21358);const SC=()=>({type:Ro.ZA}),xC=()=>({type:Ro.c2}),kC=(e,t,n,o)=>({type:Ro.ix,data:{authorizedCtLinks:e,authorizedStLinks:t,components:o,contentTypeSchemas:n}}),Vc=(e,t,n=[])=>e.filter(o=>o.isDisplayed).map(o=>{const a=[{action:"plugin::content-manager.explorer.create",subject:o.uid},{action:"plugin::content-manager.explorer.read",subject:o.uid}],l=[{action:"plugin::content-manager.explorer.read",subject:o.uid}],i=t==="collectionTypes"?a:l,c=n.find(({uid:d})=>d===o.uid);let u=null;if(c){const d={page:1,pageSize:c.settings.pageSize,sort:`${c.settings.defaultSortBy}:${c.settings.defaultSortOrder}`};u=(0,He.stringify)(d,{encode:!1})}return{permissions:i,search:u,kind:o.kind,title:o.info.displayName,to:`/content-manager/${o.kind}/${o.uid}`,uid:o.uid,name:o.uid,isDisplayed:o.isDisplayed}}),FC=(e,t)=>{const[n,o]=(0,Y.chain)(e).groupBy("kind").map((a,l)=>({name:l,links:a})).sortBy("name").value();return{collectionTypesSectionLinks:Vc((0,Y.get)(n,"links",[]),"collectionTypes",t),singleTypesSectionLinks:Vc((0,Y.get)(o,"links",[]),"singleTypes")}},qc=(e,t)=>t.map(({permissions:n})=>(0,y.hasPermissions)(e,n));var AC=p(25108),jC=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const $C=(e,t,n)=>jC(void 0,null,function*(){try{const{data:{data:o}}=yield me.be.get(fe("content-types-settings")),{collectionTypesSectionLinks:a,singleTypesSectionLinks:l}=FC(e,o),i=qc(t,a),c=yield Promise.all(i),u=a.filter((f,h)=>c[h]),d=qc(t,l),m=yield Promise.all(d),g=l.filter((f,h)=>m[h]);return{authorizedCtLinks:u,authorizedStLinks:g}}catch(o){return AC.error(o),n({type:"warning",message:{id:"notification.error"}}),{authorizedCtLinks:[],authorizedStLinks:[],contentTypes:[]}}});var NC=p(25108),VC=Object.defineProperty,qC=Object.defineProperties,BC=Object.getOwnPropertyDescriptors,Bc=Object.getOwnPropertySymbols,zC=Object.prototype.hasOwnProperty,ZC=Object.prototype.propertyIsEnumerable,zc=(e,t,n)=>t in e?VC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WC=(e,t)=>{for(var n in t||(t={}))zC.call(t,n)&&zc(e,n,t[n]);if(Bc)for(var n of Bc(t))ZC.call(t,n)&&zc(e,n,t[n]);return e},_C=(e,t)=>qC(e,BC(t)),UC=(e,t,n)=>new Promise((o,a)=>{var l=u=>{try{c(n.next(u))}catch(d){a(d)}},i=u=>{try{c(n.throw(u))}catch(d){a(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const HC=()=>{const e=(0,pe.useDispatch)(),t=(0,y.useNotification)(),n=(0,pe.useSelector)(Lt()),o=(0,r.useRef)(),{allPermissions:a}=(0,y.useRBACProvider)(),{runHookWaterfall:l}=(0,y.useStrapiApp)(),c=Fe.Z.CancelToken.source(),{notifyStatus:u}=(0,po.G)(),{formatMessage:d}=(0,V.useIntl)(),m=()=>UC(void 0,null,function*(){e(SC());try{const[{data:{data:g}},{data:{data:f}}]=yield Promise.all(["components","content-types"].map(O=>me.be.get(fe(O),{cancelToken:c.token})));u(d({id:P("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const{authorizedCtLinks:h,authorizedStLinks:b}=yield $C(f,a,t),{ctLinks:E}=l(Yt.LK,{ctLinks:h,models:f}),{stLinks:S}=l(Yt.dV,{stLinks:b,models:f}),C=kC(E,S,f,g);e(C)}catch(g){if(Fe.Z.isCancel(g))return;NC.error(g),t({type:"warning",message:{id:"notification.error"}})}});return o.current=m,(0,r.useEffect)(()=>(o.current(),()=>{c.cancel("Operation canceled by the user."),e(xC())}),[e,t]),_C(WC({},n),{refetchData:o.current})},GC=le.Z.contentManager,Zc=()=>{const e=(0,J.useRouteMatch)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:o,models:a,refetchData:l}=HC(),i=$e()([...n,...o],f=>f.title.toLowerCase()),{pathname:c}=(0,J.useLocation)(),{formatMessage:u}=(0,V.useIntl)(),{startSection:d}=(0,y.useGuidedTour)(),m=(0,r.useRef)(d);if((0,r.useEffect)(()=>{m.current&&m.current("contentManager")},[]),t==="loading")return r.createElement(be.o,{"aria-busy":"true"},r.createElement(oe.T,{title:u({id:P("header.name"),defaultMessage:"Content"})}),r.createElement(y.LoadingIndicatorPage,null));const g=a.filter(({isDisplayed:f})=>f);return i.length===0&&g.length>0&&c!=="/content-manager/403"?r.createElement(J.Redirect,{to:"/content-manager/403"}):g.length===0&&c!=="/content-manager/no-content-types"?r.createElement(J.Redirect,{to:"/content-manager/no-content-types"}):!e&&i.length>0?r.createElement(J.Redirect,{to:`${i[0].to}${i[0].search?`?${i[0].search}`:""}`}):r.createElement(ie.A,{sideNav:r.createElement(LC,null)},r.createElement(eu,null),r.createElement(xo.Provider,{value:{refetchData:l}},r.createElement(J.Switch,null,r.createElement(J.Route,{path:"/content-manager/components/:uid/configurations/edit"},r.createElement(y.CheckPagePermissions,{permissions:GC.componentsConfigurations},r.createElement(cC,null))),r.createElement(J.Route,{path:"/content-manager/collectionType/:slug",component:oC}),r.createElement(J.Route,{path:"/content-manager/singleType/:slug",component:gC}),r.createElement(J.Route,{path:"/content-manager/403"},r.createElement(mC,null)),r.createElement(J.Route,{path:"/content-manager/no-content-types"},r.createElement(pC,null)),r.createElement(J.Route,{path:"",component:y.NotFound}))))};function KC(){const{formatMessage:e}=(0,V.useIntl)();return r.createElement(r.Fragment,null,r.createElement(dt.Helmet,{title:e({id:P("plugin.name"),defaultMessage:"Content Manager"})}),r.createElement(Zc,null))}},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
