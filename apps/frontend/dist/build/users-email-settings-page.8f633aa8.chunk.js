"use strict";(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[8418],{95972:(N,D,t)=>{t.r(D),t.d(D,{default:()=>Le});var e=t(67294),g=t(23724),c=t(97132),o=t(68547),f=t(14087),A=t(185),j=t(67838),O=t(49066),y=t(81912),a=t(89031),b=(s,i,l)=>new Promise((I,B)=>{var w=R=>{try{W(l.next(R))}catch(F){B(F)}},Z=R=>{try{W(l.throw(R))}catch(F){B(F)}},W=R=>R.done?I(R.value):Promise.resolve(R.value).then(w,Z);W((l=l.apply(s,i)).next())});const C=()=>b(void 0,null,function*(){const{data:s}=yield a.be.get((0,a.Gc)("email-templates"));return s}),d=s=>a.be.put((0,a.Gc)("email-templates"),s);var p=t(45697),r=t.n(p),h=t(11057),L=t(63985),$=t(47144),U=t(18374),v=t(550),P=t(63237),T=t(72735),M=t(12028),n=t(52624),m=t(4585),u=t(30815),E=t(85018),x=Object.defineProperty,S=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Y=(s,i,l)=>i in s?x(s,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[i]=l,V=(s,i)=>{for(var l in i||(i={}))K.call(i,l)&&Y(s,l,i[l]);if(S)for(var l of S(i))X.call(i,l)&&Y(s,l,i[l]);return s};const G=({canUpdate:s,onEditClick:i})=>{const{formatMessage:l}=(0,c.useIntl)();return e.createElement(h.i,{colCount:3,rowCount:3},e.createElement(L.h,null,e.createElement($.Tr,null,e.createElement(U.Th,{width:"1%"},e.createElement(P.T,null,l({id:(0,a.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(U.Th,null,e.createElement(T.Z,{variant:"sigma",textColor:"neutral600"},l({id:(0,a.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(U.Th,{width:"1%"},e.createElement(P.T,null,l({id:(0,a.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(v.p,null,e.createElement($.Tr,V({},(0,o.onRowClick)({fn:()=>i("reset_password")})),e.createElement(U.Td,null,e.createElement(n.J,null,e.createElement(u.Z,{"aria-label":l({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(U.Td,null,e.createElement(T.Z,null,l({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(U.Td,V({},o.stopPropagation),e.createElement(M.h,{onClick:()=>i("reset_password"),label:l({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(m.Z,null)}))),e.createElement($.Tr,V({},(0,o.onRowClick)({fn:()=>i("email_confirmation")})),e.createElement(U.Td,null,e.createElement(n.J,null,e.createElement(E.Z,{"aria-label":l({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(U.Td,null,e.createElement(T.Z,null,l({id:(0,a.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(U.Td,V({},o.stopPropagation),e.createElement(M.h,{onClick:()=>i("email_confirmation"),label:l({id:(0,a.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:s&&e.createElement(m.Z,null)})))))};G.propTypes={canUpdate:r().bool.isRequired,onEditClick:r().func.isRequired};const k=G;var me=t(80831),ce=t(42866),pe=t(24969),ue=t(59946),Ee=t(36856),ve=t(11276),Q=t(74571),le=t(29728),ae=t(2407),fe=t(64256),H=t(53209);const ye=H.Ry().shape({options:H.Ry().shape({from:H.Ry().shape({name:H.Z_().required(o.translatedErrors.required),email:H.Z_().email(o.translatedErrors.email).required(o.translatedErrors.required)}).required(),response_email:H.Z_().email(o.translatedErrors.email),object:H.Z_().required(o.translatedErrors.required),message:H.Z_().required(o.translatedErrors.required)}).required(o.translatedErrors.required)}),re=({template:s,onToggle:i,onSubmit:l})=>{const{formatMessage:I}=(0,c.useIntl)();return e.createElement(ce.P,{onClose:i,labelledBy:`${I({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${I({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(pe.x,null,e.createElement(ae.O,{label:`${I({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${I({id:(0,a.OB)(s.display),defaultMessage:s.display})}`},e.createElement(ae.$,null,I({id:(0,a.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(ae.$,null,I({id:(0,a.OB)(s.display),defaultMessage:s.display})))),e.createElement(me.Formik,{onSubmit:l,initialValues:s,validateOnChange:!1,validationSchema:ye,enableReinitialize:!0},({errors:B,values:w,handleChange:Z,isSubmitting:W})=>{var R,F,J,q,_,ee,te;return e.createElement(o.Form,null,e.createElement(ue.f,null,e.createElement(ve.r,{gap:5},e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:Z,value:w.options.from.name,error:(F=(R=B==null?void 0:B.options)==null?void 0:R.from)==null?void 0:F.name,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:Z,value:w.options.from.email,error:(q=(J=B==null?void 0:B.options)==null?void 0:J.from)==null?void 0:q.email,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:Z,value:w.options.response_email,error:(_=B==null?void 0:B.options)==null?void 0:_.response_email,type:"text"})),e.createElement(Q.P,{col:6,s:12},e.createElement(o.GenericInput,{intlLabel:{id:(0,a.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:Z,value:w.options.object,error:(ee=B==null?void 0:B.options)==null?void 0:ee.object,type:"text"})),e.createElement(Q.P,{col:12,s:12},e.createElement(fe.g,{label:I({id:(0,a.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),name:"options.message",onChange:Z,value:w.options.message,error:((te=B==null?void 0:B.options)==null?void 0:te.message)&&I({id:B.options.message,defaultMessage:B.options.message})})))),e.createElement(Ee.m,{startActions:e.createElement(le.z,{onClick:i,variant:"tertiary"},"Cancel"),endActions:e.createElement(le.z,{loading:W,type:"submit"},"Finish")}))}))};re.propTypes={template:r().shape({display:r().string,icon:r().string,options:r().shape({from:r().shape({name:r().string,email:r().string}),message:r().string,object:r().string,response_email:r().string})}).isRequired,onSubmit:r().func.isRequired,onToggle:r().func.isRequired};const ge=re;var he=Object.defineProperty,Oe=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,se=(s,i,l)=>i in s?he(s,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[i]=l,Me=(s,i)=>{for(var l in i||(i={}))be.call(i,l)&&se(s,l,i[l]);if(oe)for(var l of oe(i))Te.call(i,l)&&se(s,l,i[l]);return s},Be=(s,i)=>Oe(s,Pe(i)),Re=(s,i,l)=>new Promise((I,B)=>{var w=R=>{try{W(l.next(R))}catch(F){B(F)}},Z=R=>{try{W(l.throw(R))}catch(F){B(F)}},W=R=>R.done?I(R.value):Promise.resolve(R.value).then(w,Z);W((l=l.apply(s,i)).next())});const Ae=()=>e.createElement(o.CheckPagePermissions,{permissions:y.Z.readEmailTemplates},e.createElement(Ce,null)),Ce=()=>{const{formatMessage:s}=(0,c.useIntl)(),{trackUsage:i}=(0,o.useTracking)(),{notifyStatus:l}=(0,f.G)(),I=(0,o.useNotification)(),{lockApp:B,unlockApp:w}=(0,o.useOverlayBlocker)(),Z=(0,e.useRef)(i),W=(0,g.useQueryClient)();(0,o.useFocusWhenNavigate)();const[R,F]=(0,e.useState)(!1),[J,q]=(0,e.useState)(null),_=(0,e.useMemo)(()=>({update:y.Z.updateEmailTemplates}),[]),{isLoading:ee,allowedActions:{canUpdate:te}}=(0,o.useRBAC)(_),{status:xe,data:ie}=(0,g.useQuery)("email-templates",()=>C(),{onSuccess(){l(s({id:(0,a.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){I({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),De=ee||xe!=="success",ne=()=>{F(z=>!z)},je=z=>{q(z),ne()},de=(0,g.useMutation)(z=>d({"email-templates":z}),{onSuccess(){return Re(this,null,function*(){yield W.invalidateQueries("email-templates"),I({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),Z.current("didEditEmailTemplates"),w(),ne()})},onError(){I({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),w()},refetchActive:!0}),{isLoading:Ie}=de,Ue=z=>{B(),Z.current("willEditEmailTemplates");const Se=Be(Me({},ie),{[J]:z});de.mutate(Se)};return De?e.createElement(A.o,{"aria-busy":"true"},e.createElement(o.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(O.D,null,e.createElement(o.LoadingIndicatorPage,null))):e.createElement(A.o,{"aria-busy":Ie},e.createElement(o.SettingsPageTitle,{name:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.T,{title:s({id:(0,a.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(O.D,null,e.createElement(k,{onEditClick:je,canUpdate:te}),R&&e.createElement(ge,{template:ie[J],onToggle:ne,onSubmit:Ue})))},Le=Ae},46979:(N,D,t)=>{t.d(D,{Z:()=>j});var e=t(78648),g=t(68547),c=t.n(g),o=(O,y,a)=>new Promise((b,C)=>{var d=h=>{try{r(a.next(h))}catch(L){C(L)}},p=h=>{try{r(a.throw(h))}catch(L){C(L)}},r=h=>h.done?b(h.value):Promise.resolve(h.value).then(d,p);r((a=a.apply(O,y)).next())});const f=e.Z.create({baseURL:""});f.interceptors.request.use(O=>o(void 0,null,function*(){return O.headers={Authorization:`Bearer ${g.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},O}),O=>{Promise.reject(O)}),f.interceptors.response.use(O=>O,O=>{var y;throw((y=O.response)==null?void 0:y.status)===401&&(g.auth.clearAppStorage(),window.location.reload()),O});const j=(0,g.wrapAxiosInstance)(f)},89031:(N,D,t)=>{t.d(D,{be:()=>e.Z,YX:()=>o,Gc:()=>j,OB:()=>O.Z});var e=t(46979),g=t(96486);const o=y=>Object.keys(y).reduce((a,b)=>{const C=y[b].controllers,d=Object.keys(C).reduce((p,r)=>((0,g.isEmpty)(C[r])||(p[r]=C[r]),p),{});return(0,g.isEmpty)(d)||(a[b]={controllers:d}),a},{});var f=t(31498);const j=y=>`/${f.Z}/${y}`;var O=t(84757)},2407:(N,D,t)=>{t.d(D,{$:()=>L,O:()=>U});var e=t(67294),g=t(45697),c=t(71893),o=t(16405),f=t(72735),A=t(35961),j=t(46273),O=t(63237),y=Object.defineProperty,a=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,d=(v,P,T)=>P in v?y(v,P,{enumerable:!0,configurable:!0,writable:!0,value:T}):v[P]=T,p=(v,P)=>{for(var T in P||(P={}))b.call(P,T)&&d(v,T,P[T]);if(a)for(var T of a(P))C.call(P,T)&&d(v,T,P[T]);return v},r=(v,P)=>{var T={};for(var M in v)b.call(v,M)&&P.indexOf(M)<0&&(T[M]=v[M]);if(v!=null&&a)for(var M of a(v))P.indexOf(M)<0&&C.call(v,M)&&(T[M]=v[M]);return T};const h=(0,c.default)(j.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:v})=>v.colors.neutral500};
    }
  }
  :last-of-type ${A.x} {
    display: none;
  }
  :last-of-type ${f.Z} {
    color: ${({theme:v})=>v.colors.neutral800};
    font-weight: ${({theme:v})=>v.fontWeights.bold};
  }
`,L=({children:v})=>e.createElement(h,{inline:!0,as:"li"},e.createElement(f.Z,{variant:"pi",textColor:"neutral600"},v),e.createElement(A.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3},e.createElement(o.default,null)));L.displayName="Crumb",L.propTypes={children:g.node.isRequired};const $=g.shape({type:g.oneOf([L])}),U=v=>{var P=v,{children:T,label:M}=P,n=r(P,["children","label"]);return e.createElement(j.k,p({},n),e.createElement(O.T,null,M),e.createElement("ol",{"aria-hidden":!0},T))};U.displayName="Breadcrumbs",U.propTypes={children:g.oneOfType([g.arrayOf($),$]).isRequired,label:g.string.isRequired}},49066:(N,D,t)=>{t.d(D,{D:()=>o});var e=t(67294),g=t(45697),c=t(35961);const o=({children:f})=>e.createElement(c.x,{paddingLeft:10,paddingRight:10},f);o.propTypes={children:g.node.isRequired}},67838:(N,D,t)=>{t.d(D,{T:()=>P});var e=t(67294),g=t(71893),c=t(45697),o=t(72735),f=t(35961),A=t(46273);const j=n=>{const m=(0,e.useRef)(null),[u,E]=(0,e.useState)(!0),x=([S])=>{E(S.isIntersecting)};return(0,e.useEffect)(()=>{const S=m.current,K=new IntersectionObserver(x,n);return S&&K.observe(m.current),()=>{S&&K.disconnect()}},[m,n]),[m,u]};var O=t(98402);const y=(n,m)=>{const u=(0,O.useCallbackRef)(m);(0,e.useLayoutEffect)(()=>{const E=new ResizeObserver(u);return Array.isArray(n)?n.forEach(x=>{x.current&&E.observe(x.current)}):n.current&&E.observe(n.current),()=>{E.disconnect()}},[n,u])};var a=Object.defineProperty,b=Object.defineProperties,C=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,h=(n,m,u)=>m in n?a(n,m,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[m]=u,L=(n,m)=>{for(var u in m||(m={}))p.call(m,u)&&h(n,u,m[u]);if(d)for(var u of d(m))r.call(m,u)&&h(n,u,m[u]);return n},$=(n,m)=>b(n,C(m)),U=(n,m)=>{var u={};for(var E in n)p.call(n,E)&&m.indexOf(E)<0&&(u[E]=n[E]);if(n!=null&&d)for(var E of d(n))m.indexOf(E)<0&&r.call(n,E)&&(u[E]=n[E]);return u};const v=()=>{const n=(0,e.useRef)(null),[m,u]=(0,e.useState)(null),[E,x]=j({root:null,rootMargin:"0px",threshold:0});return y(E,()=>{E.current&&u(E.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&u(n.current.getBoundingClientRect())},[n]),{containerRef:E,isVisible:x,baseHeaderLayoutRef:n,headerSize:m}},P=n=>{const{containerRef:m,isVisible:u,baseHeaderLayoutRef:E,headerSize:x}=v();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:x==null?void 0:x.height},ref:m},u&&e.createElement(M,L({ref:E},n))),!u&&e.createElement(M,$(L({},n),{sticky:!0,width:x==null?void 0:x.width})))};P.displayName="HeaderLayout";const T=(0,g.default)(f.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${n=>n.width}px;
  z-index: 4;
  box-shadow: ${({theme:n})=>n.shadows.tableShadow};
`,M=e.forwardRef((n,m)=>{var u=n,{navigationAction:E,primaryAction:x,secondaryAction:S,subtitle:K,title:X,sticky:Y,width:V}=u,G=U(u,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const k=typeof K=="string";return Y?e.createElement(T,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:V,"data-strapi-header-sticky":!0},e.createElement(A.k,{justifyContent:"space-between"},e.createElement(A.k,null,E&&e.createElement(f.x,{paddingRight:3},E),e.createElement(f.x,null,e.createElement(o.Z,L({variant:"beta",as:"h1"},G),X),k?e.createElement(o.Z,{variant:"pi",textColor:"neutral600"},K):K),S?e.createElement(f.x,{paddingLeft:4},S):null),e.createElement(A.k,null,x?e.createElement(f.x,{paddingLeft:2},x):void 0))):e.createElement(f.x,{ref:m,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:E?6:8,background:"neutral100","data-strapi-header":!0},E?e.createElement(f.x,{paddingBottom:2},E):null,e.createElement(A.k,{justifyContent:"space-between"},e.createElement(A.k,null,e.createElement(o.Z,L({as:"h1",variant:"alpha"},G),X),S?e.createElement(f.x,{paddingLeft:4},S):null),x),k?e.createElement(o.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},K):K)});M.displayName="BaseHeaderLayout",M.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},M.propTypes={navigationAction:c.node,primaryAction:c.node,secondaryAction:c.node,sticky:c.bool,subtitle:c.oneOfType([c.string,c.node]),title:c.string.isRequired,width:c.number},P.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},P.propTypes={navigationAction:c.node,primaryAction:c.node,secondaryAction:c.node,subtitle:c.oneOfType([c.string,c.node]),title:c.string.isRequired}},185:(N,D,t)=>{t.d(D,{o:()=>C});var e=t(67294),g=t(45697),c=t(71893),o=Object.defineProperty,f=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,O=(d,p,r)=>p in d?o(d,p,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[p]=r,y=(d,p)=>{for(var r in p||(p={}))A.call(p,r)&&O(d,r,p[r]);if(f)for(var r of f(p))j.call(p,r)&&O(d,r,p[r]);return d},a=(d,p)=>{var r={};for(var h in d)A.call(d,h)&&p.indexOf(h)<0&&(r[h]=d[h]);if(d!=null&&f)for(var h of f(d))p.indexOf(h)<0&&j.call(d,h)&&(r[h]=d[h]);return r};const b=c.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,C=d=>{var p=d,{labelledBy:r}=p,h=a(p,["labelledBy"]);const L=r||"main-content-title";return e.createElement(b,y({"aria-labelledby":L,id:"main-content",tabIndex:-1},h))};C.defaultProps={labelledBy:void 0},C.propTypes={labelledBy:g.string}},30815:(N,D,t)=>{t.d(D,{Z:()=>O});var e=t(67294),g=Object.defineProperty,c=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,A=(y,a,b)=>a in y?g(y,a,{enumerable:!0,configurable:!0,writable:!0,value:b}):y[a]=b,j=(y,a)=>{for(var b in a||(a={}))o.call(a,b)&&A(y,b,a[b]);if(c)for(var b of c(a))f.call(a,b)&&A(y,b,a[b]);return y};function O(y){return e.createElement("svg",j({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.681 2.804A9.64 9.64 0 0011.818 2C6.398 2 2 6.48 2 12c0 5.521 4.397 10 9.818 10 2.03 0 4.011-.641 5.67-1.835a9.987 9.987 0 003.589-4.831 1.117 1.117 0 00-.664-1.418 1.086 1.086 0 00-1.393.676 7.769 7.769 0 01-2.792 3.758 7.546 7.546 0 01-4.41 1.428V4.222h.002a7.492 7.492 0 013.003.625 7.61 7.61 0 012.5 1.762l.464.551-2.986 3.042a.186.186 0 00.129.316H22V3.317a.188.188 0 00-.112-.172.179.179 0 00-.199.04l-2.355 2.4-.394-.468-.02-.02a9.791 9.791 0 00-3.239-2.293zm-3.863 1.418V2v2.222zm0 0v15.556c-4.216 0-7.636-3.484-7.636-7.778s3.42-7.777 7.636-7.778z",fill:"#212134"}))}}}]);
