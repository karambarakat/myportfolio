(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[8853],{16098:(U,S,s)=>{"use strict";s.r(S),s.d(S,{default:()=>wn});var e=s(67294),i=s(49656),a=s(68547),d=s(31498),p=s(81912),C=s(29728),T=s(17034),O=s(67838),v=s(36989),f=s(49066),A=s(185),j=s(11057),u=s(63985),h=s(47144),E=s(18374),D=s(63237),M=s(72735),G=s(14087),F=s(96315),_=s(97132),$=s(23724),Z=s(63852),I=s(89031),l=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const b=(n,t)=>l(void 0,null,function*(){try{const{data:r}=yield I.be.get((0,I.Gc)("roles"));return t("The roles have loaded successfully"),r}catch(r){throw n({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),x=(n,t)=>l(void 0,null,function*(){try{yield I.be.delete(`${(0,I.Gc)("roles")}/${n}`)}catch(r){t({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var L=s(45697),B=s.n(L),K=s(12028),z=s(46273),ee=s(550),ne=s(4585),oe=s(20022),se=Object.defineProperty,V=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,fe=(n,t,r)=>t in n?se(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,re=(n,t)=>{for(var r in t||(t={}))de.call(t,r)&&fe(n,r,t[r]);if(V)for(var r of V(t))te.call(t,r)&&fe(n,r,t[r]);return n};const ue=({sortedRoles:n,canDelete:t,permissions:r,setRoleToDelete:m,onDelete:y})=>{const{formatMessage:g}=(0,_.useIntl)(),{push:R}=(0,i.useHistory)(),[c,o]=y,P=w=>t&&!["public","authenticated"].includes(w.type),N=w=>{m(w),o(!c)},W=w=>{R(`/settings/${d.Z}/roles/${w}`)};return e.createElement(ee.p,null,n==null?void 0:n.map(w=>e.createElement(h.Tr,re({key:w.name},(0,a.onRowClick)({fn:()=>W(w.id)})),e.createElement(E.Td,{width:"20%"},e.createElement(M.Z,null,w.name)),e.createElement(E.Td,{width:"50%"},e.createElement(M.Z,null,w.description)),e.createElement(E.Td,{width:"30%"},e.createElement(M.Z,null,`${w.nb_users} ${g({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),e.createElement(E.Td,null,e.createElement(z.k,re({justifyContent:"end"},a.stopPropagation),e.createElement(a.CheckPermissions,{permissions:r.updateRole},e.createElement(K.h,{onClick:()=>W(w.id),noBorder:!0,icon:e.createElement(ne.Z,null),label:g({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${w.name}`})})),P(w)&&e.createElement(a.CheckPermissions,{permissions:r.deleteRole},e.createElement(K.h,{onClick:()=>N(w.id),noBorder:!0,icon:e.createElement(oe.default,null),label:g({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${w.name}`})})))))))},ve=ue;ue.defaultProps={canDelete:!1},ue.propTypes={onDelete:B().array.isRequired,permissions:B().object.isRequired,setRoleToDelete:B().func.isRequired,sortedRoles:B().array.isRequired,canDelete:B().bool};var Ee=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const Pe=()=>{const{trackUsage:n}=(0,a.useTracking)(),{formatMessage:t}=(0,_.useIntl)(),{push:r}=(0,i.useHistory)(),m=(0,a.useNotification)(),{notifyStatus:y}=(0,G.G)(),[{query:g}]=(0,a.useQueryParams)(),R=(g==null?void 0:g._q)||"",[c,o]=(0,e.useState)(!1),[P,N]=(0,e.useState)(!1),[W,w]=(0,e.useState)();(0,a.useFocusWhenNavigate)();const H=(0,$.useQueryClient)(),k=(0,e.useMemo)(()=>({create:p.Z.createRole,read:p.Z.readRoles,update:p.Z.updateRole,delete:p.Z.deleteRole}),[]),{isLoading:Y,allowedActions:{canRead:J,canDelete:ce}}=(0,a.useRBAC)(k),{isLoading:jn,data:{roles:Le},isFetching:_n}=(0,$.useQuery)("get-roles",()=>b(m,y),{initialData:{},enabled:J}),Et=jn||_n,Sn=()=>{n("willCreateRole"),r(`/settings/${d.Z}/roles/new`)},Bn=()=>{o(!c)},Un={roles:{id:(0,I.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,I.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},In=t({id:"global.roles",defaultMessage:"Roles"}),$n=(0,$.useMutation)(Wn=>x(Wn,m),{onSuccess(){return Ee(this,null,function*(){yield H.invalidateQueries("get-roles")})}}),Zn=()=>Ee(void 0,null,function*(){N(!0),yield $n.mutateAsync(W),o(!c),N(!1)}),ge=(0,Z.ZP)(Le||[],R,{keys:["name","description"]}),Nn=R&&!ge.length?"search":"roles",Fn=4,Kn=((Le==null?void 0:Le.length)||0)+1;return e.createElement(T.A,null,e.createElement(a.SettingsPageTitle,{name:In}),e.createElement(A.o,{"aria-busy":Et},e.createElement(O.T,{title:t({id:"global.roles",defaultMessage:"Roles"}),subtitle:t({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(a.CheckPermissions,{permissions:p.Z.createRole},e.createElement(C.z,{onClick:Sn,startIcon:e.createElement(F.default,null),size:"S"},t({id:(0,I.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(v.Z,{startActions:e.createElement(a.SearchURLQuery,{label:t({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(f.D,null,!J&&e.createElement(a.NoPermissions,null),(Et||Y)&&e.createElement(a.LoadingIndicatorPage,null),J&&ge&&(ge!=null&&ge.length)?e.createElement(j.i,{colCount:Fn,rowCount:Kn},e.createElement(u.h,null,e.createElement(h.Tr,null,e.createElement(E.Th,null,e.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},t({id:"global.name",defaultMessage:"Name"}))),e.createElement(E.Th,null,e.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},t({id:"global.description",defaultMessage:"Description"}))),e.createElement(E.Th,null,e.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},t({id:"global.users",defaultMessage:"Users"}))),e.createElement(E.Th,null,e.createElement(D.T,null,t({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(ve,{sortedRoles:ge,canDelete:ce,permissions:p.Z,setRoleToDelete:w,onDelete:[c,o]})):e.createElement(a.EmptyStateLayout,{content:Un[Nn]})),e.createElement(a.ConfirmDialog,{isConfirmButtonLoading:P,onConfirm:Zn,onToggleDialog:Bn,isOpen:c})))},Te=()=>e.createElement(a.CheckPagePermissions,{permissions:p.Z.accessRoles},e.createElement(Pe,null));var ye=s(80831),Q=s(7681),X=s(35961),he=s(16364),me=s(64256),Oe=s(67109),we=s(85018),be=s(11276),ae=s(74571),ie=s(84757),q=s(96486);const je=(0,e.createContext)({}),_e=({children:n,value:t})=>e.createElement(je.Provider,{value:t},n),Ae=()=>(0,e.useContext)(je);_e.propTypes={children:B().node.isRequired,value:B().object.isRequired};var Re=s(71893),Pt=s(35161),yt=s.n(Pt),ht=s(13217),Ot=s.n(ht);const bt=n=>{switch(n){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Rt=(0,Re.default)(X.x)`
  margin: -1px;
  border-radius: ${({theme:n})=>n.spaces[1]} 0 0 ${({theme:n})=>n.spaces[1]};
`;function xe({route:n}){const{formatMessage:t}=(0,_.useIntl)(),{method:r,handler:m,path:y}=n,g=y?Ot()(y.split("/")):[],[R="",c=""]=m?m.split("."):[],o=bt(n.method);return e.createElement(Q.K,{spacing:2},e.createElement(M.Z,{variant:"delta",as:"h3"},t({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,R),e.createElement(M.Z,{variant:"delta",textColor:"primary600"},".",c)),e.createElement(Q.K,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},e.createElement(Rt,{background:o.background,borderColor:o.border,padding:2},e.createElement(M.Z,{fontWeight:"bold",textColor:o.text},r)),e.createElement(X.x,{paddingLeft:2,paddingRight:2},yt()(g,P=>e.createElement(M.Z,{key:P,textColor:P.includes(":")?"neutral600":"neutral900"},"/",P)))))}xe.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},xe.propTypes={route:B().shape({handler:B().string,method:B().string,path:B().string})};const Ct=xe,Dt=()=>{const{formatMessage:n}=(0,_.useIntl)(),{selectedAction:t,routes:r}=Ae(),m=(0,q.without)(t.split("."),"controllers"),y=(0,q.get)(r,m[0]),g=m.slice(1).join("."),R=(0,q.isEmpty)(y)?[]:y.filter(c=>c.handler.endsWith(g));return e.createElement(ae.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},t?e.createElement(Q.K,{spacing:2},R.map((c,o)=>e.createElement(Ct,{key:o,route:c}))):e.createElement(Q.K,{spacing:2},e.createElement(M.Z,{variant:"delta",as:"h3"},n({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(M.Z,{as:"p",textColor:"neutral600"},n({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var Tt=s(48734),At=s(74756),xt=s(63081),Lt=s(11700),Mt=s.n(Lt);function wt(n){switch(n){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Mt()(n.replace("api::","").replace("plugin::",""))}}const jt=wt;var _t=s(89734),Se=s.n(_t),Be=s(36213),St=s(78114);const Ue=Re.css`
  background: ${n=>n.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Bt=(0,Re.default)(X.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${n=>n.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${n=>n.isActive&&Ue}
  &:hover {
    ${Ue}
  }
`,Ut=Re.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:n})=>n.colors.neutral150};
`,Ie=({subCategory:n})=>{const{formatMessage:t}=(0,_.useIntl)(),{onChange:r,onChangeSelectAll:m,onSelectedAction:y,selectedAction:g,modifiedData:R}=Ae(),c=(0,e.useMemo)(()=>(0,q.get)(R,n.name,{}),[R,n]),o=(0,e.useMemo)(()=>Object.values(c).every(w=>w.enabled===!0),[c]),P=(0,e.useMemo)(()=>Object.values(c).some(w=>w.enabled===!0)&&!o,[c,o]),N=(0,e.useCallback)(({target:{name:w}})=>{m({target:{name:w,value:!o}})},[o,m]),W=(0,e.useCallback)(w=>g===w,[g]);return e.createElement(X.x,null,e.createElement(z.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(X.x,{paddingRight:4},e.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},n.label)),e.createElement(Ut,null),e.createElement(X.x,{paddingLeft:4},e.createElement(Be.X,{name:n.name,value:o,onValueChange:w=>N({target:{name:n.name,value:w}}),indeterminate:P},t({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(z.k,{paddingTop:6,paddingBottom:6},e.createElement(be.r,{gap:2,style:{flex:1}},n.actions.map(w=>{const H=`${w.name}.enabled`;return e.createElement(ae.P,{col:6,key:w.name},e.createElement(Bt,{isActive:W(w.name),padding:2,hasRadius:!0},e.createElement(Be.X,{value:(0,q.get)(R,H,!1),name:H,onValueChange:k=>r({target:{name:H,value:k}})},w.label),e.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>y(w.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(St.Z,null))))}))))};Ie.propTypes={subCategory:B().object.isRequired};const It=Ie;var $t=Object.defineProperty,Zt=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ze=(n,t,r)=>t in n?$t(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Wt=(n,t)=>{for(var r in t||(t={}))Ft.call(t,r)&&Ze(n,r,t[r]);if($e)for(var r of $e(t))Kt.call(t,r)&&Ze(n,r,t[r]);return n},Gt=(n,t)=>Zt(n,Nt(t));const Ne=({name:n,permissions:t})=>{const r=(0,e.useMemo)(()=>Se()(Object.values(t.controllers).reduce((m,y,g)=>{const R=`${n}.controllers.${Object.keys(t.controllers)[g]}`,c=Se()(Object.keys(y).reduce((o,P)=>[...o,Gt(Wt({},y[P]),{label:P,name:`${R}.${P}`})],[]),"label");return[...m,{actions:c,label:Object.keys(t.controllers)[g],name:R}]},[]),"label"),[n,t]);return e.createElement(X.x,{padding:6},r.map(m=>e.createElement(It,{key:m.name,subCategory:m})))};Ne.propTypes={name:B().string.isRequired,permissions:B().object.isRequired};const zt=Ne;var kt=Object.defineProperty,Vt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Ke=(n,t,r)=>t in n?kt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Yt=(n,t)=>{for(var r in t||(t={}))Qt.call(t,r)&&Ke(n,r,t[r]);if(Fe)for(var r of Fe(t))Xt.call(t,r)&&Ke(n,r,t[r]);return n},Jt=(n,t)=>Vt(n,Ht(t));const qt=(n,t)=>{const r=Object.keys(t).sort().map(m=>({name:m,isOpen:!1}));return Jt(Yt({},n),{collapses:r})};var Ce=s(60612),er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,Ge=(n,t,r)=>t in n?er(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ze=(n,t)=>{for(var r in t||(t={}))nr.call(t,r)&&Ge(n,r,t[r]);if(We)for(var r of We(t))sr.call(t,r)&&Ge(n,r,t[r]);return n},ke=(n,t)=>tr(n,rr(t));const ar={collapses:[]},or=(n,t)=>(0,Ce.default)(n,r=>{switch(t.type){case"TOGGLE_COLLAPSE":{r.collapses=n.collapses.map((m,y)=>y===t.index?ke(ze({},m),{isOpen:!m.isOpen}):ke(ze({},m),{isOpen:!1}));break}default:return r}}),ir=()=>{const{modifiedData:n}=Ae(),{formatMessage:t}=(0,_.useIntl)(),[{collapses:r},m]=(0,e.useReducer)(or,ar,g=>qt(g,n)),y=g=>m({type:"TOGGLE_COLLAPSE",index:g});return e.createElement(Q.K,{spacing:1},r.map((g,R)=>e.createElement(Tt.U,{expanded:g.isOpen,onToggle:()=>y(R),key:g.name,variant:R%2===0?"secondary":void 0},e.createElement(At.B,{title:jt(g.name),description:t({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:g.name}),variant:R%2?"primary":"secondary"}),e.createElement(xt.v,null,e.createElement(X.x,null,e.createElement(zt,{permissions:n[g.name],name:g.name}))))))};var lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,He=(n,t,r)=>t in n?lr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,mr=(n,t)=>{for(var r in t||(t={}))ur.call(t,r)&&He(n,r,t[r]);if(Ve)for(var r of Ve(t))pr.call(t,r)&&He(n,r,t[r]);return n},gr=(n,t)=>cr(n,dr(t));const fr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},vr=(n,t)=>(0,Ce.default)(n,r=>{switch(t.type){case"ON_CHANGE":{const m=t.keys.length,y=t.keys[m-1]==="enabled";if(t.value&&y){const g=(0,q.take)(t.keys,m-1).join(".");r.selectedAction=g}(0,q.set)(r,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_SELECT_ALL":{const m=["modifiedData",...t.keys],y=(0,q.get)(n,m,{}),g=Object.keys(y).reduce((R,c)=>(R[c]=gr(mr({},y[c]),{enabled:t.value}),R),{});(0,q.set)(r,m,g);break}case"ON_RESET":{r.modifiedData=n.initialData;break}case"ON_SUBMIT_SUCCEEDED":{r.initialData=n.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:m}=t;r.selectedAction=m===n.selectedAction?"":m;break}default:return r}});var Er=Object.defineProperty,Pr=Object.defineProperties,yr=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Xe=(n,t,r)=>t in n?Er(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,br=(n,t)=>{for(var r in t||(t={}))hr.call(t,r)&&Xe(n,r,t[r]);if(Qe)for(var r of Qe(t))Or.call(t,r)&&Xe(n,r,t[r]);return n},Rr=(n,t)=>Pr(n,yr(t));const Cr=(n,t,r)=>Rr(br({},n),{initialData:t,modifiedData:t,routes:r});var Dr=Object.defineProperty,Tr=Object.defineProperties,Ar=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Je=(n,t,r)=>t in n?Dr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Mr=(n,t)=>{for(var r in t||(t={}))xr.call(t,r)&&Je(n,r,t[r]);if(Ye)for(var r of Ye(t))Lr.call(t,r)&&Je(n,r,t[r]);return n},wr=(n,t)=>Tr(n,Ar(t));const qe=(0,e.forwardRef)(({permissions:n,routes:t},r)=>{const{formatMessage:m}=(0,_.useIntl)(),[y,g]=(0,e.useReducer)(vr,fr,N=>Cr(N,n,t));(0,e.useImperativeHandle)(r,()=>({getPermissions(){return{permissions:y.modifiedData}},resetForm(){g({type:"ON_RESET"})},setFormAfterSubmit(){g({type:"ON_SUBMIT_SUCCEEDED"})}}));const R=({target:{name:N,value:W}})=>g({type:"ON_CHANGE",keys:N.split("."),value:W==="empty__string_value"?"":W}),c=({target:{name:N,value:W}})=>g({type:"ON_CHANGE_SELECT_ALL",keys:N.split("."),value:W}),o=N=>g({type:"SELECT_ACTION",actionToSelect:N}),P=wr(Mr({},y),{onChange:R,onChangeSelectAll:c,onSelectedAction:o});return e.createElement(_e,{value:P},e.createElement(be.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(ae.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(Q.K,{spacing:6},e.createElement(Q.K,{spacing:2},e.createElement(M.Z,{variant:"delta",as:"h2"},m({id:(0,ie.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(M.Z,{as:"p",textColor:"neutral600"},m({id:(0,ie.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(ir,null))),e.createElement(Dt,null)))});qe.propTypes={permissions:B().object.isRequired,routes:B().object.isRequired};const et=(0,e.memo)(qe),Yn={isLoading:!0,modifiedData:{}},Jn=(n,t)=>produce(n,r=>{switch(t.type){case"GET_DATA":{r.isLoading=!0,r.modifiedData={};break}case"GET_DATA_SUCCEEDED":{r.isLoading=!1,r.modifiedData=t.data;break}case"GET_DATA_ERROR":{r.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{r.modifiedData=t.data;break}default:return r}}),qn=null;var jr=s(25108),_r=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const es=(n,t)=>{const{isLoading:r,allowedActions:m}=useRBAC(t),[{isLoading:y,modifiedData:g},R]=useReducer(reducer,initialState),c=useNotification(),o=useRef(!0),P=new AbortController,{signal:N}=P;useEffect(()=>(r||(()=>_r(void 0,null,function*(){try{R({type:"GET_DATA"});const H=yield request(getRequestURL(n),{method:"GET",signal:N});R({type:"GET_DATA_SUCCEEDED",data:H})}catch(H){o.current&&(R({type:"GET_DATA_ERROR"}),jr.error(H),c({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{P.abort(),o.current=!1}),[r,n]);const W=useCallback(w=>{R({type:"ON_SUBMIT_SUCCEEDED",data:w})},[]);return{allowedActions:m,dispatchSubmitSucceeded:W,isLoading:y,isLoadingForPermissions:r,modifiedData:g}},ts=null;var Sr=Object.defineProperty,Br=Object.defineProperties,Ur=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,rt=(n,t,r)=>t in n?Sr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Zr=(n,t)=>{for(var r in t||(t={}))Ir.call(t,r)&&rt(n,r,t[r]);if(tt)for(var r of tt(t))$r.call(t,r)&&rt(n,r,t[r]);return n},Nr=(n,t)=>Br(n,Ur(t));const rs=(n,t)=>Nr(Zr({},n),{isLoading:t}),ns=null,ss={roles:[],isLoading:!0},as=(n,t)=>produce(n,r=>{switch(t.type){case"GET_DATA":{r.isLoading=!0,r.roles=[];break}case"GET_DATA_SUCCEEDED":{r.roles=t.data,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}}),os=null;var Fr=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const is=(n=!0)=>{const[{roles:t,isLoading:r},m]=useReducer(reducer,initialState,()=>init(initialState,n)),y=useNotification(),g=useRef(!0),R=new AbortController,{signal:c}=R;useEffect(()=>(n&&o(),()=>{R.abort(),g.current=!1}),[n]);const o=()=>Fr(void 0,null,function*(){try{m({type:"GET_DATA"});const{roles:P}=yield request(`/${pluginId}/roles`,{method:"GET",signal:c});m({type:"GET_DATA_SUCCEEDED",data:P})}catch(P){const N=get(P,["response","payload","message"],"An error occured");g.current&&(m({type:"GET_DATA_ERROR"}),N!=="Forbidden"&&y({type:"warning",message:N}))}});return{roles:t,isLoading:r,getData:o}},ls=null;var Kr=Object.defineProperty,Wr=Object.defineProperties,Gr=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,st=(n,t,r)=>t in n?Kr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Vr=(n,t)=>{for(var r in t||(t={}))zr.call(t,r)&&st(n,r,t[r]);if(nt)for(var r of nt(t))kr.call(t,r)&&st(n,r,t[r]);return n},Hr=(n,t)=>Wr(n,Gr(t));const Qr=(n,t)=>Hr(Vr({},n),{isLoading:t});var De=s(46979);const at={permissions:{},routes:{},isLoading:!0},Xr=(n,t)=>(0,Ce.default)(n,r=>{switch(t.type){case"GET_DATA":{r.isLoading=!0,r.permissions={},r.routes={};break}case"GET_DATA_SUCCEEDED":{r.permissions=t.permissions,r.routes=t.routes,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}});var ot=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const it=(n=!0)=>{const t=(0,a.useNotification)(),[{permissions:r,routes:m,isLoading:y},g]=(0,e.useReducer)(Xr,at,()=>Qr(at,n)),R=(0,e.useCallback)(()=>ot(void 0,null,function*(){try{g({type:"GET_DATA"});const[{permissions:c},{routes:o}]=yield Promise.all([`/${d.Z}/permissions`,`/${d.Z}/routes`].map(P=>ot(void 0,null,function*(){return(yield De.Z.get(P)).data})));g({type:"GET_DATA_SUCCEEDED",permissions:(0,I.YX)(c),routes:o})}catch(c){const o=(0,q.get)(c,["response","payload","message"],"An error occured");g({type:"GET_DATA_ERROR"}),o!=="Forbidden"&&t({type:"warning",message:o})}}),[t]);return(0,e.useEffect)(()=>{n&&R()},[R,n]),{permissions:r,routes:m,getData:R,isLoading:y}},Yr={role:{},isLoading:!0},Jr=(n,t)=>(0,Ce.default)(n,r=>{switch(t.type){case"GET_DATA_SUCCEEDED":{r.role=t.role,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{r.role.name=t.name,r.role.description=t.description;break}default:return r}});var qr=s(25108),en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,ct=(n,t,r)=>t in n?en(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,dt=(n,t)=>{for(var r in t||(t={}))nn.call(t,r)&&ct(n,r,t[r]);if(lt)for(var r of lt(t))sn.call(t,r)&&ct(n,r,t[r]);return n},an=(n,t)=>tn(n,rn(t)),on=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const ln=n=>{const[t,r]=(0,e.useReducer)(Jr,Yr),m=(0,a.useNotification)(),y=(0,e.useRef)(null);(0,e.useEffect)(()=>(y.current=!0,n?g(n):r({type:"GET_DATA_SUCCEEDED",role:{}}),()=>y.current=!1),[n]);const g=c=>on(void 0,null,function*(){try{const{data:{role:o}}=yield De.Z.get(`/${d.Z}/roles/${c}`);y.current&&r({type:"GET_DATA_SUCCEEDED",role:o})}catch(o){qr.error(o),r({type:"GET_DATA_ERROR"}),m({type:"warning",message:{id:"notification.error"}})}}),R=(0,e.useCallback)(c=>{r(dt({type:"ON_SUBMIT_SUCCEEDED"},c))},[]);return an(dt({},t),{onSubmitSucceeded:R})};var le=s(53209);const cn=le.Ry().shape({name:le.Z_().required(a.translatedErrors.required),description:le.Z_().required(a.translatedErrors.required)});var dn=s(25108),un=Object.defineProperty,pn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,pt=(n,t,r)=>t in n?un(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,mt=(n,t)=>{for(var r in t||(t={}))gn.call(t,r)&&pt(n,r,t[r]);if(ut)for(var r of ut(t))fn.call(t,r)&&pt(n,r,t[r]);return n},vn=(n,t)=>pn(n,mn(t)),En=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const Pn=()=>{const{formatMessage:n}=(0,_.useIntl)(),[t,r]=(0,e.useState)(!1),m=(0,a.useNotification)(),{lockApp:y,unlockApp:g}=(0,a.useOverlayBlocker)(),{params:{id:R}}=(0,i.useRouteMatch)(`/settings/${d.Z}/roles/:id`),{isLoading:c,routes:o}=it(),{role:P,onSubmitSucceeded:N,isLoading:W}=ln(R),w=(0,e.useRef)(),H=k=>En(void 0,null,function*(){y(),r(!0);try{const Y=w.current.getPermissions();yield De.Z.put(`/${d.Z}/roles/${R}`,vn(mt(mt({},k),Y),{users:[]})),N({name:k.name,description:k.description}),m({type:"success",message:{id:(0,ie.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(Y){dn.error(Y),m({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),g()});return W?e.createElement(a.LoadingIndicatorPage,null):e.createElement(A.o,null,e.createElement(a.SettingsPageTitle,{name:"Roles"}),e.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:P.name,description:P.description},onSubmit:H,validationSchema:cn},({handleSubmit:k,values:Y,handleChange:J,errors:ce})=>e.createElement(a.Form,{noValidate:!0,onSubmit:k},e.createElement(O.T,{primaryAction:!c&&e.createElement(C.z,{disabled:P.code==="strapi-super-admin",type:"submit",loading:t,startIcon:e.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:P.name,subtitle:P.description,navigationAction:e.createElement(a.Link,{startIcon:e.createElement(Oe.Z,null),to:"/settings/users-permissions/roles"},n({id:"global.back",defaultMessage:"Back"}))}),e.createElement(f.D,null,e.createElement(Q.K,{spacing:7},e.createElement(X.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(Q.K,{spacing:4},e.createElement(M.Z,{variant:"delta",as:"h2"},n({id:(0,ie.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(be.r,{gap:4},e.createElement(ae.P,{col:6},e.createElement(he.o,{name:"name",value:Y.name||"",onChange:J,label:n({id:"global.name",defaultMessage:"Name"}),error:ce.name?n({id:ce.name,defaultMessage:"Invalid value"}):null})),e.createElement(ae.P,{col:6},e.createElement(me.g,{name:"description",value:Y.description||"",onChange:J,label:n({id:"global.description",defaultMessage:"Description"}),error:ce.description?n({id:ce.description,defaultMessage:"Invalid value"}):null}))))),!c&&e.createElement(et,{ref:w,permissions:P.permissions,routes:o}))))))},yn=()=>e.createElement(a.CheckPagePermissions,{permissions:p.Z.updateRole},e.createElement(Pn,null)),hn=le.Ry().shape({name:le.Z_().required(a.translatedErrors.required),description:le.Z_().required(a.translatedErrors.required)});var On=s(25108),bn=Object.defineProperty,Rn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,Dn=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable,ft=(n,t,r)=>t in n?bn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,vt=(n,t)=>{for(var r in t||(t={}))Dn.call(t,r)&&ft(n,r,t[r]);if(gt)for(var r of gt(t))Tn.call(t,r)&&ft(n,r,t[r]);return n},An=(n,t)=>Rn(n,Cn(t)),xn=(n,t,r)=>new Promise((m,y)=>{var g=o=>{try{c(r.next(o))}catch(P){y(P)}},R=o=>{try{c(r.throw(o))}catch(P){y(P)}},c=o=>o.done?m(o.value):Promise.resolve(o.value).then(g,R);c((r=r.apply(n,t)).next())});const Ln=()=>{const{formatMessage:n}=(0,_.useIntl)(),[t,r]=(0,e.useState)(!1),m=(0,a.useNotification)(),{goBack:y}=(0,i.useHistory)(),{lockApp:g,unlockApp:R}=(0,a.useOverlayBlocker)(),{isLoading:c,permissions:o,routes:P}=it(),{trackUsage:N}=(0,a.useTracking)(),W=(0,e.useRef)(),w=H=>xn(void 0,null,function*(){g(),r(!0);try{const k=W.current.getPermissions();yield De.Z.post(`/${d.Z}/roles`,An(vt(vt({},H),k),{users:[]})),N("didCreateRole"),m({type:"success",message:{id:(0,ie.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),y()}catch(k){On.error(k),m({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),R()});return e.createElement(A.o,null,e.createElement(a.SettingsPageTitle,{name:"Roles"}),e.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:w,validationSchema:hn},({handleSubmit:H,values:k,handleChange:Y,errors:J})=>e.createElement(a.Form,{noValidate:!0,onSubmit:H},e.createElement(O.T,{primaryAction:!c&&e.createElement(C.z,{type:"submit",loading:t,startIcon:e.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:n({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:n({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(f.D,null,e.createElement(Q.K,{spacing:7},e.createElement(X.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(Q.K,{spacing:4},e.createElement(M.Z,{variant:"delta",as:"h2"},n({id:(0,ie.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(be.r,{gap:4},e.createElement(ae.P,{col:6},e.createElement(he.o,{name:"name",value:k.name||"",onChange:Y,label:n({id:"global.name",defaultMessage:"Name"}),error:J.name?n({id:J.name,defaultMessage:"Invalid value"}):null})),e.createElement(ae.P,{col:6},e.createElement(me.g,{name:"description",value:k.description||"",onChange:Y,label:n({id:"global.description",defaultMessage:"Description"}),error:J.description?n({id:J.description,defaultMessage:"Invalid value"}):null}))))),!c&&e.createElement(et,{ref:W,permissions:o,routes:P}))))))},Mn=()=>e.createElement(a.CheckPagePermissions,{permissions:p.Z.createRole},e.createElement(Ln,null)),wn=()=>e.createElement(a.CheckPagePermissions,{permissions:p.Z.accessRoles},e.createElement(i.Switch,null,e.createElement(i.Route,{path:`/settings/${d.Z}/roles/new`,component:Mn,exact:!0}),e.createElement(i.Route,{path:`/settings/${d.Z}/roles/:id`,component:yn,exact:!0}),e.createElement(i.Route,{path:`/settings/${d.Z}/roles`,component:Te,exact:!0}),e.createElement(i.Route,{path:"",component:a.NotFound})))},46979:(U,S,s)=>{"use strict";s.d(S,{Z:()=>T});var e=s(78648),i=s(68547),a=s.n(i),d=(O,v,f)=>new Promise((A,j)=>{var u=D=>{try{E(f.next(D))}catch(M){j(M)}},h=D=>{try{E(f.throw(D))}catch(M){j(M)}},E=D=>D.done?A(D.value):Promise.resolve(D.value).then(u,h);E((f=f.apply(O,v)).next())});const p=e.Z.create({baseURL:""});p.interceptors.request.use(O=>d(void 0,null,function*(){return O.headers={Authorization:`Bearer ${i.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},O}),O=>{Promise.reject(O)}),p.interceptors.response.use(O=>O,O=>{var v;throw((v=O.response)==null?void 0:v.status)===401&&(i.auth.clearAppStorage(),window.location.reload()),O});const T=(0,i.wrapAxiosInstance)(p)},89031:(U,S,s)=>{"use strict";s.d(S,{be:()=>e.Z,YX:()=>d,Gc:()=>T,OB:()=>O.Z});var e=s(46979),i=s(96486);const d=v=>Object.keys(v).reduce((f,A)=>{const j=v[A].controllers,u=Object.keys(j).reduce((h,E)=>((0,i.isEmpty)(j[E])||(h[E]=j[E]),h),{});return(0,i.isEmpty)(u)||(f[A]={controllers:u}),f},{});var p=s(31498);const T=v=>`/${p.Z}/${v}`;var O=s(84757)},89881:(U,S,s)=>{var e=s(47816),i=s(99291),a=i(e);U.exports=a},69199:(U,S,s)=>{var e=s(89881),i=s(98612);function a(d,p){var C=-1,T=i(d)?Array(d.length):[];return e(d,function(O,v,f){T[++C]=p(O,v,f)}),T}U.exports=a},82689:(U,S,s)=>{var e=s(29932),i=s(97786),a=s(67206),d=s(69199),p=s(71131),C=s(7518),T=s(85022),O=s(6557),v=s(1469);function f(A,j,u){j.length?j=e(j,function(D){return v(D)?function(M){return i(M,D.length===1?D[0]:D)}:D}):j=[O];var h=-1;j=e(j,C(a));var E=d(A,function(D,M,G){var F=e(j,function(_){return _(D)});return{criteria:F,index:++h,value:D}});return p(E,function(D,M){return T(D,M,u)})}U.exports=f},71131:U=>{function S(s,e){var i=s.length;for(s.sort(e);i--;)s[i]=s[i].value;return s}U.exports=S},26393:(U,S,s)=>{var e=s(33448);function i(a,d){if(a!==d){var p=a!==void 0,C=a===null,T=a===a,O=e(a),v=d!==void 0,f=d===null,A=d===d,j=e(d);if(!f&&!j&&!O&&a>d||O&&v&&A&&!f&&!j||C&&v&&A||!p&&A||!T)return 1;if(!C&&!O&&!j&&a<d||j&&p&&T&&!C&&!O||f&&p&&T||!v&&T||!A)return-1}return 0}U.exports=i},85022:(U,S,s)=>{var e=s(26393);function i(a,d,p){for(var C=-1,T=a.criteria,O=d.criteria,v=T.length,f=p.length;++C<v;){var A=e(T[C],O[C]);if(A){if(C>=f)return A;var j=p[C];return A*(j=="desc"?-1:1)}}return a.index-d.index}U.exports=i},99291:(U,S,s)=>{var e=s(98612);function i(a,d){return function(p,C){if(p==null)return p;if(!e(p))return a(p,C);for(var T=p.length,O=d?T:-1,v=Object(p);(d?O--:++O<T)&&C(v[O],O,v)!==!1;);return p}}U.exports=i},35161:(U,S,s)=>{var e=s(29932),i=s(67206),a=s(69199),d=s(1469);function p(C,T){var O=d(C)?e:a;return O(C,i(T,3))}U.exports=p},89734:(U,S,s)=>{var e=s(21078),i=s(82689),a=s(5976),d=s(16612),p=a(function(C,T){if(C==null)return[];var O=T.length;return O>1&&d(C,T[0],T[1])?T=[]:O>2&&d(T[0],T[1],T[2])&&(T=[T[0]]),i(C,e(T,1),[])});U.exports=p},13217:(U,S,s)=>{var e=s(14259);function i(a){var d=a==null?0:a.length;return d?e(a,1,d):[]}U.exports=i},48734:(U,S,s)=>{"use strict";s.d(S,{U:()=>j,y:()=>f});var e=s(67294),i=s(45697),a=s(71893),d=s(72735),p=s(13819),C=s(41762),T=s(35961),O=s(46273);const v=({theme:u,expanded:h,variant:E,disabled:D,error:M})=>M?`1px solid ${u.colors.danger600} !important`:D?`1px solid ${u.colors.neutral150}`:h?`1px solid ${u.colors.primary600}`:E==="primary"?`1px solid ${u.colors.neutral0}`:`1px solid ${u.colors.neutral100}`,f=(0,a.default)(d.Z)``,A=(0,a.default)(T.x)`
  border: ${v};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:u})=>u.colors.primary600};

    ${f} {
      color: ${({theme:u,expanded:h})=>h?void 0:u.colors.primary700};
    }

    ${d.Z} {
      color: ${({theme:u,expanded:h})=>h?void 0:u.colors.primary600};
    }

    & > ${O.k} {
      background: ${({theme:u})=>u.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:u})=>u.colors.primary200};
    }
  }
`,j=({children:u,expanded:h,id:E,size:D,variant:M,disabled:G,error:F,hasErrorMessage:_,onToggle:$,toggle:Z})=>{const I=(0,C.M)("accordion",E);return e.createElement(p.S.Provider,{value:{expanded:h,onToggle:$,toggle:Z,id:I,size:D,variant:M,disabled:G}},e.createElement(A,{"data-strapi-expanded":h,disabled:G,"aria-disabled":G,expanded:h,hasRadius:!0,variant:M,error:F},u),F&&_&&e.createElement(T.x,{paddingTop:1},e.createElement(d.Z,{variant:"pi",textColor:"danger600"},F)))};j.defaultProps={disabled:!1,error:void 0,expanded:!1,hasErrorMessage:!0,id:void 0,toggle:void 0,size:"M",variant:"primary",onToggle:void 0},j.propTypes={children:i.node.isRequired,disabled:i.bool,error:i.string,expanded:i.bool,hasErrorMessage:i.bool,id:i.string,onToggle:i.func,size:i.oneOf(["S","M"]),toggle:i.func,variant:i.oneOf(["primary","secondary"])}},63081:(U,S,s)=>{"use strict";s.d(S,{v:()=>j});var e=s(67294),i=s(45697),a=s(13819),d=s(35961),p=Object.defineProperty,C=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,v=(u,h,E)=>h in u?p(u,h,{enumerable:!0,configurable:!0,writable:!0,value:E}):u[h]=E,f=(u,h)=>{for(var E in h||(h={}))T.call(h,E)&&v(u,E,h[E]);if(C)for(var E of C(h))O.call(h,E)&&v(u,E,h[E]);return u},A=(u,h)=>{var E={};for(var D in u)T.call(u,D)&&h.indexOf(D)<0&&(E[D]=u[D]);if(u!=null&&C)for(var D of C(u))h.indexOf(D)<0&&O.call(u,D)&&(E[D]=u[D]);return E};const j=u=>{var h=u,{children:E}=h,D=A(h,["children"]);const{expanded:M,id:G}=(0,a.A)();if(!M)return null;const F=`accordion-content-${G}`,_=`accordion-label-${G}`,$=`accordion-desc-${G}`;return e.createElement(d.x,f({role:"region",id:F,"aria-labelledby":_,"aria-describedby":$},D),E)};j.propTypes={children:i.node.isRequired}},13819:(U,S,s)=>{"use strict";s.d(S,{A:()=>a,S:()=>i});var e=s(67294);const i=(0,e.createContext)(),a=()=>(0,e.useContext)(i)},74756:(U,S,s)=>{"use strict";s.d(S,{B:()=>I});var e=s(67294),i=s(45697),a=s(12645),d=s(71893),p=s(39785),C=s(72735),T=s(48734),O=s(13819),v=s(46273),f=s(7681),A=s(52624);const j=({expanded:l,disabled:b,variant:x})=>{let L;return l?L="primary100":b?L="neutral150":x==="primary"?L="neutral0":L="neutral100",L};var u=s(25108),h=Object.defineProperty,E=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,G=(l,b,x)=>b in l?h(l,b,{enumerable:!0,configurable:!0,writable:!0,value:x}):l[b]=x,F=(l,b)=>{for(var x in b||(b={}))D.call(b,x)&&G(l,x,b[x]);if(E)for(var x of E(b))M.call(b,x)&&G(l,x,b[x]);return l},_=(l,b)=>{var x={};for(var L in l)D.call(l,L)&&b.indexOf(L)<0&&(x[L]=l[L]);if(l!=null&&E)for(var L of E(l))b.indexOf(L)<0&&M.call(l,L)&&(x[L]=l[L]);return x};const $=(0,d.default)(p.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:l,expanded:b})=>b?l.colors.primary600:l.colors.neutral500};
    }
  }
`,Z=(0,d.default)(v.k)`
  min-height: ${({theme:l,size:b})=>l.sizes.accordions[b]};
  border-radius: ${({theme:l,expanded:b})=>b?`${l.borderRadius} ${l.borderRadius} 0 0`:l.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:l})=>l.colors.primary600};
      }
    }
  }
`,I=l=>{var b=l,{title:x,description:L,as:B,togglePosition:K,action:z}=b,ee=_(b,["title","description","as","togglePosition","action"]);const ne=(0,e.useRef)(null),{onToggle:oe,toggle:se,expanded:V,id:de,size:te,variant:fe,disabled:re}=(0,O.A)(),ue=`accordion-content-${de}`,ve=`accordion-label-${de}`,Ee=`accordion-desc-${de}`,pe=te==="M"?6:4,Pe=te==="M"?pe:pe-2,Me=j({expanded:V,disabled:re,variant:fe}),Te={as:B,fontWeight:te==="S"?"bold":void 0,id:ve,textColor:V?"primary600":"neutral700",ellipsis:!0,variant:te==="M"?"delta":void 0},ye=V?"primary600":"neutral600",Q=V?"primary200":"neutral200",X=te==="M"?`${32/16}rem`:`${24/16}rem`,he=()=>{re||(se&&!oe?(u.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),se()):oe())},me=e.createElement(v.k,{justifyContent:"center",borderRadius:"50%",height:X,width:X,transform:V?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,disabled:re,"aria-hidden":!0,as:"span",background:Q,cursor:re?"not-allowed":"pointer",onClick:()=>{var Oe;return(Oe=ne==null?void 0:ne.current)==null?void 0:Oe.click()},shrink:0},e.createElement(A.J,{as:a.default,width:te==="M"?`${11/16}rem`:`${8/16}rem`,color:V?"primary600":"neutral600"}));return e.createElement(Z,{paddingBottom:Pe,paddingLeft:pe,paddingRight:pe,paddingTop:Pe,background:Me,expanded:V,size:te,justifyContent:"space-between",cursor:re?"not-allowed":""},e.createElement(f.K,{horizontal:!0,spacing:3,flex:1,maxWidth:"100%"},K==="left"&&me,e.createElement($,F({ref:ne,onClick:he,"aria-disabled":re,"aria-expanded":V,"aria-controls":ue,"aria-labelledby":ve,"data-strapi-accordion-toggle":!0,expanded:V,type:"button",flex:1,minWidth:0},ee),e.createElement(e.Fragment,null,e.createElement(T.y,F({},Te),x),L&&e.createElement(C.Z,{as:"p",id:Ee,textColor:ye},L))),K==="right"&&e.createElement(f.K,{horizontal:!0,spacing:3},me,z),K==="left"&&z))};I.defaultProps={action:void 0,as:"span",description:void 0,variant:"primary",togglePosition:"right"},I.propTypes={action:i.node,as:i.string,description:i.string,title:i.string.isRequired,togglePosition:i.oneOf(["right","left"]),variant:i.oneOf(["primary","secondary"])}},36989:(U,S,s)=>{"use strict";s.d(S,{Z:()=>O});var e=s(67294),i=s(45697),a=s(71893),d=s(35961),p=s(46273);const C=(0,a.default)(p.k)`
  & > * + * {
    margin-left: ${({theme:v})=>v.spaces[2]};
  }

  margin-left: ${({pullRight:v})=>v?"auto":void 0};
`,T=(0,a.default)(C)`
  flex-shrink: 0;
`,O=({startActions:v,endActions:f})=>v||f?e.createElement(d.x,{paddingLeft:10,paddingRight:10},e.createElement(d.x,{paddingBottom:4},e.createElement(p.k,{justifyContent:"space-between",alignItems:"flex-start"},v&&e.createElement(C,{wrap:"wrap"},v),f&&e.createElement(T,{pullRight:!0},f)))):null;O.defaultProps={endActions:void 0,startActions:void 0},O.propTypes={endActions:i.node,startActions:i.node}},49066:(U,S,s)=>{"use strict";s.d(S,{D:()=>d});var e=s(67294),i=s(45697),a=s(35961);const d=({children:p})=>e.createElement(a.x,{paddingLeft:10,paddingRight:10},p);d.propTypes={children:i.node.isRequired}},67838:(U,S,s)=>{"use strict";s.d(S,{T:()=>$});var e=s(67294),i=s(71893),a=s(45697),d=s(72735),p=s(35961),C=s(46273);const T=l=>{const b=(0,e.useRef)(null),[x,L]=(0,e.useState)(!0),B=([K])=>{L(K.isIntersecting)};return(0,e.useEffect)(()=>{const K=b.current,z=new IntersectionObserver(B,l);return K&&z.observe(b.current),()=>{K&&z.disconnect()}},[b,l]),[b,x]};var O=s(98402);const v=(l,b)=>{const x=(0,O.useCallbackRef)(b);(0,e.useLayoutEffect)(()=>{const L=new ResizeObserver(x);return Array.isArray(l)?l.forEach(B=>{B.current&&L.observe(B.current)}):l.current&&L.observe(l.current),()=>{L.disconnect()}},[l,x])};var f=Object.defineProperty,A=Object.defineProperties,j=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,D=(l,b,x)=>b in l?f(l,b,{enumerable:!0,configurable:!0,writable:!0,value:x}):l[b]=x,M=(l,b)=>{for(var x in b||(b={}))h.call(b,x)&&D(l,x,b[x]);if(u)for(var x of u(b))E.call(b,x)&&D(l,x,b[x]);return l},G=(l,b)=>A(l,j(b)),F=(l,b)=>{var x={};for(var L in l)h.call(l,L)&&b.indexOf(L)<0&&(x[L]=l[L]);if(l!=null&&u)for(var L of u(l))b.indexOf(L)<0&&E.call(l,L)&&(x[L]=l[L]);return x};const _=()=>{const l=(0,e.useRef)(null),[b,x]=(0,e.useState)(null),[L,B]=T({root:null,rootMargin:"0px",threshold:0});return v(L,()=>{L.current&&x(L.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{l.current&&x(l.current.getBoundingClientRect())},[l]),{containerRef:L,isVisible:B,baseHeaderLayoutRef:l,headerSize:b}},$=l=>{const{containerRef:b,isVisible:x,baseHeaderLayoutRef:L,headerSize:B}=_();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:B==null?void 0:B.height},ref:b},x&&e.createElement(I,M({ref:L},l))),!x&&e.createElement(I,G(M({},l),{sticky:!0,width:B==null?void 0:B.width})))};$.displayName="HeaderLayout";const Z=(0,i.default)(p.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${l=>l.width}px;
  z-index: 4;
  box-shadow: ${({theme:l})=>l.shadows.tableShadow};
`,I=e.forwardRef((l,b)=>{var x=l,{navigationAction:L,primaryAction:B,secondaryAction:K,subtitle:z,title:ee,sticky:ne,width:oe}=x,se=F(x,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const V=typeof z=="string";return ne?e.createElement(Z,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:oe,"data-strapi-header-sticky":!0},e.createElement(C.k,{justifyContent:"space-between"},e.createElement(C.k,null,L&&e.createElement(p.x,{paddingRight:3},L),e.createElement(p.x,null,e.createElement(d.Z,M({variant:"beta",as:"h1"},se),ee),V?e.createElement(d.Z,{variant:"pi",textColor:"neutral600"},z):z),K?e.createElement(p.x,{paddingLeft:4},K):null),e.createElement(C.k,null,B?e.createElement(p.x,{paddingLeft:2},B):void 0))):e.createElement(p.x,{ref:b,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:L?6:8,background:"neutral100","data-strapi-header":!0},L?e.createElement(p.x,{paddingBottom:2},L):null,e.createElement(C.k,{justifyContent:"space-between"},e.createElement(C.k,null,e.createElement(d.Z,M({as:"h1",variant:"alpha"},se),ee),K?e.createElement(p.x,{paddingLeft:4},K):null),B),V?e.createElement(d.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},z):z)});I.displayName="BaseHeaderLayout",I.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},I.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,sticky:a.bool,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired,width:a.number},$.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},$.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired}},185:(U,S,s)=>{"use strict";s.d(S,{o:()=>j});var e=s(67294),i=s(45697),a=s(71893),d=Object.defineProperty,p=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,O=(u,h,E)=>h in u?d(u,h,{enumerable:!0,configurable:!0,writable:!0,value:E}):u[h]=E,v=(u,h)=>{for(var E in h||(h={}))C.call(h,E)&&O(u,E,h[E]);if(p)for(var E of p(h))T.call(h,E)&&O(u,E,h[E]);return u},f=(u,h)=>{var E={};for(var D in u)C.call(u,D)&&h.indexOf(D)<0&&(E[D]=u[D]);if(u!=null&&p)for(var D of p(u))h.indexOf(D)<0&&T.call(u,D)&&(E[D]=u[D]);return E};const A=a.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,j=u=>{var h=u,{labelledBy:E}=h,D=f(h,["labelledBy"]);const M=E||"main-content-title";return e.createElement(A,v({"aria-labelledby":M,id:"main-content",tabIndex:-1},D))};j.defaultProps={labelledBy:void 0},j.propTypes={labelledBy:i.string}},39785:(U,S,s)=>{"use strict";s.d(S,{A:()=>F});var e=s(67294),i=s(45697),a=s(71893),d=s(86647),p=s(35961),C=s(72735),T=s(46273),O=s(15585),v=Object.defineProperty,f=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,u=(_,$,Z)=>$ in _?v(_,$,{enumerable:!0,configurable:!0,writable:!0,value:Z}):_[$]=Z,h=(_,$)=>{for(var Z in $||($={}))A.call($,Z)&&u(_,Z,$[Z]);if(f)for(var Z of f($))j.call($,Z)&&u(_,Z,$[Z]);return _},E=(_,$)=>{var Z={};for(var I in _)A.call(_,I)&&$.indexOf(I)<0&&(Z[I]=_[I]);if(_!=null&&f)for(var I of f(_))$.indexOf(I)<0&&j.call(_,I)&&(Z[I]=_[I]);return Z};const D=a.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,M=a.default.div`
  animation: ${D} 2s infinite linear;
  will-change: transform;
`,G=(0,a.default)(T.k)`
  background: transparent;
  border: none;

  &[aria-disabled='true'] {
    pointer-events: none;
    svg path {
      fill: ${({theme:_})=>_.colors.neutral600};
    }
  }

  svg {
    display: flex;
    font-size: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:_})=>_.colors.primary600};
  }

  ${O.BF}
`,F=e.forwardRef((_,$)=>{var Z=_,{children:I,startIcon:l,endIcon:b,onClick:x,disabled:L,loading:B}=Z,K=E(Z,["children","startIcon","endIcon","onClick","disabled","loading"]);const z=x&&!L?x:void 0,ee=L||B;return e.createElement(G,h({ref:$,"aria-disabled":ee,onClick:z,as:"button",type:"button"},K),(l||B)&&e.createElement(p.x,{as:"span",paddingRight:2,"aria-hidden":!0},B?e.createElement(M,null,e.createElement(d.default,null)):l),e.createElement(C.Z,{variant:"pi",textColor:ee?"neutral600":"primary600"},I),b&&e.createElement(p.x,{as:"span",paddingLeft:2,"aria-hidden":!0},b))});F.displayName="TextButton",F.defaultProps={disabled:!1,startIcon:void 0,endIcon:void 0,loading:!1,onClick:void 0},F.propTypes={children:i.node.isRequired,disabled:i.bool,endIcon:i.element,loading:i.bool,onClick:i.func,startIcon:i.element}},67109:(U,S,s)=>{"use strict";s.d(S,{Z:()=>O});var e=s(67294),i=Object.defineProperty,a=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,C=(v,f,A)=>f in v?i(v,f,{enumerable:!0,configurable:!0,writable:!0,value:A}):v[f]=A,T=(v,f)=>{for(var A in f||(f={}))d.call(f,A)&&C(v,A,f[A]);if(a)for(var A of a(f))p.call(f,A)&&C(v,A,f[A]);return v};function O(v){return e.createElement("svg",T({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v),e.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}},78114:(U,S,s)=>{"use strict";s.d(S,{Z:()=>O});var e=s(67294),i=Object.defineProperty,a=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,C=(v,f,A)=>f in v?i(v,f,{enumerable:!0,configurable:!0,writable:!0,value:A}):v[f]=A,T=(v,f)=>{for(var A in f||(f={}))d.call(f,A)&&C(v,A,f[A]);if(a)for(var A of a(f))p.call(f,A)&&C(v,A,f[A]);return v};function O(v){return e.createElement("svg",T({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}}]);
